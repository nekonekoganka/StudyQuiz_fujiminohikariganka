<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>ä½¿ã„æ–¹ã‚¬ã‚¤ãƒ‰ - ã²ã‹ã‚Šçœ¼ç§‘ å­¦ç¿’ã‚¯ã‚¤ã‚º</title>
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="images/icon-180.png">
    <meta name="theme-color" content="#667eea">
    <style>
        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Noto Sans JP', -apple-system, BlinkMacSystemFont, sans-serif;
            margin: 0;
            padding: 12px;
            padding-top: max(12px, env(safe-area-inset-top));
            padding-bottom: max(12px, env(safe-area-inset-bottom));
            padding-left: max(12px, env(safe-area-inset-left));
            padding-right: max(12px, env(safe-area-inset-right));
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            line-height: 1.7;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 28px 20px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.2);
        }

        .header {
            text-align: center;
            margin-bottom: 32px;
        }

        .logo-icon {
            width: 120px;
            height: auto;
            margin-bottom: 12px;
        }

        h1 {
            color: #1a237e;
            font-size: 24px;
            margin: 0 0 14px 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            line-height: 1.3;
        }

        .subtitle {
            color: #5c6bc0;
            font-size: 15px;
            margin-bottom: 10px;
            line-height: 1.5;
        }

        .section {
            margin-bottom: 32px;
        }

        .section-title {
            font-size: 18px;
            font-weight: bold;
            color: #1a237e;
            margin: 0 0 16px 0;
            padding-bottom: 10px;
            border-bottom: 3px solid #e8eaf6;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-icon {
            font-size: 22px;
        }

        .content-box {
            background: #f8f9ff;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 16px;
        }

        .content-box h3 {
            color: #1a237e;
            font-size: 16px;
            margin: 0 0 12px 0;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .content-box p {
            color: #333;
            font-size: 14px;
            margin: 0 0 12px 0;
        }

        .content-box p:last-child {
            margin-bottom: 0;
        }

        .content-box ul {
            color: #333;
            font-size: 14px;
            margin: 0;
            padding-left: 20px;
        }

        .content-box li {
            margin-bottom: 8px;
        }

        .content-box li:last-child {
            margin-bottom: 0;
        }

        .highlight {
            background: linear-gradient(transparent 60%, #fff59d 60%);
            font-weight: bold;
        }

        .tip-box {
            background: linear-gradient(135deg, #e8f5e9, #c8e6c9);
            border-left: 4px solid #4caf50;
            border-radius: 8px;
            padding: 16px;
            margin: 16px 0;
        }

        .tip-box h4 {
            color: #2e7d32;
            font-size: 14px;
            margin: 0 0 8px 0;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .tip-box p {
            color: #1b5e20;
            font-size: 13px;
            margin: 0;
        }

        /* ãƒ‡ãƒ¼ã‚¿ä¿è­·ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆè­¦å‘Šã‚¹ã‚¿ã‚¤ãƒ«ï¼‰ */
        .tip-box.warning {
            background: linear-gradient(135deg, #fff3e0, #ffe0b2);
            border-left-color: #ff9800;
        }
        .tip-box.warning h4 {
            color: #e65100;
        }
        .tip-box.warning p {
            color: #bf360c;
        }

        /* ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒœã‚¿ãƒ³ */
        .backup-buttons {
            margin-top: 12px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        .backup-btn {
            padding: 10px 20px;
            border-radius: 20px;
            border: 2px solid #4caf50;
            background: white;
            color: #2e7d32;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }
        .backup-btn:active {
            transform: scale(0.95);
        }
        .backup-btn.restore {
            border-color: #2196f3;
            color: #1565c0;
        }
        .last-backup-info {
            margin-top: 8px;
            font-size: 12px;
            color: #bf360c;
        }

        .badge-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 12px;
            margin-top: 12px;
        }

        .badge-item {
            background: white;
            border: 2px solid #e8eaf6;
            border-radius: 10px;
            padding: 12px;
            text-align: center;
        }

        .badge-icon {
            font-size: 28px;
            margin-bottom: 4px;
        }

        .badge-name {
            font-size: 12px;
            color: #1a237e;
            font-weight: bold;
        }

        .badge-desc {
            font-size: 10px;
            color: #5c6bc0;
            margin-top: 4px;
        }

        .step-list {
            counter-reset: step;
        }

        .step-item {
            display: flex;
            align-items: flex-start;
            gap: 16px;
            margin-bottom: 20px;
            position: relative;
        }

        .step-number {
            flex-shrink: 0;
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 16px;
        }

        .step-content {
            flex-grow: 1;
        }

        .step-content h4 {
            color: #1a237e;
            font-size: 15px;
            margin: 0 0 6px 0;
        }

        .step-content p {
            color: #555;
            font-size: 13px;
            margin: 0;
        }

        .home-link {
            display: inline-block;
            margin-top: 20px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            text-decoration: none;
            padding: 14px 32px;
            border-radius: 25px;
            font-size: 15px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .home-link:active {
            transform: scale(0.95);
        }

        .footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 24px;
            border-top: 2px solid #e8eaf6;
        }

        .footer-text {
            color: #9fa8da;
            font-size: 13px;
        }

        .install-section {
            background: linear-gradient(135deg, #fff3e0, #ffe0b2);
            border-radius: 12px;
            padding: 20px;
            margin-top: 16px;
        }

        .install-section h4 {
            color: #e65100;
            font-size: 15px;
            margin: 0 0 12px 0;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .install-steps {
            font-size: 13px;
            color: #bf360c;
        }

        .install-steps strong {
            color: #e65100;
        }

        .device-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 12px;
        }

        .device-tab {
            padding: 8px 16px;
            border: none;
            border-radius: 20px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s;
            background: rgba(255,255,255,0.5);
            color: #e65100;
        }

        .device-tab.active {
            background: #e65100;
            color: white;
        }

        .device-content {
            display: none;
        }

        .device-content.active {
            display: block;
        }

        /* PCç‰ˆä¸Šéƒ¨ãƒŠãƒ“ */
        .top-nav {
            display: none;
        }

        /* ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆãƒ»PCå‘ã‘ */
        @media (min-width: 768px) {
            .top-nav {
                display: block;
                text-align: left;
                margin-bottom: 16px;
            }
            .top-nav-link {
                display: inline-flex;
                align-items: center;
                gap: 6px;
                color: #5c6bc0;
                text-decoration: none;
                font-size: 14px;
                font-weight: 500;
                padding: 8px 16px;
                border-radius: 20px;
                background: #f0f2ff;
                transition: all 0.2s;
            }
            .top-nav-link:hover {
                background: #e0e4ff;
                color: #3949ab;
            }

            body {
                padding: 20px;
            }

            .container {
                padding: 40px;
            }

            h1 {
                font-size: 28px;
            }

            .section-title {
                font-size: 20px;
            }

            .home-link:hover {
                transform: translateY(-2px);
                box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
            }
        }

        /* ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ */
        @media (prefers-color-scheme: dark) {
            body {
                background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            }

            .container {
                background: #1e1e2e;
                box-shadow: 0 15px 40px rgba(0,0,0,0.5);
            }

            h1, .section-title, .content-box h3, .step-content h4 {
                color: #e0e0e0;
            }

            .subtitle {
                color: #b0b0b0;
            }

            .content-box {
                background: #2a2a3e;
            }

            .content-box p, .content-box ul, .step-content p {
                color: #c0c0c0;
            }

            .badge-item {
                background: #2a2a3e;
                border-color: #3a3a4e;
            }

            .badge-name {
                color: #e0e0e0;
            }

            .badge-desc {
                color: #a0a0b0;
            }

            .tip-box {
                background: linear-gradient(135deg, #1b3d1f, #244728);
            }

            .tip-box h4 {
                color: #81c784;
            }

            .tip-box p {
                color: #a5d6a7;
            }

            /* ãƒ‡ãƒ¼ã‚¿ä¿è­·ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆè­¦å‘Šã‚¹ã‚¿ã‚¤ãƒ«ï¼‰ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ */
            .tip-box.warning {
                background: linear-gradient(135deg, #3d2f20, #4a3828);
            }
            .tip-box.warning h4 {
                color: #ffb74d;
            }
            .tip-box.warning p {
                color: #ffcc80;
            }

            /* ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒœã‚¿ãƒ³ ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ */
            .backup-btn {
                background: #2a2a3e;
                border-color: #4caf50;
                color: #81c784;
            }
            .backup-btn.restore {
                border-color: #2196f3;
                color: #64b5f6;
            }
            .last-backup-info {
                color: #ffcc80;
            }

            .install-section {
                background: linear-gradient(135deg, #3d2f20, #4a3828);
            }

            .install-section h4 {
                color: #ffb74d;
            }

            .install-steps {
                color: #ffcc80;
            }

            .install-steps strong {
                color: #ffb74d;
            }

            .device-tab {
                background: rgba(0,0,0,0.3);
                color: #ffb74d;
            }

            .device-tab.active {
                background: #e65100;
                color: white;
            }

            .footer {
                border-top-color: #3a3a4e;
            }

            .footer-text {
                color: #707080;
            }

            .highlight {
                background: linear-gradient(transparent 60%, #5d4e15 60%);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="top-nav">
            <a href="index.html" class="top-nav-link">â† ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹</a>
        </div>

        <div class="header">
            <img src="images/ãµã˜ã¿é‡ã´ã‹ã´ã‹ã‚Šçœ¼ç§‘_ãƒ­ã‚´.png" alt="ãµã˜ã¿é‡ã²ã‹ã‚Šçœ¼ç§‘ãƒ­ã‚´" class="logo-icon">
            <h1>ä½¿ã„æ–¹ã‚¬ã‚¤ãƒ‰</h1>
            <div class="subtitle">ã²ã‹ã‚Šçœ¼ç§‘ å­¦ç¿’ã‚¯ã‚¤ã‚ºã®ä½¿ã„æ–¹</div>
        </div>

        <!-- ã“ã®ã‚¢ãƒ—ãƒªã«ã¤ã„ã¦ -->
        <div class="section">
            <h2 class="section-title">
                <span class="section-icon">ğŸ“±</span>
                ã“ã®ã‚¢ãƒ—ãƒªã«ã¤ã„ã¦
            </h2>
            <div class="content-box">
                <p>ã€Œã²ã‹ã‚Šçœ¼ç§‘ å­¦ç¿’ã‚¯ã‚¤ã‚ºã€ã¯ã€çœ¼ç§‘ã‚¹ã‚¿ãƒƒãƒ•ã®çš†ã•ã‚“ãŒ<span class="highlight">æ¥½ã—ãçœ¼ç§‘çŸ¥è­˜ã‚’å­¦ã¹ã‚‹</span>ã‚¯ã‚¤ã‚ºã‚¢ãƒ—ãƒªã§ã™ã€‚</p>
                <p>è¿‘è¦–ã€ç™½å†…éšœã€ç·‘å†…éšœãªã©æ§˜ã€…ãªçœ¼ç§‘ç–¾æ‚£ã‚„ã€ã‚³ãƒ³ã‚¿ã‚¯ãƒˆãƒ¬ãƒ³ã‚ºãƒ»ãƒ¡ã‚¬ãƒã®å‡¦æ–¹çŸ¥è­˜ã€é™¢å†…ãƒ«ãƒ¼ãƒ«ã¾ã§å¹…åºƒã„ã‚¯ã‚¤ã‚ºã‚’ç”¨æ„ã—ã¦ã„ã¾ã™ã€‚</p>
            </div>

            <div class="tip-box warning">
                <h4>âš ï¸ ãƒ‡ãƒ¼ã‚¿ä¿è­·ã«ã¤ã„ã¦</h4>
                <p>å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã¯ç«¯æœ«ã®ãƒ–ãƒ©ã‚¦ã‚¶å†…ã«ä¿å­˜ã•ã‚Œã¦ã„ã¾ã™ã€‚ãã®ãŸã‚ã€Œå±¥æ­´ã¨Webã‚µã‚¤ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’æ¶ˆå»ã€ãªã©ã®æ“ä½œã‚’ã™ã‚‹ã¨ä¸€ç·’ã«æ¶ˆãˆã¦ã—ã¾ã„ã¾ã™ã€‚å®šæœŸçš„ãªãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’ãŠã™ã™ã‚ã—ã¾ã™ã€‚</p>
                <div class="backup-buttons">
                    <button class="backup-btn" onclick="downloadBackup()">ğŸ“¥ ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—</button>
                    <button class="backup-btn restore" onclick="startRestore()">ğŸ“‚ ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸ã‚“ã§å¾©å…ƒ</button>
                    <input type="file" id="restoreInput" accept=".json" onchange="handleRestoreFile(event)" style="display: none;">
                </div>
                <div class="last-backup-info">
                    æœ€çµ‚ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—: <span id="lastBackupDate">ç¢ºèªä¸­...</span>
                </div>
            </div>
        </div>

        <!-- åŸºæœ¬ã®ä½¿ã„æ–¹ -->
        <div class="section">
            <h2 class="section-title">
                <span class="section-icon">ğŸ“–</span>
                åŸºæœ¬ã®ä½¿ã„æ–¹
            </h2>

            <div class="step-list">
                <div class="step-item">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h4>ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã§ã‚¯ã‚¤ã‚ºã‚’é¸ã¶</h4>
                        <p>ã‚«ãƒ†ã‚´ãƒªï¼ˆãƒ¡ã‚¬ãƒãƒ»ã‚³ãƒ³ã‚¿ã‚¯ãƒˆ / çœ¼ã®ç–¾æ‚£ / é™¢å†…ãƒ«ãƒ¼ãƒ«ï¼‰ã‹ã‚‰ã‚¯ã‚¤ã‚ºã‚’é¸ã³ã¾ã™ã€‚</p>
                    </div>
                </div>

                <div class="step-item">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h4>å‡ºé¡Œãƒ¢ãƒ¼ãƒ‰ã‚’é¸ã¶</h4>
                        <p>ã€Œä»Šæ—¥ã®â—‹å•ã€ã¯è‹¦æ‰‹ãªå•é¡Œã‚’å„ªå…ˆå‡ºé¡Œã€‚ã€Œå…¨å•ãƒ¢ãƒ¼ãƒ‰ã€ã¯å…¨å•é¡Œã‚’é †ç•ªã«å‡ºé¡Œã—ã¾ã™ã€‚</p>
                    </div>
                </div>

                <div class="step-item">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h4>å•é¡Œã«å›ç­”ã™ã‚‹</h4>
                        <p>é¸æŠè‚¢ã‚’ã‚¿ãƒƒãƒ—ã—ã¦å›ç­”ã—ã¾ã™ã€‚æ­£è§£ãƒ»ä¸æ­£è§£ã®å¾Œã«è§£èª¬ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
                    </div>
                </div>

                <div class="step-item">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <h4>çµæœã‚’ç¢ºèª</h4>
                        <p>ã‚¯ã‚¤ã‚ºçµ‚äº†å¾Œã€ã‚¹ã‚³ã‚¢ã¨é”æˆåº¦ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚æº€ç‚¹ã‚’ç›®æŒ‡ã—ã¾ã—ã‚‡ã†ï¼</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- å‡ºé¡Œãƒ¢ãƒ¼ãƒ‰ã«ã¤ã„ã¦ -->
        <div class="section">
            <h2 class="section-title">
                <span class="section-icon">ğŸ¯</span>
                å‡ºé¡Œãƒ¢ãƒ¼ãƒ‰ã«ã¤ã„ã¦
            </h2>

            <div class="content-box">
                <h3>ğŸ“‹ ä»Šæ—¥ã®â—‹å•ãƒ¢ãƒ¼ãƒ‰</h3>
                <p>åŠ¹ç‡çš„ã«å¾©ç¿’ã§ãã‚‹ãƒ¢ãƒ¼ãƒ‰ã§ã™ã€‚ä»¥ä¸‹ã®å„ªå…ˆé †ä½ã§å•é¡ŒãŒå‡ºé¡Œã•ã‚Œã¾ã™ï¼š</p>
                <ul>
                    <li><strong>é–“é•ãˆãŸå•é¡Œ</strong>ã‚’æœ€å„ªå…ˆã§å‡ºé¡Œ</li>
                    <li>æ¬¡ã«<strong>æœªæŒ‘æˆ¦ã®å•é¡Œ</strong>ã‚’å‡ºé¡Œ</li>
                    <li>æœ€å¾Œã«<strong>æ­£è§£æ¸ˆã¿ã®å•é¡Œ</strong>ã‚’å‡ºé¡Œ</li>
                </ul>
            </div>

            <div class="content-box">
                <h3>ğŸ“š å…¨å•ãƒ¢ãƒ¼ãƒ‰</h3>
                <p>ã‚¯ã‚¤ã‚ºã®å…¨å•é¡Œã‚’æœ€åˆã‹ã‚‰é †ç•ªã«å‡ºé¡Œã—ã¾ã™ã€‚ã˜ã£ãã‚Šå­¦ç¿’ã—ãŸã„æ™‚ã«ãŠã™ã™ã‚ã§ã™ã€‚</p>
            </div>

            <div class="content-box">
                <h3>ğŸ² ä»Šæ—¥ã®â—‹å•ãƒœã‚¿ãƒ³ï¼ˆãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ï¼‰</h3>
                <p>ãƒ©ãƒ³ãƒ€ãƒ ãªã‚¯ã‚¤ã‚ºã‹ã‚‰â—‹å•å‡ºé¡Œã•ã‚Œã¾ã™ã€‚æ¯æ—¥ã®éš™é–“æ™‚é–“ã«ã‚µã‚¯ãƒƒã¨å­¦ç¿’ã§ãã¾ã™ã€‚å•é¡Œæ•°ã¯ã€Œå­¦ç¿’è¨˜éŒ²ã€ãƒšãƒ¼ã‚¸ã®è¨­å®šã§å¤‰æ›´ã§ãã¾ã™ã€‚</p>
            </div>
        </div>

        <!-- å­¦ç¿’è¨˜éŒ²ã«ã¤ã„ã¦ -->
        <div class="section">
            <h2 class="section-title">
                <span class="section-icon">ğŸ“Š</span>
                å­¦ç¿’è¨˜éŒ²ã«ã¤ã„ã¦
            </h2>

            <div class="content-box">
                <p>ã€Œå­¦ç¿’è¨˜éŒ²ã€ãƒšãƒ¼ã‚¸ã§ã¯ä»¥ä¸‹ã®æƒ…å ±ã‚’ç¢ºèªã§ãã¾ã™ï¼š</p>
                <ul>
                    <li><strong>çµ±è¨ˆ</strong>ï¼šç·å›ç­”æ•°ã€ã‚¯ã‚¤ã‚ºæŒ‘æˆ¦å›æ•°ã€ç²å¾—ãƒãƒƒã‚¸æ•°</li>
                    <li><strong>ãƒãƒƒã‚¸</strong>ï¼šå­¦ç¿’ã®æˆæœã¨ã—ã¦ç²å¾—ã§ãã‚‹å®Ÿç¸¾ãƒãƒƒã‚¸</li>
                    <li><strong>é€²æ—</strong>ï¼šå„ã‚¯ã‚¤ã‚ºã®æœ€é«˜ã‚¹ã‚³ã‚¢ã¨é”æˆçŠ¶æ³</li>
                    <li><strong>è¨­å®š</strong>ï¼šæ–‡å­—ã‚µã‚¤ã‚ºã€åŠ¹æœéŸ³ã€å•é¡Œæ•°ãªã©ã®è¨­å®š</li>
                </ul>
            </div>

            <div class="tip-box">
                <h4>ğŸ’¾ ãƒ‡ãƒ¼ã‚¿ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—</h4>
                <p>å­¦ç¿’è¨˜éŒ²ãƒšãƒ¼ã‚¸ã®ã€Œè¨­å®šã€ã‹ã‚‰å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã‚’ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ï¼ˆãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼‰ãƒ»å¾©å…ƒã§ãã¾ã™ã€‚ç«¯æœ«ã‚’å¤‰æ›´ã™ã‚‹éš›ã«ã”åˆ©ç”¨ãã ã•ã„ã€‚</p>
            </div>
        </div>

        <!-- ãƒãƒƒã‚¸ä¸€è¦§ -->
        <div class="section">
            <h2 class="section-title">
                <span class="section-icon">ğŸ†</span>
                ç²å¾—ã§ãã‚‹ãƒãƒƒã‚¸
            </h2>

            <div class="content-box">
                <p>å­¦ç¿’ã‚’ç¶šã‘ã‚‹ã¨æ§˜ã€…ãªãƒãƒƒã‚¸ã‚’ç²å¾—ã§ãã¾ã™ã€‚å…¨éƒ¨é›†ã‚ã¦ã¿ã¾ã—ã‚‡ã†ï¼</p>

                <div class="badge-list">
                    <div class="badge-item">
                        <div class="badge-icon">ğŸ”°</div>
                        <div class="badge-name">ã¯ã˜ã‚ã®ä¸€æ­©</div>
                        <div class="badge-desc">ã‚¯ã‚¤ã‚ºã«1å›æŒ‘æˆ¦</div>
                    </div>
                    <div class="badge-item">
                        <div class="badge-icon">ğŸŒ±</div>
                        <div class="badge-name">ã‚³ãƒ„ã‚³ãƒ„å­¦ç¿’</div>
                        <div class="badge-desc">ç´¯è¨ˆ50å•å›ç­”</div>
                    </div>
                    <div class="badge-item">
                        <div class="badge-icon">ğŸ”¥</div>
                        <div class="badge-name">ç†±å¿ƒãªæŒ‘æˆ¦è€…</div>
                        <div class="badge-desc">åˆè¨ˆ10å›æŒ‘æˆ¦</div>
                    </div>
                    <div class="badge-item">
                        <div class="badge-icon">ğŸ’¯</div>
                        <div class="badge-name">100å•çªç ´</div>
                        <div class="badge-desc">ç´¯è¨ˆ100å•å›ç­”</div>
                    </div>
                    <div class="badge-item">
                        <div class="badge-icon">ğŸ“š</div>
                        <div class="badge-name">å…¨åˆ¶è¦‡</div>
                        <div class="badge-desc">å…¨ã‚¯ã‚¤ã‚ºã«æŒ‘æˆ¦</div>
                    </div>
                    <div class="badge-item">
                        <div class="badge-icon">ğŸŒ¸</div>
                        <div class="badge-name">æº€ç‚¹é”æˆ</div>
                        <div class="badge-desc">1ã¤ã®ã‚¯ã‚¤ã‚ºã§æº€ç‚¹</div>
                    </div>
                    <div class="badge-item">
                        <div class="badge-icon">â­</div>
                        <div class="badge-name">ãƒˆãƒªãƒ—ãƒ«æº€ç‚¹</div>
                        <div class="badge-desc">3ã¤ã®ã‚¯ã‚¤ã‚ºã§æº€ç‚¹</div>
                    </div>
                    <div class="badge-item">
                        <div class="badge-icon">ğŸ“–</div>
                        <div class="badge-name">å‹‰å¼·å®¶</div>
                        <div class="badge-desc">ç´¯è¨ˆ200å•å›ç­”</div>
                    </div>
                    <div class="badge-item">
                        <div class="badge-icon">ğŸ’</div>
                        <div class="badge-name">ãƒãƒ¼ãƒ•æº€ç‚¹</div>
                        <div class="badge-desc">6ã¤ã®ã‚¯ã‚¤ã‚ºã§æº€ç‚¹</div>
                    </div>
                    <div class="badge-item">
                        <div class="badge-icon">ğŸ‘‘</div>
                        <div class="badge-name">ã‚¯ã‚¤ã‚ºãƒã‚¹ã‚¿ãƒ¼</div>
                        <div class="badge-desc">å…¨ã‚¯ã‚¤ã‚ºã§æº€ç‚¹</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ã‚¹ãƒãƒ›ã«ã‚¢ãƒ—ãƒªã¨ã—ã¦è¿½åŠ  -->
        <div class="section">
            <h2 class="section-title">
                <span class="section-icon">ğŸ“²</span>
                ãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã™ã‚‹æ–¹æ³•
            </h2>

            <div class="content-box">
                <p>ã“ã®ã‚¢ãƒ—ãƒªã¯ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã®<span class="highlight">ãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ </span>ã™ã‚‹ã“ã¨ã§ã€ã‚¢ãƒ—ãƒªã®ã‚ˆã†ã«ä½¿ãˆã¾ã™ã€‚</p>
            </div>

            <div class="install-section">
                <h4>ğŸ“± ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•</h4>

                <div class="device-tabs">
                    <button class="device-tab active" onclick="showDevice('iphone', this)">iPhone</button>
                    <button class="device-tab" onclick="showDevice('android', this)">Android</button>
                </div>

                <div id="iphone-content" class="device-content active">
                    <div class="install-steps">
                        <p><strong>Safari</strong>ã§ã“ã®ãƒšãƒ¼ã‚¸ã‚’é–‹ã„ã¦ã„ã‚‹å ´åˆï¼š</p>
                        <p>1. ç”»é¢ä¸‹ã®ã€Œå…±æœ‰ã€ãƒœã‚¿ãƒ³ï¼ˆâ–¡ã«â†‘ï¼‰ã‚’ã‚¿ãƒƒãƒ—</p>
                        <p>2. ã€Œãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã€ã‚’é¸æŠ</p>
                        <p>3. ã€Œè¿½åŠ ã€ã‚’ã‚¿ãƒƒãƒ—ã—ã¦å®Œäº†ï¼</p>
                    </div>
                </div>

                <div id="android-content" class="device-content">
                    <div class="install-steps">
                        <p><strong>Chrome</strong>ã§ã“ã®ãƒšãƒ¼ã‚¸ã‚’é–‹ã„ã¦ã„ã‚‹å ´åˆï¼š</p>
                        <p>1. ç”»é¢å³ä¸Šã®ã€Œï¸™ã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’ã‚¿ãƒƒãƒ—</p>
                        <p>2. ã€Œãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã€ã¾ãŸã¯ã€Œã‚¢ãƒ—ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€ã‚’é¸æŠ</p>
                        <p>3. ã€Œè¿½åŠ ã€ã‚’ã‚¿ãƒƒãƒ—ã—ã¦å®Œäº†ï¼</p>
                    </div>
                </div>
            </div>

            <div class="tip-box">
                <h4>âœ¨ ãƒ¡ãƒªãƒƒãƒˆ</h4>
                <p>ãƒ›ãƒ¼ãƒ ç”»é¢ã‹ã‚‰ç›´æ¥èµ·å‹•ã§ãã€ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒãƒ¼ãªã—ã§ãƒ•ãƒ«ã‚¹ã‚¯ãƒªãƒ¼ãƒ³è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚å°‚ç”¨ã‚¢ã‚¤ã‚³ãƒ³ã§è¦‹ã¤ã‘ã‚„ã™ããªã‚Šã¾ã™ï¼</p>
            </div>
        </div>

        <!-- ã‚ˆãã‚ã‚‹è³ªå• -->
        <div class="section">
            <h2 class="section-title">
                <span class="section-icon">â“</span>
                ã‚ˆãã‚ã‚‹è³ªå•
            </h2>

            <div class="content-box">
                <h3>Q. å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ãŒæ¶ˆãˆã¦ã—ã¾ã£ãŸ</h3>
                <p>ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒ‡ãƒ¼ã‚¿ï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ»Cookieï¼‰ã‚’å‰Šé™¤ã™ã‚‹ã¨å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã‚‚æ¶ˆãˆã¦ã—ã¾ã„ã¾ã™ã€‚å®šæœŸçš„ã«ã€Œå­¦ç¿’è¨˜éŒ²ã€â†’ã€Œè¨­å®šã€ã‹ã‚‰ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’ãŠã™ã™ã‚ã—ã¾ã™ã€‚</p>
            </div>

            <div class="content-box">
                <h3>Q. åˆ¥ã®ç«¯æœ«ã§ã‚‚ä½¿ã„ãŸã„</h3>
                <p>ã€Œå­¦ç¿’è¨˜éŒ²ã€â†’ã€Œè¨­å®šã€â†’ã€Œãƒ‡ãƒ¼ã‚¿ã‚’ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã€ã§ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã€æ–°ã—ã„ç«¯æœ«ã§ã€Œãƒ‡ãƒ¼ã‚¿ã‚’å¾©å…ƒã€ã‹ã‚‰èª­ã¿è¾¼ã‚ã¾ã™ã€‚</p>
            </div>

            <div class="content-box">
                <h3>Q. æ–‡å­—ãŒå°ã•ãã¦èª­ã¿ã«ãã„</h3>
                <p>ã€Œå­¦ç¿’è¨˜éŒ²ã€â†’ã€Œè¨­å®šã€â†’ã€Œãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã€ã§ã€Œå¤§ã€ã‚’é¸æŠã™ã‚‹ã¨ã€æ–‡å­—ãŒå¤§ããè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
            </div>

            <div class="content-box">
                <h3>Q. ä»Šæ—¥ã®å•é¡Œæ•°ã‚’å¤‰æ›´ã—ãŸã„</h3>
                <p>ã€Œå­¦ç¿’è¨˜éŒ²ã€â†’ã€Œè¨­å®šã€â†’ã€Œä»Šæ—¥ã®å•é¡Œæ•°ã€ã§3å•ãƒ»5å•ãƒ»7å•ã‹ã‚‰é¸æŠã§ãã¾ã™ã€‚</p>
            </div>
        </div>

        <div class="footer">
            <a href="index.html" class="home-link">ğŸ  ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã¸</a>
            <div class="footer-text" style="margin-top: 20px;">ãµã˜ã¿é‡ã²ã‹ã‚Šçœ¼ç§‘</div>
        </div>
    </div>

    <!-- å¾©å…ƒãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="restorePreviewModal" class="restore-modal" style="display: none;">
        <div class="restore-modal-content">
            <div id="restorePreviewContent"></div>
        </div>
    </div>

    <style>
        .restore-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.6);
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        .restore-modal-content {
            background: white;
            border-radius: 16px;
            padding: 24px;
            max-width: 340px;
            width: 100%;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }
        .restore-preview-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .restore-preview-title.success { color: #2e7d32; }
        .restore-preview-title.error { color: #c62828; }
        .restore-preview-info {
            background: #f5f5f5;
            border-radius: 10px;
            padding: 16px;
            margin-bottom: 16px;
        }
        .restore-preview-row {
            display: flex;
            justify-content: space-between;
            padding: 6px 0;
            border-bottom: 1px solid #e0e0e0;
        }
        .restore-preview-row:last-child { border-bottom: none; }
        .restore-preview-label { color: #666; }
        .restore-preview-value { font-weight: bold; color: #333; }
        .restore-warning {
            background: #fff3e0;
            color: #e65100;
            padding: 12px;
            border-radius: 8px;
            font-size: 13px;
            margin-bottom: 16px;
        }
        .restore-error-message {
            background: #ffebee;
            color: #c62828;
            padding: 16px;
            border-radius: 10px;
            margin-bottom: 16px;
            line-height: 1.6;
        }
        .restore-modal-buttons {
            display: flex;
            gap: 10px;
        }
        .restore-modal-btn {
            flex: 1;
            padding: 12px;
            border-radius: 10px;
            border: none;
            font-size: 15px;
            font-weight: bold;
            cursor: pointer;
        }
        .restore-modal-btn.primary {
            background: linear-gradient(135deg, #4caf50, #2e7d32);
            color: white;
        }
        .restore-modal-btn.secondary {
            background: #e0e0e0;
            color: #333;
        }
        .restore-modal-btn.close {
            background: #e0e0e0;
            color: #333;
        }

        /* å¾©å…ƒãƒ¢ãƒ¼ãƒ€ãƒ« ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ */
        @media (prefers-color-scheme: dark) {
            .restore-modal-content {
                background: #1a1a2e;
                color: #e0e0e0;
            }
            .restore-preview-title.success { color: #81c784; }
            .restore-preview-title.error { color: #ef5350; }
            .restore-preview-info {
                background: #2a2a3e;
            }
            .restore-preview-row {
                border-bottom-color: #3a3a4e;
            }
            .restore-preview-label { color: #a0a0b0; }
            .restore-preview-value { color: #e0e0e0; }
            .restore-warning {
                background: #3d2f20;
                color: #ffb74d;
            }
            .restore-error-message {
                background: #3d1f1f;
                color: #ef5350;
            }
            .restore-modal-btn.secondary,
            .restore-modal-btn.close {
                background: #3a3a4e;
                color: #e0e0e0;
            }
        }
    </style>

    <script src="quizzes/quiz-config.js"></script>
    <script>
        function showDevice(device, clickedTab) {
            // ã‚¿ãƒ–ã®åˆ‡ã‚Šæ›¿ãˆ
            document.querySelectorAll('.device-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            clickedTab.classList.add('active');

            // ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®åˆ‡ã‚Šæ›¿ãˆ
            document.querySelectorAll('.device-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(device + '-content').classList.add('active');
        }

        // ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—é–¢é€£ï¼ˆBACKUP_STORAGE_KEY, setLastBackupDateã¯quiz-config.jsã§å®šç¾©æ¸ˆã¿ï¼‰

        function getLastBackupDate() {
            const dateStr = localStorage.getItem(BACKUP_STORAGE_KEY);
            return dateStr ? new Date(dateStr) : null;
        }

        function formatDate(date) {
            if (!date) return 'ãªã—';
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${year}/${month}/${day}`;
        }

        function updateLastBackupDisplay() {
            const el = document.getElementById('lastBackupDate');
            if (el) {
                el.textContent = formatDate(getLastBackupDate());
            }
        }

        function downloadBackup() {
            const data = getQuizData();
            data.backupDate = new Date().toISOString();
            data.appVersion = '1.0';

            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);

            const a = document.createElement('a');
            a.href = url;
            a.download = generateBackupFileName();
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            setLastBackupDate();
            updateLastBackupDisplay();

            alert('âœ… ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãŒå®Œäº†ã—ã¾ã—ãŸï¼\nãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®‰å…¨ãªå ´æ‰€ã«ä¿ç®¡ã—ã¦ãã ã•ã„ã€‚');
        }

        // å¾©å…ƒé–‹å§‹ï¼ˆç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’è¡¨ç¤ºã—ã¦ã‹ã‚‰ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠï¼‰
        async function startRestore() {
            const proceed = await showRestoreGuideDialog();
            if (proceed) {
                document.getElementById('restoreInput').click();
            }
        }

        // å¾©å…ƒç”¨ã®ä¸€æ™‚ãƒ‡ãƒ¼ã‚¿
        let pendingRestoreData = null;

        function handleRestoreFile(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    const validation = validateBackupData(data);

                    if (validation.valid) {
                        pendingRestoreData = data;
                        showRestorePreview(data);
                    } else {
                        showRestoreError(validation.error);
                    }
                } catch (error) {
                    showRestoreError('invalid_format');
                }
            };
            reader.readAsText(file);
            event.target.value = '';
        }

        // å¾©å…ƒãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’è¡¨ç¤º
        function showRestorePreview(data) {
            const info = getBackupPreviewInfo(data);
            const modal = document.getElementById('restorePreviewModal');
            const content = document.getElementById('restorePreviewContent');

            content.innerHTML = `
                <div class="restore-preview-title success">âœ… ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèª</div>
                <div class="restore-preview-info">
                    <div class="restore-preview-row">
                        <span class="restore-preview-label">ğŸ“… ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æ—¥</span>
                        <span class="restore-preview-value">${formatBackupDate(info.backupDate)}</span>
                    </div>
                    <div class="restore-preview-row">
                        <span class="restore-preview-label">ğŸ“ ç´¯è¨ˆå›ç­”æ•°</span>
                        <span class="restore-preview-value">${info.totalAnswered}å›</span>
                    </div>
                    <div class="restore-preview-row">
                        <span class="restore-preview-label">ğŸŒ¸ æº€ç‚¹ã‚¯ã‚¤ã‚º</span>
                        <span class="restore-preview-value">${info.perfectCount}å€‹</span>
                    </div>
                    <div class="restore-preview-row">
                        <span class="restore-preview-label">ğŸ… ç²å¾—ãƒãƒƒã‚¸</span>
                        <span class="restore-preview-value">${info.badgeCount}å€‹</span>
                    </div>
                </div>
                <div class="restore-warning">âš ï¸ ç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿ã¯ä¸Šæ›¸ãã•ã‚Œã¾ã™</div>
                <div class="restore-modal-buttons">
                    <button class="restore-modal-btn secondary" onclick="closeRestoreModal()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                    <button class="restore-modal-btn primary" onclick="executeRestore()">å¾©å…ƒã™ã‚‹</button>
                </div>
            `;
            modal.style.display = 'flex';
        }

        // ã‚¨ãƒ©ãƒ¼è¡¨ç¤º
        function showRestoreError(errorType) {
            const modal = document.getElementById('restorePreviewModal');
            const content = document.getElementById('restorePreviewContent');

            let message = '';
            if (errorType === 'invalid_format') {
                message = 'ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ•ã‚¡ã‚¤ãƒ«ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚<br><br>ã€Œã²ã‹ã‚Šã‚¯ã‚¤ã‚ºãƒ‡ãƒ¼ã‚¿_ã€ã§å§‹ã¾ã‚‹JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚';
            } else if (errorType === 'no_quiz_data') {
                message = 'å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ãŒå«ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã€‚<br><br>æ­£ã—ã„ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚';
            }

            content.innerHTML = `
                <div class="restore-preview-title error">âŒ ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚ã¾ã›ã‚“</div>
                <div class="restore-error-message">${message}</div>
                <div class="restore-modal-buttons">
                    <button class="restore-modal-btn close" onclick="closeRestoreModal()">é–‰ã˜ã‚‹</button>
                </div>
            `;
            modal.style.display = 'flex';
        }

        // å¾©å…ƒå®Ÿè¡Œ
        function executeRestore() {
            if (!pendingRestoreData) return;

            delete pendingRestoreData.backupDate;
            delete pendingRestoreData.appVersion;
            saveQuizData(pendingRestoreData);
            setLastBackupDate();

            closeRestoreModal();
            alert('âœ… ãƒ‡ãƒ¼ã‚¿ã‚’å¾©å…ƒã—ã¾ã—ãŸï¼\nãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã—ã¾ã™ã€‚');
            location.reload();
        }

        // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
        function closeRestoreModal() {
            document.getElementById('restorePreviewModal').style.display = 'none';
            pendingRestoreData = null;
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚
        updateLastBackupDisplay();
    </script>
</body>
</html>
