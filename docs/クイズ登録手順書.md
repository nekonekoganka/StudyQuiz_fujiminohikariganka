# クイズ登録手順書

別AIから受け取ったJSONを、実際に動くクイズとして登録する手順です。

---

## 全体の流れ

```
1. JSONを受け取る
2. HTMLファイルを作成（テンプレートを使用）
3. quiz-config.js にクイズ情報を追加
4. index.html にカードを追加
5. 動作確認
6. コミット・プッシュ
```

---

## Step 1: JSONを受け取る

別AIから以下のようなJSONを受け取ります：

```json
{
  "quizTitle": "流涙症クイズ",
  "quizSubtitle": "眼科スタッフ向け - 流涙症の理解を深めよう",
  "quizIcon": "💧",
  "quizId": "ruiruisho",
  "totalQuestions": 10,
  "questions": [...]
}
```

---

## Step 2: HTMLファイルを作成

### 2-1. テンプレートをコピー

```bash
cp docs/クイズテンプレート.html quizzes/[ファイル名].html
```

例：
```bash
cp docs/クイズテンプレート.html quizzes/流涙症クイズ.html
```

### 2-2. 置換する項目

テンプレート内の【】で囲まれた部分を置換します：

| 置換前 | 置換後（例） |
|--------|-------------|
| `【タイトル】` | `流涙症` |
| `【アイコン】` | `💧` |
| `【サブタイトル】` | `流涙症の理解を深めよう` |
| `【問題数】` | `10` |
| `【クイズID】` | `ruiruisho` |

### 2-3. 問題を挿入

各問題カードを以下の形式で挿入します：

```html
<!-- ========== 問題1 ========== -->
<div class="question-card" id="question1">
    <div class="question-number">問題 1</div>
    <div class="question-text">問題文をここに</div>
    <div class="options">
        <div class="option" data-answer="true">正解の選択肢</div>
        <div class="option" data-answer="false">不正解A</div>
        <div class="option" data-answer="false">不正解B</div>
        <div class="option" data-answer="false">不正解C</div>
    </div>
    <div class="feedback"></div>
    <div class="explanation hidden">
        <strong>解説：</strong>解説文をここに
        <!-- スタッフポイントがある場合 -->
        <div class="staff-point">
            <strong>患者様への説明ポイント：</strong>スタッフポイントをここに
        </div>
    </div>
</div>
```

**注意点：**
- 問題1は `class="question-card"`
- 問題2以降は `class="question-card hidden"`
- `data-answer="true"` は正解の選択肢のみ

### 2-4. ALL_QUIZZES配列を更新

HTMLファイル内のJavaScriptにある `ALL_QUIZZES` 配列に新しいファイル名を追加：

```javascript
const ALL_QUIZZES = [
    'コンタクト処方の基本クイズ.html',
    // ... 既存のクイズ
    '流涙症クイズ.html'  // ← 追加
];
```

---

## Step 3: quiz-config.js を更新

`quizzes/quiz-config.js` の `QUIZ_LIST` 配列に追加：

```javascript
// === 疾患系 === の中に追加
{
    id: 'ruiruisho',
    name: '流涙症クイズ',
    file: '流涙症クイズ.html',
    totalQuestions: 10,
    icon: '💧',
    category: 'staff',
    description: '流涙症の原因や治療法についての知識を確認できます',
    color: 'cyan'  // カラーテーマ一覧.md を参照
},
```

---

## Step 4: index.html を更新

トップページにクイズカードを追加します。

### 4-1. 追加する場所を決める

カテゴリに応じて適切な `<div class="quiz-list">` 内に追加：
- メガネ・コンタクト系
- 眼の疾患 ← 流涙症はここ
- 院内ルール・検診

### 4-2. カードのHTML

```html
<a href="quizzes/流涙症クイズ.html" class="quiz-card cyan" data-quiz-id="ruiruisho">
    <div class="quiz-icon">💧</div>
    <div class="quiz-content">
        <div class="quiz-title">流涙症クイズ</div>
        <div class="quiz-description">流涙症の原因や治療法についての知識を確認できます</div>
        <div class="quiz-meta">
            <span class="quiz-tag tag-staff">スタッフ向け</span>
            <span class="quiz-count">全10問</span>
        </div>
    </div>
    <span class="arrow">→</span>
</a>
```

### 4-3. RANDOM_QUIZ_LIST を更新（任意）

index.html内のJavaScriptにある `RANDOM_QUIZ_LIST` に追加すると、
「今日の3問」ボタンでランダム選択されるようになります：

```javascript
const RANDOM_QUIZ_LIST = [
    // ... 既存のクイズ
    { name: '流涙症クイズ', file: '流涙症クイズ.html', icon: '💧' }
];
```

---

## Step 5: 動作確認

### 5-1. ローカルで確認

ブラウザでファイルを開いて確認：

1. **トップページ** - カードが表示されるか
2. **クイズページ** - モード選択画面が表示されるか
3. **今日の3問** - クイズが開始されるか
4. **全問モード** - 全問が順番に出題されるか
5. **結果画面** - スコアが正しく表示されるか
6. **マイページ** - 進捗が記録されるか

### 5-2. チェックリスト

- [ ] クイズIDが他と重複していない
- [ ] 問題数がTOTAL_QUESTIONSと一致
- [ ] 全ての問題に正解が1つだけある
- [ ] 解説が全問題にある
- [ ] カラーテーマが適切

---

## Step 6: コミット・プッシュ

```bash
# 変更をステージング
git add quizzes/流涙症クイズ.html
git add quizzes/quiz-config.js
git add index.html

# コミット
git commit -m "流涙症クイズを追加（全10問）"

# プッシュ
git push
```

---

## トラブルシューティング

### クイズが表示されない

1. HTMLファイルのパスが正しいか確認
2. quiz-config.js のファイル名が一致しているか確認
3. ブラウザのコンソールでエラーを確認

### 進捗が保存されない

1. QUIZ_ID が quiz-config.js の id と一致しているか確認
2. LocalStorage がブロックされていないか確認

### 選択肢が表示されない

1. `data-answer` 属性が正しく設定されているか確認
2. `<div class="options">` の閉じタグがあるか確認

### 結果画面のボタンが動かない

1. ALL_QUIZZES 配列にファイル名が追加されているか確認
2. ファイル名の文字化けがないか確認

---

## ファイル一覧

クイズ追加時に編集が必要なファイル：

| ファイル | 編集内容 |
|---------|---------|
| `quizzes/[新クイズ].html` | 新規作成 |
| `quizzes/quiz-config.js` | QUIZ_LIST に追加 |
| `index.html` | カード追加、RANDOM_QUIZ_LIST追加 |

---

## Claude（私）に依頼する場合

JSONを貼り付けて以下のように依頼してください：

```
このJSONから流涙症クイズを作成して、
quiz-config.jsとindex.htmlも更新してください。
カテゴリは「眼の疾患」でお願いします。

[JSONを貼り付け]
```

私が全ての作業を行います。
