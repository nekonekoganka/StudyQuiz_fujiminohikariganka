<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç·‘å†…éšœæ¤œè¨ºã‚¯ã‚¤ã‚º - å—ä»˜ã‚¹ã‚¿ãƒƒãƒ•å‘ã‘</title>
    <style>
        * {
            box-sizing: border-box;
        }
        body {
            font-family: 'Noto Sans JP', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .quiz-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            .quiz-container {
                padding: 20px;
            }
        }
        
        h1 {
            text-align: center;
            color: #4a5568;
            font-size: 28px;
            margin-bottom: 4px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 24px;
            }
        }
        
        .subtitle {
            text-align: center;
            color: #718096;
            font-size: 16px;
            margin-bottom: 15px;
        }
        
        @media (max-width: 768px) {
            .subtitle {
                font-size: 16px;
            }
        }
        
        .mode-selection {
            text-align: center;
            margin: 40px 0;
        }
        
        .mode-button {
            display: block;
            width: 80%;
            max-width: 400px;
            margin: 15px auto;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 20px 40px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }
        
        .mode-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }
        
        @media (max-width: 768px) {
            .mode-button {
                width: 90%;
                padding: 15px 30px;
                font-size: 16px;
                margin: 12px auto;
            }
        }
        
        .mode-description {
            font-size: 14px;
            color: #4a5568;
            margin-top: 20px;
            line-height: 1.5;
        }

        /* å­¦ç¿’çŠ¶æ³è¡¨ç¤º */
        .progress-status {
            margin: 25px 0 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            font-size: 14px;
            color: #555;
        }

        .progress-status-item {
            display: flex;
            justify-content: space-between;
            margin: 5px 0;
        }

        .progress-status-item span:last-child {
            font-weight: bold;
        }

        /* ã‚¯ã‚¤ã‚ºä¸­ã‚¿ã‚¤ãƒˆãƒ«è¡¨ç¤º */
        .quiz-title-header {
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            color: #4a5568;
            padding: 10px;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 10px;
        }

        .question-card {
            background: #f8fafc;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 6px solid #667eea;
            box-shadow: 0 3px 15px rgba(0,0,0,0.08);
            border: 1px solid #e2e8f0;
            display: flex;
            flex-wrap: wrap;
            align-items: baseline;
        }
        
        .question-number {
            font-weight: bold;
            color: #667eea;
            font-size: 19px;
            margin-bottom: 20px;
            margin-right: 0.75em;
        }
        
        .question-text {
            font-size: 22px;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 20px;
            line-height: 1.5;
            flex-grow: 1;
        }
        
        .options, .feedback, .explanation {
            width: 100%;
        }

        @media (max-width: 768px) {
            .question-card {
                padding: 20px;
                display: block;
            }
            .question-number {
                margin-bottom: 12px;
            }
            .question-text {
                font-size: 20px;
            }
        }
        
        .options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 15px;
        }
        
        @media (max-width: 768px) {
            .options {
                grid-template-columns: 1fr;
                gap: 12px;
            }
        }
        
        .option {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 18px;
            font-weight: 500;
            text-align: center;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1.4;
        }
        
        @media (max-width: 768px) {
            .option {
                padding: 15px;
                font-size: 16px;
                min-height: 60px;
            }
        }
        
        .option:hover {
            border-color: #667eea;
            background: #ebf4ff;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.25);
        }
        .option.correct {
            border-color: #48bb78;
            background: #f0fff4;
            cursor: default;
            transform: none;
            box-shadow: 0 4px 15px rgba(72, 187, 120, 0.3);
        }
        .option.incorrect {
            border-color: #f56565;
            background: #fff5f5;
            cursor: default;
            transform: none;
            box-shadow: 0 4px 15px rgba(245, 101, 101, 0.3);
        }
        .option.disabled {
            cursor: default;
            opacity: 0.7;
        }
        .option.disabled:hover {
            transform: none;
            box-shadow: none;
        }
        .next-button, .reset-button, .home-button, .result-button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 35px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            margin: 10px 10px;
            transition: all 0.3s ease;
        }
        
        @media (max-width: 768px) {
            .next-button, .reset-button, .home-button, .result-button {
                padding: 12px 25px;
                font-size: 16px;
                margin: 10px 5px;
            }
        }
        
        .next-button:hover, .reset-button:hover, .home-button:hover, .result-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }
        .feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 18px;
            display: none;
            text-align: center;
        }
        .feedback.correct {
            background: #f0fff4;
            color: #38a169;
            border: 2px solid #48bb78;
        }
        .feedback.incorrect {
            background: #fff5f5;
            color: #e53e3e;
            border: 2px solid #f56565;
        }
        
        .quiz-status {
            display: flex;
            align-items: center;
            gap: 25px;
            margin-bottom: 20px;
        }

        .score {
            text-align: center;
            font-size: 22px;
            font-weight: bold;
            color: #4a5568;
            margin: 0;
            padding: 12px;
            background: #f7fafc;
            border-radius: 10px;
            border: 2px solid #e2e8f0;
            flex-shrink: 0;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            margin: 0;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }
        
        @media (max-width: 768px) {
            .quiz-status {
                flex-direction: column;
                gap: 12px;
            }
            .score {
                font-size: 20px;
                padding: 10px;
                width: 100%;
            }
        }

        .hidden {
            display: none;
        }
        .buttons {
            text-align: center;
            margin-top: 20px;
        }
        .explanation {
            background: #e6fffa;
            border-left: 5px solid #38b2ac;
            padding: 15px;
            margin-top: 15px;
            border-radius: 8px;
            font-size: 18px;
            line-height: 1.5;
        }
        
        @media (max-width: 768px) {
            .explanation {
                padding: 15px;
                font-size: 16px;
            }
        }
        
        .important-note {
            background: #fef5e7;
            border: 2px solid #f6ad55;
            border-radius: 8px;
            padding: 12px;
            margin-top: 12px;
            font-size: 18px;
            color: #744210;
            line-height: 1.4;
        }
        
        @media (max-width: 768px) {
            .important-note {
                padding: 12px;
                font-size: 16px;
            }
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            transition: width 0.5s ease;
            border-radius: 4px;
        }
        
        .clinic-note {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 8px;
            padding: 12px;
            margin-top: 12px;
            font-size: 18px;
            color: #856404;
            line-height: 1.4;
            font-weight: 600;
        }

        .final-score-card{
            background:#f8fafc;
            border:2px solid #667eea;
            border-radius:15px;
            padding:30px;
            margin-top:30px;
            text-align:center;
            box-shadow:0 3px 15px rgba(0,0,0,.08)
        }
        .result-title {
            font-size:32px;
            font-weight:700;
            color:#4a5568;
            margin-bottom:20px
        }

        .result-detail{
            font-size: 20px;
            line-height: 1.8;
            color: #2d3748;
        }

        .result-evaluation {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 25px;
        }

        .final-score-highlight {
            color: #dc2626; /* ã‚¹ã‚³ã‚¢ã¯èµ¤è‰²ã§çµ±ä¸€ */
            font-weight: bold;
            font-size: 1.5em;
            display: block;
            margin-bottom: 25px;
        }

        @media (max-width: 768px) {
            .result-title {font-size:28px}
            .result-detail{font-size:18px;line-height:1.7}
            .result-evaluation {font-size: 22px;}
        }

        .top-link {
            display: block;
            text-align: center;
            margin-bottom: 20px;
        }

        .top-link a {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            text-decoration: none;
            font-size: 16px;
            font-weight: bold;
            padding: 12px 24px;
            border-radius: 25px;
            display: inline-block;
            transition: all 0.3s ease;
        }

        .top-link a:active {
            transform: scale(0.97);
        }

        @media (min-width: 768px) {
            .top-link a:hover {
                transform: translateY(-2px);
                box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
            }
        }

        .mypage-button, .top-button {
            display: inline-block;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            text-decoration: none;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            margin: 5px;
        }

        .mypage-button {
            background: linear-gradient(135deg, #26a69a, #00897b);
            color: white;
        }

        .top-button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        /* æ­£è§£ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ */
        .celebrate-emoji {
            position: fixed;
            font-size: 40px;
            pointer-events: none;
            z-index: 9999;
            animation: celebrate 1s ease-out forwards;
        }

        @keyframes celebrate {
            0% {
                opacity: 1;
                transform: translateY(0) scale(0.5) rotate(0deg);
            }
            50% {
                opacity: 1;
                transform: translateY(-60px) scale(1.2) rotate(15deg);
            }
            100% {
                opacity: 0;
                transform: translateY(-120px) scale(0.8) rotate(-10deg);
            }
        }

        .correct-flash {
            animation: flashGreen 0.4s ease-out;
        }

        @keyframes flashGreen {
            0% { box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.7); }
            50% { box-shadow: 0 0 20px 10px rgba(76, 175, 80, 0.4); }
            100% { box-shadow: 0 0 0 0 rgba(76, 175, 80, 0); }
        }

    </style>
</head>
<body>
    <div class="quiz-container">
        <h1>ğŸ¥ ç·‘å†…éšœæ¤œè¨ºã‚¯ã‚¤ã‚º ğŸ¥</h1>
        <div class="subtitle">çœ¼ç§‘å—ä»˜ã‚¹ã‚¿ãƒƒãƒ•å‘ã‘ - åˆ¶åº¦ç†è§£åº¦ãƒã‚§ãƒƒã‚¯</div>
        <div class="top-link"><a href="../index.html">â† ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã¸</a></div>

        <div id="quizTitleHeader" class="quiz-title-header hidden">ğŸ¥ ç·‘å†…éšœæ¤œè¨ºã‚¯ã‚¤ã‚º</div>

        <div id="modeSelection" class="mode-selection">
            <button class="mode-button" onclick="startQuiz('daily3')">
                ğŸ“‹ ä»Šæ—¥ã®3å•
            </button>
            <button class="mode-button" onclick="startQuiz('full')">
                ğŸ“š å…¨å•ãƒ¢ãƒ¼ãƒ‰ï¼ˆå…¨14å•ï¼‰
            </button>

            <div id="progressStatus" class="progress-status">
                <div class="progress-status-item">
                    <span>âŒ é–“é•ãˆãŸå•é¡Œ:</span>
                    <span id="incorrectCount">0å•</span>
                </div>
                <div class="progress-status-item">
                    <span>ğŸ†• æœªæŒ‘æˆ¦ã®å•é¡Œ:</span>
                    <span id="unansweredCount">14å•</span>
                </div>
                <div class="progress-status-item">
                    <span>âœ… æ­£è§£ã—ãŸå•é¡Œ:</span>
                    <span id="correctCount">0å•</span>
                </div>
                <div class="progress-status-item">
                    <span>ğŸ“Š å…¨å•é¡Œæ•°:</span>
                    <span id="totalQuestionsCount">14å•</span>
                </div>
            </div>

            <div class="mode-description">
                <strong>ä»Šæ—¥ã®3å•:</strong> é–“é•ã„ãƒ»æœªæŒ‘æˆ¦ã‚’å„ªå…ˆå‡ºé¡Œ<br>
                <strong>å…¨å•ãƒ¢ãƒ¼ãƒ‰:</strong> å…¨14å•ã‚’é †ç•ªã«å‡ºé¡Œ
            </div>
        </div>
        
        <div id="quizArea" class="hidden">
            <div class="quiz-status">
                <div class="score">ã‚¹ã‚³ã‚¢: <span id="score">0</span> / <span id="total">14</span></div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressBar"></div>
                </div>
            </div>
            
            <div class="question-card" id="question1">
                <div class="question-number">å•é¡Œ 1</div>
                <div class="question-text">ã“ã®ç·‘å†…éšœæ¤œè¨ºã‚’ å—è¨ºã§ããªã„è‡ªæ²»ä½“ã¯ ã©ã‚Œã§ã—ã‚‡ã†ã‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="false">ãµã˜ã¿é‡å¸‚</div>
                    <div class="option" data-answer="false">å¯Œå£«è¦‹å¸‚</div>
                    <div class="option" data-answer="true">å·è¶Šå¸‚</div>
                    <div class="option" data-answer="false">ä¸‰èŠ³ç”º</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>ç·‘å†…éšœæ¤œè¨ºã¯ã€Œãµã˜ã¿é‡å¸‚ã€å¯Œå£«è¦‹å¸‚ã€ä¸‰èŠ³ç”ºã®å®Ÿæ–½åŒ»ç™‚æ©Ÿé–¢ã§å—è¨ºã§ãã¾ã™ã€ã¨è¨˜è¼‰ã•ã‚Œã¦ãŠã‚Šã€å·è¶Šå¸‚ã¯å«ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã€‚
                </div>
            </div>

            <div class="question-card hidden" id="question2">
                <div class="question-number">å•é¡Œ 2</div>
                <div class="question-text">ä»¤å’Œ7å¹´åº¦ã®ç·‘å†…éšœæ¤œè¨ºå¯¾è±¡è€…ã¯ã©ã‚Œã§ã—ã‚‡ã†ã‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="false">ä»¤å’Œ7å¹´ä¸­ã« 46æ­³ã¨ 56æ­³ã« ãªã‚‹æ–¹</div>
                    <div class="option" data-answer="true">ä»¤å’Œ7å¹´åº¦å†…ã« 46æ­³ã¨ 56æ­³ã« ãªã‚‹æ–¹</div>
                    <div class="option" data-answer="false">ä»¤å’Œ7å¹´åº¦å†…ã« 45æ­³ã¨ 55æ­³ã« ãªã‚‹æ–¹</div>
                    <div class="option" data-answer="false">ä»¤å’Œ7å¹´ä¸­ã« 45æ­³ã¨ 55æ­³ã« ãªã‚‹æ–¹</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>å¯¾è±¡è€…ã¯ã€Œä»¤å’Œ7å¹´åº¦ä¸­ã«46æ­³ã€56æ­³ã«ãªã‚‹æ–¹ã€ã¨æ˜è¨˜ã•ã‚Œã¦ã„ã¾ã™ã€‚ã€Œä»¤å’Œ7å¹´ä¸­ã€ã§ã¯ãªãã€Œä»¤å’Œ7å¹´åº¦å†…ã«ã€ãŒæ­£ã—ã„è¡¨ç¾ã§ã™ã€‚
                    <div class="important-note">
                        <strong>å—ä»˜ã§ã®ç¢ºèªãƒã‚¤ãƒ³ãƒˆï¼š</strong><br>
                        ãƒ»ã€Œå¹´åº¦ã€ã¨ã€Œå¹´ä¸­ã€ã®é•ã„ã‚’æ­£ã—ãç†è§£ã™ã‚‹ã“ã¨ãŒé‡è¦<br>
                        ãƒ»46æ­³ï¼šæ˜­å’Œ54å¹´ 4æœˆ2æ—¥ ã€œ æ˜­å’Œ55å¹´ 4æœˆ1æ—¥ ç”Ÿã¾ã‚Œ<br>
                        ãƒ»56æ­³ï¼šæ˜­å’Œ44å¹´ 4æœˆ2æ—¥ ã€œ æ˜­å’Œ45å¹´ 4æœˆ1æ—¥ ç”Ÿã¾ã‚Œ
                    </div>
                </div>
            </div>

            <div class="question-card hidden" id="question3">
                <div class="question-number">å•é¡Œ 3</div>
                <div class="question-text">å—è¨ºæ™‚ã«å¿…è¦ãªæŒã¡ç‰©ã§ã€ãƒã‚¤ãƒŠä¿é™ºè¨¼ã‚’ æŒå‚ã•ã‚Œãªã„å ´åˆã« å¿…è¦ãªã‚‚ã®ã¯ ã©ã‚Œã§ã™ã‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="false">å¥åº·ä¿é™ºè¨¼ã®ã¿</div>
                    <div class="option" data-answer="true">è³‡æ ¼ç¢ºèªæ›¸ ã¨ ä½æ‰€ãŒç¢ºèªã§ãã‚‹ã‚‚ã®</div>
                    <div class="option" data-answer="false">é‹è»¢å…è¨±è¨¼ã®ã¿</div>
                    <div class="option" data-answer="false">ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰ã® ç´™ã®ã‚³ãƒ”ãƒ¼</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>å¿…è¦ãªæŒã¡ç‰©ã¯ã€Œãƒã‚¤ãƒŠä¿é™ºè¨¼ã€ã¾ãŸã¯ã€Œè³‡æ ¼ç¢ºèªæ›¸ ã¨ ä½æ‰€ãŒç¢ºèªã§ãã‚‹ã‚‚ã®ã€ã§ã™ã€‚
                    <div class="important-note">
                        <strong>å—ä»˜ã§ã®ç¢ºèªï¼š</strong>ãƒã‚¤ãƒŠä¿é™ºè¨¼ã‚’ æŒå‚ã•ã‚Œãªã„å ´åˆã¯ã€è³‡æ ¼ç¢ºèªæ›¸ã¨ ä½æ‰€ç¢ºèªæ›¸é¡ã® ä¸¡æ–¹ãŒ å¿…è¦ã§ã™ã€‚ã©ã¡ã‚‰ã‹ ä¸€æ–¹ã ã‘ã§ã¯ ä¸ååˆ†ãªã“ã¨ã‚’ æ‚£è€…ã•ã‚“ã« ãŠä¼ãˆã—ã¾ã—ã‚‡ã†ã€‚
                    </div>
                </div>
            </div>

            <div class="question-card hidden" id="question4">
                <div class="question-number">å•é¡Œ 4</div>
                <div class="question-text">ç·‘å†…éšœæ¤œè¨ºã® äºˆç´„ã‚’ã—ãŸã„ã¨ è¨€ã‚ã‚Œã¾ã—ãŸã€‚å½“é™¢ã§ æ¡ˆå†…ã™ã‚‹æ–¹æ³•ã¯ ã©ã‚Œã§ã™ã‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="false">ğŸ’çª“å£ã§ã® ç›´æ¥äºˆç´„</div>
                    <div class="option" data-answer="false">â˜é›»è©±ã§ã® äºˆç´„</div>
                    <div class="option" data-answer="false">ğŸ“¶ãƒãƒƒãƒˆã§ã®ã€Œä¸€èˆ¬ã€äºˆç´„</div>
                    <div class="option" data-answer="true">ğŸ“¶ãƒãƒƒãƒˆã§ã®ã€Œè¦–é‡ã€äºˆç´„</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>ç·‘å†…éšœæ¤œè¨ºã®ã”äºˆç´„ã¯ã€Œãƒãƒƒãƒˆã§ã®è¦–é‡äºˆç´„ã€ã§ã™ã€‚
                    <div class="important-note">
                        <strong>å—ä»˜ã§ã®æ¡ˆå†…ï¼š</strong>ç·‘å†…éšœæ¤œè¨ºã¯ã€Œè¦–é‡äºˆç´„ã€æ ã§ã™ã€‚çª“å£ã§ã®ç›´æ¥äºˆç´„ã€é›»è©±äºˆç´„ã€ä¸€èˆ¬äºˆç´„ã§ã¯å—ã‘ä»˜ã‘ã¦ã¾ã›ã‚“ã€‚å¿…ãšã€Œãƒãƒƒãƒˆã§ã®è¦–é‡äºˆç´„ã€ã‚’ã”åˆ©ç”¨ã„ãŸã ãã‚ˆã†ã”æ¡ˆå†…ã—ã¦ãã ã•ã„ã€‚
                    </div>
                </div>
            </div>

            <div class="question-card hidden" id="question5">
                <div class="question-number">å•é¡Œ 5</div>
                <div class="question-text">ç·‘å†…éšœæ¤œè¨ºã‚’ äºˆç´„ãªã—ã§ å½“æ—¥å—è¨ºã—ãŸã„ã¨ è¨€ã‚ã‚Œã¾ã—ãŸã€‚å½“é™¢ã§ã® é©åˆ‡ãªå¯¾å¿œã¯ ã©ã‚Œã§ã—ã‚‡ã†ã‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="false">ã„ã‹ãªã‚‹å ´åˆã‚‚ã€å½“æ—¥ã¯ä¸å¯</div>
                    <div class="option" data-answer="true">è¦–é‡äºˆç´„æ ãŒ ç©ºã„ã¦ã„ã‚Œã°æ¡ˆå†…ã™ã‚‹ã€‚ãªã‘ã‚Œã°ã€å¾Œæ—¥ã®ãƒãƒƒãƒˆäºˆç´„ã‚’æ¡ˆå†…ã™ã‚‹ã€‚</div>
                    <div class="option" data-answer="false">å…ˆç€é †ã§ å—ã‘ä»˜ã‘ã‚‹</div>
                    <div class="option" data-answer="false">ä¿å¥ã‚»ãƒ³ã‚¿ãƒ¼ã« ç¢ºèªã—ã¦ã‹ã‚‰ åˆ¤æ–­</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>ã€Œè¦–é‡äºˆç´„ã€ã®ç©ºããŒæœ‰ã‚Œã°ãã®ã¾ã¾æ¡ˆå†…ã—ã¦ãã ã•ã„ã€‚ç„¡ã‘ã‚Œã°ã€å¾Œæ—¥å—è¨ºã‚’å‹§ã‚ã¦ä¸‹ã•ã„ã€‚
                    <div class="important-note">
                        <strong>å—ä»˜ã§ã®å¯¾å¿œï¼š</strong>ç·‘å†…éšœæ¤œè¨ºã¯ ãƒãƒƒãƒˆã®äºˆç´„åˆ¶ã§ã™ã€‚æ ã®ç©ºããŒç„¡ã‘ã‚Œã° äºˆç´„ãªã—ã§ã®å—è¨ºã¯ã§ããªã„ã“ã¨ã‚’ ãŠä¼ãˆã—ã€äºˆç´„ã‚’ ãŠå–ã‚Šã—ã¦ã‹ã‚‰ã®å—è¨ºã‚’ ã”æ¡ˆå†…ã—ã¦ãã ã•ã„ã€‚
                    </div>
                </div>
            </div>

            <div class="question-card hidden" id="question6">
                <div class="question-number">å•é¡Œ 6</div>
                <div class="question-text">ç·‘å†…éšœæ¤œè¨ºã® å®Ÿæ–½æœŸé–“ã¯ ã„ã¤ã‹ã‚‰ ã„ã¤ã¾ã§ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="false">5æœˆ 1æ—¥ ã€œ 10æœˆ 31æ—¥</div>
                    <div class="option" data-answer="true">6æœˆ 1æ—¥ ã€œ 11æœˆ 30æ—¥</div>
                    <div class="option" data-answer="false">7æœˆ 1æ—¥ ã€œ 12æœˆ 31æ—¥</div>
                    <div class="option" data-answer="false">4æœˆ 1æ—¥ ã€œ 9æœˆ 30æ—¥</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>å®Ÿæ–½æœŸé–“ã¯ã€Œ6æœˆ1æ—¥ã‹ã‚‰11æœˆ30æ—¥ã¾ã§ã€ã§ã™ã€‚
                    <div class="important-note">
                        <strong>å—ä»˜ã§ã®å¯¾å¿œï¼š</strong>æœŸé–“å¤–ã«æ¥é™¢ã•ã‚ŒãŸæ–¹ã«ã¯ã€æ¤œè¨ºãƒã‚¬ã‚­ãŒåˆ©ç”¨ã§ããªã„ã“ã¨ã‚’ ä¼ãˆã¦ãã ã•ã„ã€‚
                    </div>
                </div>
            </div>

            <div class="question-card hidden" id="question7">
                <div class="question-number">å•é¡Œ 7</div>
                <div class="question-text">ç·‘å†…éšœæ¤œè¨ºã® è‡ªå·±è² æ‹…é‡‘ã¯ ã„ãã‚‰ã§ã—ã‚‡ã†ã‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="false">500å††</div>
                    <div class="option" data-answer="true">1,000å††</div>
                    <div class="option" data-answer="false">1,500å††</div>
                    <div class="option" data-answer="false">ç„¡æ–™</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>è‡ªå·±è² æ‹…é‡‘ã¯ ğŸ’´1,000å††ã§ã™ã€‚
                    <div class="important-note">
                        <strong>æ³¨æ„ï¼š</strong>ç”Ÿæ´»ä¿è­·ã®æ–¹ã¯ã€å½“é™¢ã§ã¯ç”Ÿæ´»ä¿è­·ã®æ–¹ã®æ¤œè¨ºã¯å®Ÿæ–½ã§ãã¾ã›ã‚“ã€‚
                    </div>
                </div>
            </div>

            <div class="question-card hidden" id="question8">
                <div class="question-number">å•é¡Œ 8</div>
                <div class="question-text">ç”Ÿæ´»ä¿è­·ã®æ–¹ãŒ å½“é™¢ã§ã®ç·‘å†…éšœæ¤œè¨ºã‚’ å¸Œæœ›ã•ã‚ŒãŸå ´åˆã®å¯¾å¿œã§ æ­£ã—ã„ã®ã¯ ã©ã‚Œã§ã—ã‚‡ã†ã‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="false">ç„¡æ–™ã§æ¤œè¨ºã‚’å®Ÿæ–½ã™ã‚‹</div>
                    <div class="option" data-answer="true">å½“é™¢ã§ã¯å®Ÿæ–½ã§ããªã„ã“ã¨ã‚’ãŠä¼ãˆã™ã‚‹</div>
                    <div class="option" data-answer="false">è‡ªè²»ã§1,000å††ãŠæ”¯æ‰•ã„ã„ãŸã ã</div>
                    <div class="option" data-answer="false">ä¿å¥ã‚»ãƒ³ã‚¿ãƒ¼ã«ç¢ºèªã—ã¦ã‹ã‚‰åˆ¤æ–­ã™ã‚‹</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>å½“é™¢ã¯ **ç”Ÿæ´»ä¿è­·æŒ‡å®šåŒ»ç™‚æ©Ÿé–¢ ã§ã¯ãªã„** ãŸã‚ã€ç”Ÿæ´»ä¿è­·ã‚’å—çµ¦ã•ã‚Œã¦ã„ã‚‹æ–¹ã®æ¤œè¨ºã¯å®Ÿæ–½ã§ãã¾ã›ã‚“ã€‚
                    <div class="clinic-note">
                        <strong>å½“é™¢ã§ã®é‡è¦ãªå¯¾å¿œï¼š</strong>ç”Ÿæ´»ä¿è­·ã‚’å—çµ¦ã•ã‚Œã¦ã„ã‚‹æ–¹ã«ã¯ã€å½“é™¢ã§ã¯æ¤œè¨ºã‚’å®Ÿæ–½ã§ããªã„æ—¨ã‚’ãŠä¼ãˆã—ã€ç”Ÿæ´»ä¿è­·æŒ‡å®šåŒ»ç™‚æ©Ÿé–¢ã§ã®å—è¨ºï¼ˆã‚ãã¿çœ¼ç§‘ãƒ»é«˜æ©‹çœ¼ç§‘ ãªã©ï¼‰ã‚’ã”æ¡ˆå†…ã—ã¦ãã ã•ã„ã€‚
                    </div>
                </div>
            </div>

            <div class="question-card hidden" id="question9">
                <div class="question-number">å•é¡Œ 9</div>
                <div class="question-text">å—è¨ºåˆ¸ï¼ˆã¯ãŒãï¼‰ã¯ã„ã¤ç™ºé€ã•ã‚Œã‚‹ã§ã—ã‚‡ã†ã‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="false">4æœˆ</div>
                    <div class="option" data-answer="true">5æœˆ</div>
                    <div class="option" data-answer="false">6æœˆ</div>
                    <div class="option" data-answer="false">3æœˆ</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>å¯¾è±¡è€…ã«ã¯ è‡ªæ²»ä½“ã‚ˆã‚Š 5æœˆã«å—è¨ºåˆ¸ï¼ˆã¯ãŒãï¼‰ãŒ ç™ºé€ã•ã‚Œã¾ã™ã€‚
                    <div class="important-note">
                        <strong>å—ä»˜ã§ã®å¯¾å¿œï¼š</strong>5æœˆã‚ˆã‚Šå‰ã«å•ã„åˆã‚ã›ãŒã‚ã£ãŸå ´åˆã¯ã€5æœˆç™ºé€äºˆå®šã¨ãŠä¼ãˆãã ã•ã„ã€‚å—è¨ºåˆ¸ã‚’ç´›å¤±ã•ã‚ŒãŸæ–¹ã¯ã€ãŠä½ã„ã®è‡ªæ²»ä½“ã¸ã®å•ã„åˆã‚ã›ã‚’ å‹§ã‚ã¦ä¸‹ã•ã„ã€‚
                    </div>
                </div>
            </div>

            <div class="question-card hidden" id="question10">
                <div class="question-number">å•é¡Œ 10</div>
                <div class="question-text">æ¤œè¨ºã« å«ã¾ã‚Œã¦ã„ãªã„ æ¤œæŸ»ã¯ ã©ã‚Œã§ã—ã‚‡ã†ã‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="false">è¦–é‡ æ¤œæŸ»</div>
                    <div class="option" data-answer="false">çœ¼åœ§ æ¤œæŸ»</div>
                    <div class="option" data-answer="true">çœ¼ä½ æ¤œæŸ»</div>
                    <div class="option" data-answer="false">çœ¼åº•ä¸‰æ¬¡å…ƒç”»åƒ æ¤œæŸ»</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>æ¤œè¨ºå†…å®¹ã«ã¯ã€ŒçŸ¯æ­£è¦–åŠ›ãƒ»ã‚¹ãƒªãƒƒãƒˆæ¤œæŸ»ãƒ»éš…è§’æ¤œæŸ»ãƒ»çœ¼åœ§æ¤œæŸ»ãƒ»ç²¾å¯†çœ¼åº•æ¤œæŸ»ãƒ»è¦–é‡æ¤œæŸ»ãƒ»OCTï¼ˆçœ¼åº•ä¸‰æ¬¡å…ƒç”»åƒï¼‰æ¤œæŸ»ã€ãŒå«ã¾ã‚Œã¦ãŠã‚Šã€çœ¼ä½æ¤œæŸ»ã¯å«ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã€‚
                    <div class="important-note">
                        <strong>å—ä»˜ã§ã®èª¬æ˜ï¼š</strong>æ¤œè¨ºã«ã¯ã€çœ¼ä½ãƒ»ç«‹ä½“è¦–ãƒ»ãƒ•ãƒªãƒƒã‚«ãƒ¼æ¤œæŸ»ã¯å«ã¾ã‚Œã¦ã„ãªã„ã“ã¨ã€è¦šãˆã¦ãŠãã¾ã—ã‚‡ã†ã€‚
                    </div>
                </div>
            </div>

            <div class="question-card hidden" id="question11">
                <div class="question-number">å•é¡Œ 11</div>
                <div class="question-text">ç·‘å†…éšœã§ æ²»ç™‚ä¸­ãƒ»ç‚¹çœ¼ä¸­ã®æ–¹ã¯ æ¤œè¨ºã‚’å—ã‘ã‚‰ã‚Œã¾ã™ã‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="false">å—ã‘ã‚‹ã“ã¨ãŒã§ãã‚‹</div>
                    <div class="option" data-answer="true">å—ã‘ã‚‰ã‚Œãªã„ã€‚æ¤œæŸ»ã™ã‚‹ãªã‚‰ ä¿é™ºè¨ºç™‚ã§ã®æ‰±ã„ã¨ãªã‚‹</div>
                    <div class="option" data-answer="false">åŒ»å¸«ã®åˆ¤æ–­ã«ã‚ˆã‚‹</div>
                    <div class="option" data-answer="false">è‡ªå·±è² æ‹…é‡‘ãŒåŠé¡ã«ãªã‚‹</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>ã€Œçœ¼ç§‘ã§æ²»ç™‚ä¸­ã®æ–¹ã€çµŒéè¦³å¯Ÿä¸­ã®æ–¹ã¯ã€åŸå‰‡åŒ»ç™‚ã§ã®å—è¨ºã¨ãªã‚Šã¾ã™ã€ã¨æ˜è¨˜ã•ã‚Œã¦ã„ã¾ã™ã€‚
                    <div class="important-note">
                        <strong>é‡è¦ãªå—ä»˜å¯¾å¿œï¼š</strong>ç·‘å†…éšœã§æ²»ç™‚ãƒ»ç‚¹çœ¼ä¸­ã®æ–¹ã¯ æ¤œè¨ºå¯¾è±¡å¤–ã§ã™ã€‚æ¤œè¨ºãƒã‚¬ã‚­ã¯ä½¿ç”¨ã§ããšã€ä¿é™ºè¨ºç™‚ã§ã® å—è¨ºã¨ãªã‚‹ã“ã¨ã‚’ ãŠä¼ãˆã—ã¦ãã ã•ã„ã€‚
                    </div>
                </div>
            </div>

            <div class="question-card hidden" id="question12">
                <div class="question-number">å•é¡Œ 12</div>
                <div class="question-text">47æ­³ã®æ–¹ï¼ˆæ˜­å’Œ53å¹´8æœˆç”Ÿã¾ã‚Œï¼‰ã‹ã‚‰ æ¤œè¨ºã«ã¤ã„ã¦ å•ã„åˆã‚ã›ãŒã‚ã‚Šã¾ã—ãŸã€‚å½“é™¢ã§ã®è¿”ç­”ã¯ã©ã†ã—ã¾ã™ã‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="false">ä»Šå¹´åº¦ã¯å¯¾è±¡å¤– ã¨ãŠä¼ãˆã™ã‚‹</div>
                    <div class="option" data-answer="true">æ¤œè¨ºãŒ55æ­³ã¾ã§å®Ÿæ–½ãŒç„¡ã„ã®ã§ã€æ¤œæŸ»å¸Œæœ›ãªã‚‰ ä¿é™ºè¨ºç™‚ã§ã® å—è¨ºã‚’å‹§ã‚ã‚‹</div>
                    <div class="option" data-answer="false">æ¤œè¨ºãƒã‚¬ã‚­ã®åˆ©ç”¨å¯èƒ½ã¨ ãŠä¼ãˆã™ã‚‹</div>
                    <div class="option" data-answer="false">è‡ªè²»ã§ã®æ¤œè¨ºã‚’ãŠå‹§ã‚ã™ã‚‹</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>å¯¾è±¡å¹´é½¢ã¯ 46æ­³ã¨56æ­³ ã®ã¿ã§ã™ã€‚47æ­³ã®æ–¹ã¯ æ¬¡ã®æ¤œè¨ºå¯¾è±¡å¹´é½¢ï¼ˆ56æ­³ï¼‰ã¾ã§ å®Ÿæ–½ãŒãªã„ãŸã‚ã€å¿…è¦ã«å¿œã˜ã¦ ä¿é™ºè¨ºç™‚ã§ã®å—è¨ºã‚’ ãŠå‹§ã‚ã—ã¾ã™ã€‚
                    <div class="important-note">
                        <strong>å—ä»˜ã§ã®èª¬æ˜ï¼š</strong>æ¤œè¨ºå¯¾è±¡å¤–ã®æ–¹ã«ã¯ã€å¿ƒé…ãŒã‚ã‚Œã° ä¿é™ºè¨ºç™‚ã§ã®å—è¨ºã‚’ ã”æ¡ˆå†…ã—ã¦ãã ã•ã„ã€‚
                    </div>
                </div>
            </div>

            <div class="question-card hidden" id="question13">
                <div class="question-number">å•é¡Œ 13</div>
                <div class="question-text">åˆã‚ã¦ å½“é™¢ã«æ¥ã¦ ç·‘å†…éšœæ¤œè¨ºã‚’å—ã‘ãŸäººãŒã€çµæœä¸è‰¯ã®ãŸã‚ã€æ¬¡æœˆã«å†æ¤œæŸ»ã§ å—è¨ºã—ã¾ã—ãŸã€‚ã“ã®äººã®ç®—å®šã¯ ã©ã†ãªã‚‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="false">ä¿é™ºè¨ºç™‚ï¼ˆåˆè¨ºï¼‰</div>
                    <div class="option" data-answer="true">ä¿é™ºè¨ºç™‚ï¼ˆå†è¨ºï¼‰ï¼‹å±ˆæŠ˜ãƒ»è§’è†œæ›²ç‡ã®ã‚³ã‚¹ãƒˆã¯ ç®—å®šã¯å¯èƒ½</div>
                    <div class="option" data-answer="false">è‡ªè²»1000å††</div>
                    <div class="option" data-answer="false">ä¿é™ºè¨ºç™‚ï¼ˆå†è¨ºï¼‰ï¼‹å±ˆæŠ˜ãƒ»è§’è†œæ›²ç‡ã®ã‚³ã‚¹ãƒˆã¯ ç®—å®šä¸å¯</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>ï¼è§£èª¬ï¼ï¼š</strong>æ¤œè¨ºã§å—è¨ºã—ãŸå¾Œã®å†æ¤œæŸ»ã¯ã€æ—¢ã«å½“é™¢ã‚’å—è¨ºã—ã¦ã„ã‚‹ãŸã‚ä¿é™ºè¨ºç™‚ï¼ˆå†è¨ºï¼‰æ‰±ã„ã¨ãªã‚Šã¾ã™ã€‚ã—ã‹ã—ã€ä¿é™ºè¨ºç™‚ã§ã®å—è¨ºã¯åˆã‚ã¦ã®ãŸã‚ã€å±ˆæŠ˜ãƒ»è§’è†œæ›²ç‡ã®ã‚³ã‚¹ãƒˆã¯ã€€ç®—å®šå¯èƒ½ã§ã™ã€‚
                    <div class="important-note">
                        <strong>é‡è¦ãªå—ä»˜å¯¾å¿œï¼š</strong>æ¤œè¨ºå¾Œã®å†æ¤œæŸ»ã¯ ä¿é™ºè¨ºç™‚ã¨ãªã‚Šã€å†è¨ºæ–™ã‚„ æ¤œæŸ»æ–™ãŒ ç™ºç”Ÿã™ã‚‹ã“ã¨ã‚’ äº‹å‰ã«ãŠä¼ãˆã—ã¦ãã ã•ã„ã€‚
                    </div>
                </div>
            </div>

            <div class="question-card hidden" id="question14">
                <div class="question-number">å•é¡Œ 14</div>
                <div class="question-text">å½“é™¢ã®ã“ã®æ¤œè¨ºã«é–¢ã™ã‚‹ è‡ªæ²»ä½“ã¸ã®å•ã„åˆã‚ã›å…ˆã¯ ã©ã¡ã‚‰ã§ã—ã‚‡ã†ã‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="true">ãµã˜ã¿é‡å¸‚ä¿å¥ã‚»ãƒ³ã‚¿ãƒ¼ å¥åº·æ¨é€²ä¿‚</div>
                    <div class="option" data-answer="false">ãµã˜ã¿é‡å¸‚å½¹æ‰€ å¸‚æ°‘èª²</div>
                    <div class="option" data-answer="false">åŸ¼ç‰çœŒä¿å¥æ‰€</div>
                    <div class="option" data-answer="false">å„å®Ÿæ–½åŒ»ç™‚æ©Ÿé–¢</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>å•ã„åˆã‚ã›å…ˆã¯ã€Œä¿å¥ã‚»ãƒ³ã‚¿ãƒ¼ å¥åº·æ¨é€²ä¿‚ï¼ˆ049-264-8292ï¼‰ã€ã§ã™ã€‚
                    <div class="important-note">
                        <strong>å—ä»˜ã§ã®å¯¾å¿œï¼š</strong>åˆ¶åº¦ã«é–¢ã™ã‚‹ è©³ç´°ãªå•ã„åˆã‚ã›ã§ ç­”ãˆã‚‰ã‚Œãªã„å ´åˆã¯ã€ä¿å¥ã‚»ãƒ³ã‚¿ãƒ¼ã¸ã® é€£çµ¡ã‚’ãŠå‹§ã‚ã—ã¦ãã ã•ã„ã€‚é€£çµ¡å…ˆã‚’æ§ãˆã¦ãŠãã¾ã—ã‚‡ã†ã€‚
                    </div>
                </div>
            </div>

            <div class="buttons">
                <button class="next-button hidden" onclick="nextQuestion()">æ¬¡ã®å•é¡Œã¸</button>
                <button class="result-button hidden" onclick="showFinalScore()">ğŸŠ çµæœç™ºè¡¨ã¸ ğŸŠ</button>
            </div>
        </div>
    </div>

    <script src="quiz-config.js"></script>
    <script>
        const QUIZ_ID = 'ryokunaisho-kenshin';
        const TOTAL_QUESTIONS = 14;
        let currentQuestion = 1;
        let score = 0;
        let totalQuestions = 14;
        let questionList = [];
        let isDaily = false;

        const allQuestions = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14];

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«å­¦ç¿’çŠ¶æ³ã‚’æ›´æ–°
        document.addEventListener('DOMContentLoaded', function() {
            updateProgressStatus();
        });

        // å­¦ç¿’çŠ¶æ³ã®è¡¨ç¤ºã‚’æ›´æ–°
        function updateProgressStatus() {
            const incorrectList = getIncorrectQuestions(QUIZ_ID);
            const unansweredList = getUnansweredQuestions(QUIZ_ID, TOTAL_QUESTIONS);
            const correctNum = TOTAL_QUESTIONS - incorrectList.length - unansweredList.length;

            const incorrectCount = document.getElementById('incorrectCount');
            const unansweredCount = document.getElementById('unansweredCount');
            const correctCount = document.getElementById('correctCount');
            const totalQuestionsCount = document.getElementById('totalQuestionsCount');

            if (incorrectCount) {
                incorrectCount.textContent = `${incorrectList.length}å•`;
            }
            if (unansweredCount) {
                unansweredCount.textContent = `${unansweredList.length}å•`;
            }
            if (correctCount) {
                correctCount.textContent = `${correctNum}å•`;
            }
            if (totalQuestionsCount) {
                totalQuestionsCount.textContent = `${TOTAL_QUESTIONS}å•`;
            }
        }

        // é…åˆ—ã‚·ãƒ£ãƒƒãƒ•ãƒ«
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // æ­£è§£æ™‚ãƒ•ãƒ©ãƒƒã‚·ãƒ¥åŠ¹æœ
        function flashCorrect(element) {
            const card = element.closest('.question-card');
            if (card) {
                card.classList.add('correct-flash');
                setTimeout(() => card.classList.remove('correct-flash'), 400);
            }
        }

        // çµæœç™ºè¡¨ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
        function celebrateResult(isPerfect) {
            // æŒ¯å‹•ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ï¼ˆã‚¹ãƒãƒ›ã®ã¿ï¼‰
            if (navigator.vibrate) {
                if (isPerfect) {
                    navigator.vibrate([100, 50, 100, 50, 100]);
                } else {
                    navigator.vibrate([50, 30, 50]);
                }
            }

            // çµµæ–‡å­—ã‚’é£›ã°ã™
            const emojis = isPerfect
                ? ['ğŸ‰', 'ğŸ†', 'ğŸ‘‘', 'ğŸ’¯', 'â­', 'âœ¨', 'ğŸŒŸ', 'ğŸ¥‡']
                : ['ğŸ‰', 'â­', 'âœ¨', 'ğŸ‘', 'ğŸŠ'];
            const count = isPerfect ? 15 : 8;
            const centerX = window.innerWidth / 2;
            const centerY = window.innerHeight / 3;

            for (let i = 0; i < count; i++) {
                setTimeout(() => {
                    const emoji = document.createElement('div');
                    emoji.className = 'celebrate-emoji';
                    emoji.textContent = emojis[Math.floor(Math.random() * emojis.length)];
                    emoji.style.left = (centerX - 100 + Math.random() * 200) + 'px';
                    emoji.style.top = (centerY + Math.random() * 50) + 'px';
                    document.body.appendChild(emoji);

                    setTimeout(() => emoji.remove(), 1000);
                }, i * 100);
            }
        }

        function startQuiz(mode) {
            document.querySelector('h1').classList.add('hidden');
            document.querySelector('.subtitle').classList.add('hidden');
            document.getElementById('modeSelection').classList.add('hidden');
            document.getElementById('quizArea').classList.remove('hidden');
            document.getElementById('quizTitleHeader').classList.remove('hidden');

            if (mode === 'daily3') {
                isDaily = true;
                totalQuestions = 3;
                questionList = getWeightedRandomQuestions(QUIZ_ID, TOTAL_QUESTIONS, 3);
            } else {
                isDaily = false;
                totalQuestions = TOTAL_QUESTIONS;
                questionList = [...allQuestions];
            }

            for (let i = 1; i <= TOTAL_QUESTIONS; i++) {
                const questionElement = document.getElementById(`question${i}`);
                if (questionList.includes(i)) {
                    if (i === questionList[0]) {
                        questionElement.classList.remove('hidden');
                    } else {
                        questionElement.classList.add('hidden');
                    }
                } else {
                    questionElement.style.display = 'none';
                }
            }
            
            currentQuestion = 0;
            updateQuestionNumbers();
            document.getElementById('total').textContent = totalQuestions;
            shuffleOptions(questionList[0]);
            updateProgress();
        }

        function getRandomQuestions(count) {
            const shuffled = [...allQuestions].sort(() => 0.5 - Math.random());
            return shuffled.slice(0, count);
        }

        function updateQuestionNumbers() {
            questionList.forEach((questionId, index) => {
                const questionElement = document.getElementById(`question${questionId}`);
                const questionNumber = questionElement.querySelector('.question-number');
                questionNumber.textContent = `å•é¡Œ ${index + 1}`;
            });
        }

        function shuffleOptions(questionId) {
            if (!questionId) return;
            const container = document
                .getElementById(`question${questionId}`)
                .querySelector('.options');
            if (!container) return;
            
            for (let i = container.children.length; i >= 0; i--) {
                const rand = Math.floor(Math.random() * i);
                if (container.children[rand]) {
                    container.appendChild(container.children[rand]);
                }
            }
        }

        function updateProgress() {
            const progress = ((currentQuestion + 1) / totalQuestions) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }

        function selectAnswer(selectedOption) {
            const currentQuestionId = questionList[currentQuestion];
            const currentQuestionElement = document.getElementById(`question${currentQuestionId}`);
            const options = currentQuestionElement.querySelectorAll('.option');
            const feedback = currentQuestionElement.querySelector('.feedback');
            const explanation = currentQuestionElement.querySelector('.explanation');
            const nextButton = document.querySelector('.next-button');
            const resultButton = document.querySelector('.result-button');
            
            const isCorrect = selectedOption.dataset.answer === 'true';
            let correctAnswerText = '';
            
            options.forEach(option => {
                if (option.dataset.answer === 'true') {
                    correctAnswerText = option.textContent;
                }
            });
            
            options.forEach(option => {
                option.classList.add('disabled');
                if (option.dataset.answer === 'true') {
                    option.classList.add('correct');
                } else if (option === selectedOption && option.dataset.answer === 'false') {
                    option.classList.add('incorrect');
                }
            });

            if (isCorrect) {
                feedback.textContent = 'ğŸ‰ æ­£è§£ã§ã™ï¼';
                feedback.className = 'feedback correct';
                score++;
                flashCorrect(selectedOption);
            } else {
                feedback.textContent = `âŒ ä¸æ­£è§£ã§ã™ã€‚æ­£è§£ã¯ã€Œ${correctAnswerText}ã€ã§ã™ã€‚`;
                feedback.className = 'feedback incorrect';
            }

            // å•é¡Œã”ã¨ã®çµæœã‚’è¨˜éŒ²ï¼ˆå¾©ç¿’ãƒ»æœªæŒ‘æˆ¦ãƒ¢ãƒ¼ãƒ‰ç”¨ï¼‰
            if (typeof recordQuestionResult === 'function') {
                recordQuestionResult(QUIZ_ID, currentQuestionId, isCorrect);
            }

            feedback.style.display = 'block';
            explanation.classList.remove('hidden');

            setTimeout(() => {
                feedback.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }, 100);

            if (currentQuestion < totalQuestions - 1) {
                nextButton.classList.remove('hidden');
            } else {
                resultButton.classList.remove('hidden');
            }
            
            updateScore();
        }

        function nextQuestion() {
            const currentQuestionId = questionList[currentQuestion];
            document.getElementById(`question${currentQuestionId}`).classList.add('hidden');
            
            currentQuestion++;
            const nextQuestionId = questionList[currentQuestion];
            
            shuffleOptions(nextQuestionId);
            document.getElementById(`question${nextQuestionId}`).classList.remove('hidden');
            document.querySelector('.next-button').classList.add('hidden');
            updateProgress();
        }

        function showFinalScore() {
            questionList.forEach(questionId => {
                document.getElementById(`question${questionId}`).classList.add('hidden');
            });
            document.querySelector('.next-button').classList.add('hidden');
            document.querySelector('.result-button').classList.add('hidden');
            document.querySelector('.quiz-status').classList.add('hidden');
            document.getElementById('quizArea').classList.add('hidden');
            document.querySelector('.quiz-container').classList.add('hidden');

            // çµæœç™ºè¡¨ã‚¨ãƒ•ã‚§ã‚¯ãƒˆï¼ˆæº€ç‚¹ã‹ã©ã†ã‹ã§æ¼”å‡ºã‚’å¤‰ãˆã‚‹ï¼‰
            const isPerfect = score === totalQuestions;
            setTimeout(() => {
                celebrateResult(isPerfect);
            }, 300);

            if (typeof recordQuizResult === 'function') {
                recordQuizResult(QUIZ_ID, score, totalQuestions);
            }

            const percentage = Math.round((score / totalQuestions) * 100);
            let title, emoji, message;

            if (isDaily) {
                if (score === totalQuestions) {
                    title = 'ğŸ† PERFECT! ğŸ†';
                    emoji = 'ğŸ‰âœ¨ğŸŠ';
                    message = `${totalQuestions}å•å…¨å•æ­£è§£ï¼ç·‘å†…éšœæ¤œè¨ºã®é‡è¦ãƒã‚¤ãƒ³ãƒˆã‚’ ã—ã£ã‹ã‚Šç†è§£ã—ã¦ã„ã¾ã™ã­ã€‚\nä»Šæ—¥ã‚‚æ‚£è€…ã•ã‚“ã« å®‰å¿ƒã—ã¦ã‚‚ã‚‰ãˆã‚‹å¯¾å¿œã‚’ ãŠé¡˜ã„ã—ã¾ã™ï¼\n${emoji}`;
                } else if (score >= Math.ceil(totalQuestions * 0.8)) {
                    title = 'ğŸ‘ GOOD JOB! ğŸ‘';
                    emoji = 'ğŸˆğŸ“šğŸ’ª';
                    message = `ã‚ˆãã§ãã¾ã—ãŸï¼åŸºæœ¬çš„ãªãƒã‚¤ãƒ³ãƒˆã¯ æŠ¼ã•ãˆã‚‰ã‚Œã¦ã„ã¾ã™ã€‚\né–“é•ãˆãŸç®‡æ‰€ã‚’ ç¢ºèªã—ã¦ã€ã‚ˆã‚Šç¢ºå®Ÿãªå¯¾å¿œã‚’ å¿ƒãŒã‘ã¾ã—ã‚‡ã†ã€‚\n${emoji}`;
                } else {
                    title = 'ğŸ“– KEEP LEARNING! ğŸ“–';
                    emoji = 'ğŸŒ±ğŸ“ğŸ”';
                    message = `ä»Šæ—¥ã¯å¾©ç¿’ã®æ©Ÿä¼šã«ãªã‚Šã¾ã—ãŸã­ã€‚\nç·‘å†…éšœæ¤œè¨ºã®æµã‚Œã‚„é‡è¦ãƒã‚¤ãƒ³ãƒˆã‚’ ã‚‚ã†ä¸€åº¦ç¢ºèªã—ã¦ã€\næ˜æ—¥ã‹ã‚‰ã®æ¥­å‹™ã«æ´»ã‹ã—ã¦ã„ãã¾ã—ã‚‡ã†ï¼\n${emoji}`;
                }
            } else {
                if (score === totalQuestions) {
                    title = 'ğŸ† PERFECT SCORE! ğŸ†';
                    emoji = 'ğŸ‰âœ¨ğŸŠ';
                    message = `100ç‚¹æº€ç‚¹ï¼ã‚ãªãŸã¯ ç·‘å†…éšœæ¤œè¨ºã®æµã‚Œã¨ æ‚£è€…å¯¾å¿œã®ãƒã‚¤ãƒ³ãƒˆã‚’ å®Œå…¨ã« ç†è§£ã—ã¦ã„ã¾ã™ã€‚\næ‚£è€…ã•ã‚“ã¸ã® èª¬æ˜ã‚‚ å®‰å¿ƒã—ã¦ ä»»ã›ã‚‰ã‚Œã‚‹ ãƒ¬ãƒ™ãƒ«ã§ã™ã€‚\næ—¥ã€…ã® å—ä»˜æ¥­å‹™ã« è‡ªä¿¡ã‚’æŒã£ã¦ã€ã“ã‚Œã‹ã‚‰ã‚‚ æ‚£è€…ã•ã‚“ã® ã‚µãƒãƒ¼ãƒˆã‚’ ãŠé¡˜ã„ã—ã¾ã™ï¼\n${emoji}`;
                } else if (score >= totalQuestions * 0.9) {
                    title = 'ğŸŒŸ EXCELLENT! ğŸŒŸ';
                    emoji = 'ğŸ‘ğŸ¯ğŸ’«';
                    message = `ç´ æ™´ã‚‰ã—ã„å‡ºæ¥ã§ã™ï¼æ¤œè¨ºã® æ‰‹é †ã‚„é‡è¦ãƒã‚¤ãƒ³ãƒˆã‚’ ååˆ†ã«ç†è§£ã—ã¦ã„ã¾ã™ã€‚\nã‚‚ã†ä¸€åº¦ ç°¡å˜ã«å¾©ç¿’ã™ã‚Œã°ã€ã‚ˆã‚Šç¢ºå®Ÿãª æ‚£è€…å¯¾å¿œãŒ ã§ãã¾ã™ã‚ˆã€‚\næ¬¡å›ã‚‚ ã“ã®èª¿å­ã§ã€æ‚£è€…ã•ã‚“ã« é ¼ã‚‰ã‚Œã‚‹å—ä»˜ã‚’ ç›®æŒ‡ã—ã¾ã—ã‚‡ã†ï¼\n${emoji}`;
                } else if (score >= totalQuestions * 0.8) {
                    title = 'ğŸ‘ GREAT JOB! ğŸ‘';
                    emoji = 'ğŸˆğŸ“šğŸ’ª';
                    message = `è‰¯ã„çµæœã§ã™ï¼ä¸»è¦ãªæ¤œæŸ»é …ç›®ã‚„ å•è¨ºã®ãƒã‚¤ãƒ³ãƒˆã¯ æŠ¼ã•ãˆã‚‰ã‚Œã¦ã„ã¾ã™ã€‚\nè‹¦æ‰‹ãªåˆ†é‡ã‚’ é‡ç‚¹çš„ã«å­¦ç¿’ã™ã‚Œã°ã€ã•ã‚‰ã«ã‚¹ãƒ ãƒ¼ã‚ºãª å—ä»˜å¯¾å¿œãŒ å¯èƒ½ã§ã™ã€‚\nå®Ÿéš›ã®ç¾å ´ã§ è‡ªä¿¡ã‚’æŒã£ã¦ å£°ã‹ã‘ã—ã¦ã¿ã¦ãã ã•ã„ã­ï¼\n${emoji}`;
                } else if (score >= totalQuestions * 0.7) {
                    title = 'ğŸ“– GOOD EFFORT! ğŸ“–';
                    emoji = 'ğŸŒ±ğŸ“ğŸ”';
                    message = `åŠªåŠ›ãŒ å®Ÿã‚’çµã³ã¤ã¤ ã‚ã‚Šã¾ã™ã­ï¼æ¤œè¨ºã®å…¨ä½“åƒã¯ ã—ã£ã‹ã‚Š ç†è§£ã§ãã¦ã„ã¾ã™ã€‚\né–“é•ãˆãŸç®‡æ‰€ã‚’ è¦‹ç›´ã—ã€æ‚£è€…ã¸ã®å£°ã‹ã‘ã‚’ æ„è­˜ã™ã‚‹ã“ã¨ã§ã€\nã‚ˆã‚Šè³ªã®é«˜ã„ã‚µãƒ¼ãƒ“ã‚¹ãŒ æä¾›ã§ãã¾ã™ã€‚\nå¼•ãç¶šã é ‘å¼µã‚Šã¾ã—ã‚‡ã†ï¼\n${emoji}`;
                } else {
                    title = 'ğŸ’ª KEEP LEARNING! ğŸ’ª';
                    emoji = 'ğŸ“šğŸŒŸğŸ’¡';
                    message = `ä»Šå›ã¯ ã¾ã èª²é¡ŒãŒ è¦‹ã¤ã‹ã‚Šã¾ã—ãŸãŒã€ç·‘å†…éšœæ¤œè¨ºã® å—ä»˜æ¥­å‹™ã« æ…£ã‚Œã‚‹ãŸã‚ã® å¤§åˆ‡ãªã‚¹ãƒ†ãƒƒãƒ—ã§ã™ã€‚\næ¤œæŸ»ãƒ—ãƒ­ã‚»ã‚¹ã‚„ æ‚£è€…æ¡ˆå†…ã®ãƒã‚¤ãƒ³ãƒˆã‚’ ã—ã£ã‹ã‚Šå¾©ç¿’ã—ã€å®Ÿè·µã§ æ´»ã‹ã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚\nå°ã•ãªå­¦ã³ãŒ å¤§ããªæˆæœã« ã¤ãªãŒã‚Šã¾ã™ã€‚æ¬¡å›ã¯ å¿…ãš ã‚¹ãƒ†ãƒƒãƒ—ã‚¢ãƒƒãƒ—ã§ãã¾ã™ã‚ˆï¼\n${emoji}`;
                }
            }
            
            document.getElementById('resultTitle').textContent = 'ğŸŠ çµæœç™ºè¡¨ ğŸŠ';

            const scoreHTML = `<span class="final-score-highlight">æœ€çµ‚ã‚¹ã‚³ã‚¢ : ${score}/${totalQuestions}ï¼ˆ${percentage}%ï¼‰</span>`;
            const evaluationHTML = `<div class="result-evaluation">${title}</div>`;
            const messageHTML = `<div>${message.replace(/\n/g, '<br>')}</div>`;
            
            document.getElementById('resultDetail').innerHTML = evaluationHTML + scoreHTML + messageHTML;

            document.getElementById('resultTitleCard').classList.remove('hidden');
            document.getElementById('finalResult').classList.remove('hidden');
            document.querySelector('.home-button').classList.remove('hidden');
            document.querySelector('.mypage-button').classList.remove('hidden');
            document.querySelector('.top-button').classList.remove('hidden');
            document.querySelector('.top-link').classList.add('hidden');

            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function resetQuiz() {
            document.getElementById('resultTitleCard').classList.add('hidden');
            document.getElementById('finalResult').classList.add('hidden');
            document.querySelector('.quiz-container').classList.remove('hidden');
            document.querySelector('.top-link').classList.remove('hidden');
            score = 0;
            updateScore();

            for (let i = 1; i <= TOTAL_QUESTIONS; i++) {
                const questionElement = document.getElementById(`question${i}`);
                questionElement.style.display = '';
                questionElement.classList.add('hidden');

                const options = questionElement.querySelectorAll('.option');
                options.forEach(option => {
                    option.classList.remove('correct', 'incorrect', 'disabled');
                });

                questionElement.querySelector('.feedback').style.display = 'none';
                questionElement.querySelector('.explanation').classList.add('hidden');
            }

            document.querySelector('.next-button').classList.add('hidden');
            document.querySelector('.result-button').classList.add('hidden');
            document.querySelector('.mypage-button').classList.add('hidden');
            document.querySelector('.top-button').classList.add('hidden');
            document.querySelector('.home-button').classList.add('hidden');

            document.querySelector('.quiz-status').classList.remove('hidden');

            if (totalQuestions === 3) {
                startQuiz('daily3');
            } else {
                startQuiz('full');
            }
        }

        function goHome() {
            document.getElementById('resultTitleCard').classList.add('hidden');
            document.getElementById('finalResult').classList.add('hidden');
            document.getElementById('quizArea').classList.add('hidden');
            document.querySelector('.quiz-container').classList.remove('hidden');
            document.querySelector('.top-link').classList.remove('hidden');
            document.getElementById('quizTitleHeader').classList.add('hidden');

            document.querySelector('h1').classList.remove('hidden');
            document.querySelector('.subtitle').classList.remove('hidden');

            for (let i = 1; i <= TOTAL_QUESTIONS; i++) {
                const questionElement = document.getElementById(`question${i}`);
                questionElement.style.display = '';
                questionElement.classList.add('hidden');

                const options = questionElement.querySelectorAll('.option');
                options.forEach(option => {
                    option.classList.remove('correct', 'incorrect', 'disabled');
                });

                questionElement.querySelector('.feedback').style.display = 'none';
                questionElement.querySelector('.explanation').classList.add('hidden');
            }

            document.querySelector('.next-button').classList.add('hidden');
            document.querySelector('.result-button').classList.add('hidden');
            document.querySelector('.mypage-button').classList.add('hidden');
            document.querySelector('.top-button').classList.add('hidden');
            document.querySelector('.home-button').classList.add('hidden');
            document.querySelector('.quiz-status').classList.remove('hidden');

            currentQuestion = 1;
            score = 0;
            totalQuestions = TOTAL_QUESTIONS;
            questionList = [];
            isDaily = false;

            updateScore();
            updateProgressStatus();

            document.getElementById('modeSelection').classList.remove('hidden');
        }

        function updateScore() {
            document.getElementById('score').textContent = score;
        }

        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('option') && !e.target.classList.contains('disabled')) {
                selectAnswer(e.target);
            }
        });
    </script>

    <!-- â–¼â–¼â–¼ HTMLæ§‹é€ ã‚’ä¿®æ­£ â–¼â–¼â–¼ -->
    <div id="resultTitleCard" class="final-score-card hidden" style="margin-bottom: 20px;">
      <div id="resultTitle" class="result-title"></div>
    </div>

    <div id="finalResult" class="final-score-card hidden">
      <div id="resultDetail" class="result-detail"></div>
      <div class="buttons">
        <button class="home-button hidden" onclick="goHome()">ğŸ”„ ãƒ¢ãƒ¼ãƒ‰é¸æŠ</button>
        <a href="../mypage.html" class="mypage-button hidden">ğŸ“Š å­¦ç¿’è¨˜éŒ²</a>
        <a href="../index.html" class="top-button hidden">ğŸ  ãƒ›ãƒ¼ãƒ </a>
      </div>
    </div>
    <!-- â–²â–²â–² HTMLæ§‹é€ ã‚’ä¿®æ­£ â–²â–²â–² -->

</body>
</html>