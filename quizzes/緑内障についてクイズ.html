<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>ç·‘å†…éšœç†è§£åº¦ã‚¯ã‚¤ã‚º - æ‚£è€…ãƒ»å®¶æ—å‘ã‘</title>
    <style>
        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        html {
            scroll-behavior: smooth;
        }
        body {
            font-family: 'Noto Sans JP', -apple-system, BlinkMacSystemFont, sans-serif;
            margin: 0;
            padding: 12px;
            padding-top: max(12px, env(safe-area-inset-top));
            padding-bottom: max(12px, env(safe-area-inset-bottom));
            padding-left: max(12px, env(safe-area-inset-left));
            padding-right: max(12px, env(safe-area-inset-right));
            background: linear-gradient(135deg, #2e7d32 0%, #1b5e20 100%);
            min-height: 100vh;
        }
        .quiz-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        @media (min-width: 768px) {
            body {
                padding: 20px;
            }
            .quiz-container {
                padding: 25px;
            }
        }

        @media (max-width: 768px) {
            body {
                padding: 12px;
            }
            .quiz-container {
                padding: 20px;
            }
        }
        
        h1 {
            text-align: center;
            color: #1b5e20;
            font-size: 28px;
            margin-bottom: 4px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 24px;
            }
        }
        
        .subtitle {
            text-align: center;
            color: #2e7d32;
            font-size: 16px;
            margin-bottom: 15px;
        }

        @media (max-width: 768px) {
            .subtitle {
                font-size: 16px;
            }
        }

        .top-link {
            display: block;
            text-align: center;
            margin-bottom: 20px;
        }

        .top-link a {
            background: #5e35b1;
            color: white;
            text-decoration: none;
            font-size: 16px;
            font-weight: bold;
            padding: 12px 25px;
            border-radius: 25px;
            transition: all 0.3s ease;
            display: inline-block;
        }

        .top-link a:active {
            transform: scale(0.97);
        }

        @media (min-width: 768px) {
            .top-link a:hover {
                transform: translateY(-2px);
                box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
            }
        }

        .top-button {
            background: #5e35b1;
            color: white;
            border: none;
            padding: 15px 35px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            margin: 10px 10px;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .mypage-button {
            background: #00897b;
            color: white;
            border: none;
            padding: 15px 35px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            margin: 10px 10px;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .top-button:active, .mypage-button:active {
            transform: scale(0.97);
        }

        @media (min-width: 768px) {
            .top-button:hover {
                transform: translateY(-2px);
                box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
            }
            .mypage-button:hover {
                transform: translateY(-2px);
                box-shadow: 0 8px 25px rgba(38, 166, 154, 0.4);
            }
        }

        /* çµæœç”»é¢ãƒœã‚¿ãƒ³ */
        .result-buttons {
            margin-top: 25px;
        }

        .result-buttons-row {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-bottom: 12px;
            flex-wrap: wrap;
        }

        .result-buttons-row.secondary {
            margin-bottom: 0;
        }

        .shuffle-button, .retry-button {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px 20px;
            border-radius: 15px;
            border: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            color: white;
            transition: all 0.3s ease;
            min-width: 140px;
            text-decoration: none;
        }

        .shuffle-button {
            background: #e91e63;
        }

        .retry-button {
            background: #1976d2;
        }

        .btn-sub {
            font-size: 11px;
            font-weight: normal;
            opacity: 0.9;
            margin-top: 3px;
        }

        .record-button, .home-button-small {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 10px 20px;
            border-radius: 20px;
            border: none;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            color: white;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .record-button {
            background: #00897b;
        }

        .home-button-small {
            background: #5e35b1;
        }

        .shuffle-button:active, .retry-button:active, .record-button:active, .home-button-small:active {
            transform: scale(0.97);
        }

        @media (min-width: 768px) {
            .shuffle-button:hover, .retry-button:hover {
                transform: translateY(-3px);
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            }
            .record-button:hover, .home-button-small:hover {
                transform: translateY(-2px);
                box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
            }
        }

        @media (max-width: 768px) {
            .shuffle-button, .retry-button {
                min-width: 130px;
                padding: 12px 16px;
                font-size: 15px;
            }
            .record-button, .home-button-small {
                padding: 8px 16px;
                font-size: 13px;
            }
        }

        .mode-selection {
            text-align: center;
            margin: 40px 0;
        }
        
        .mode-button {
            display: block;
            width: 80%;
            max-width: 400px;
            margin: 15px auto;
            background: linear-gradient(135deg, #388e3c, #2e7d32);
            color: white;
            border: none;
            padding: 20px 40px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(56, 142, 60, 0.3);
        }
        
        .mode-button:active {
            transform: scale(0.97);
        }

        @media (min-width: 768px) {
            .mode-button:hover {
                transform: translateY(-3px);
                box-shadow: 0 8px 25px rgba(56, 142, 60, 0.4);
            }
        }

        @media (max-width: 768px) {
            .mode-button {
                width: 90%;
                padding: 18px 30px;
                font-size: 17px;
                margin: 12px auto;
            }
        }
        
        .mode-description {
            font-size: 14px;
            color: #1b5e20;
            margin-top: 20px;
            line-height: 1.5;
        }

        /* å­¦ç¿’çŠ¶æ³è¡¨ç¤º */
        .progress-status {
            margin: 25px auto 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            font-size: 14px;
            color: #555;
            max-width: 500px;
        }

        .progress-status-item {
            display: flex;
            justify-content: space-between;
            margin: 5px 0;
        }

        .progress-status-item span:last-child {
            font-weight: bold;
        }

        .question-card {
            background: #f1f8e9;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 6px solid #388e3c;
            box-shadow: 0 3px 15px rgba(0,0,0,0.08);
            border: 1px solid #c8e6c9;
            display: flex;
            flex-wrap: wrap;
            align-items: baseline;
        }
        
        .question-number {
            font-weight: bold;
            color: #388e3c;
            font-size: 19px;
            margin-bottom: 20px;
            margin-right: 0.75em;
        }
        
        .question-text {
            font-size: 22px;
            font-weight: 600;
            color: #1b5e20;
            margin-bottom: 20px;
            line-height: 1.5;
            flex-grow: 1;
        }
        
        .options, .feedback, .explanation {
            width: 100%;
        }

        @media (max-width: 768px) {
            .question-card {
                padding: 20px;
                display: block;
            }
            .question-number {
                margin-bottom: 12px;
            }
            .question-text {
                font-size: 20px;
            }
        }
        
        .options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 15px;
        }
        
        @media (max-width: 768px) {
            .options {
                grid-template-columns: 1fr;
                gap: 12px;
            }
        }
        
        .option {
            background: white;
            border: 2px solid #c8e6c9;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 18px;
            font-weight: 500;
            text-align: center;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1.4;
        }
        
        @media (max-width: 768px) {
            .option {
                padding: 15px;
                font-size: 16px;
                min-height: 60px;
            }
        }
        
        .option:active {
            transform: scale(0.98);
            background: #e8f5e9;
            border-color: #388e3c;
        }

        @media (min-width: 768px) {
            .option:hover {
                border-color: #388e3c;
                background: #e8f5e9;
                transform: translateY(-3px);
                box-shadow: 0 6px 20px rgba(56, 142, 60, 0.25);
            }
        }

        .option.correct {
            border-color: #4caf50;
            background: #e8f5e9;
            cursor: default;
            transform: none;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
        }
        .option.incorrect {
            border-color: #dc2626;
            background: #fef2f2;
            cursor: default;
            transform: none;
            box-shadow: 0 4px 15px rgba(220, 38, 38, 0.3);
        }
        .option.disabled {
            cursor: default;
            opacity: 0.7;
        }
        .option.disabled:hover {
            transform: none;
            box-shadow: none;
        }
        .next-button, .reset-button, .home-button, .result-button {
            background: linear-gradient(135deg, #388e3c, #2e7d32);
            color: white;
            border: none;
            padding: 15px 35px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            margin: 10px 10px;
            transition: all 0.3s ease;
        }
        
        @media (max-width: 768px) {
            .next-button, .reset-button, .home-button, .result-button {
                padding: 12px 25px;
                font-size: 16px;
                margin: 10px 5px;
            }
        }
        
        .next-button:active, .reset-button:active, .home-button:active, .result-button:active {
            transform: scale(0.97);
        }

        @media (min-width: 768px) {
            .next-button:hover, .reset-button:hover, .home-button:hover, .result-button:hover {
                transform: translateY(-2px);
                box-shadow: 0 8px 25px rgba(56, 142, 60, 0.4);
            }
        }

        .feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 18px;
            display: none;
            text-align: center;
        }
        .feedback.correct {
            background: #e8f5e9;
            color: #2e7d32;
            border: 2px solid #4caf50;
        }
        .feedback.incorrect {
            background: #fef2f2;
            color: #dc2626;
            border: 2px solid #ef5350;
        }
        .quiz-status {
            margin-bottom: 15px;
        }

        .status-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
            padding: 0 4px;
        }

        .question-progress {
            font-size: 15px;
            font-weight: bold;
            color: #1b5e20;
        }

        .score-display {
            font-size: 15px;
            font-weight: bold;
            color: #1b5e20;
        }

        .progress-bar {
            width: 100%;
            height: 4px;
            background: #c8e6c9;
            border-radius: 2px;
            overflow: hidden;
        }

        /* å•é¡Œã‚«ãƒ¼ãƒ‰å†…ã®å•é¡Œç•ªå·ã¯éè¡¨ç¤º */
        .question-number {
            display: none;
        }
        
        .hidden {
            display: none;
        }
        .buttons {
            text-align: center;
            margin-top: 20px;
        }
        .explanation {
            background: #e0f2f1;
            border-left: 5px solid #009688;
            padding: 15px;
            margin-top: 15px;
            border-radius: 8px;
            font-size: 18px;
            line-height: 1.5;
        }
        
        @media (max-width: 768px) {
            .explanation {
                padding: 15px;
                font-size: 16px;
            }
        }
        
        .important-note {
            background: #fff3e0;
            border: 2px solid #ff9800;
            border-radius: 8px;
            padding: 12px;
            margin-top: 12px;
            font-size: 18px;
            color: #e65100;
            line-height: 1.4;
        }
        
        @media (max-width: 768px) {
            .important-note {
                padding: 12px;
                font-size: 16px;
            }
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #388e3c, #2e7d32);
            transition: width 0.5s ease;
            border-radius: 4px;
        }
        
        .medical-note {
            background: #e3f2fd;
            border: 2px solid #2196f3;
            border-radius: 8px;
            padding: 12px;
            margin-top: 12px;
            font-size: 18px;
            color: #0d47a1;
            line-height: 1.4;
            font-weight: 600;
        }
    
        .final-score-card{
            background:#f1f8e9;
            border:2px solid #388e3c;
            border-radius:15px;
            padding:30px;
            margin-top:30px;
            text-align:center;
            box-shadow:0 3px 15px rgba(0,0,0,.08)
        }
        .result-title {
            font-size:32px;
            font-weight:700;
            color:#1b5e20;
            margin-bottom:20px
        }
        
        .result-detail{
            font-size: 20px;
            line-height: 1.8;
            color: #1b5e20;
        }

        .result-evaluation {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 25px;
        }

        .final-score-highlight {
            color: #dc2626;
            font-weight: bold;
            font-size: 1.5em;
            display: block;
            margin-bottom: 25px;
        }

        @media (max-width: 768px) {
            .result-title {font-size:28px}
            .result-detail{font-size:18px;line-height:1.7}
            .result-evaluation {font-size: 22px;}
        }

        /* æ­£è§£ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ */
        .celebrate-emoji {
            position: fixed;
            font-size: 40px;
            pointer-events: none;
            z-index: 9999;
            animation: celebrate 1s ease-out forwards;
        }

        @keyframes celebrate {
            0% {
                opacity: 1;
                transform: translateY(0) scale(0.5) rotate(0deg);
            }
            50% {
                opacity: 1;
                transform: translateY(-60px) scale(1.2) rotate(15deg);
            }
            100% {
                opacity: 0;
                transform: translateY(-120px) scale(0.8) rotate(-10deg);
            }
        }

        .correct-flash {
            animation: flashGreen 0.4s ease-out;
        }

        @keyframes flashGreen {
            0% { box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.7); }
            50% { box-shadow: 0 0 20px 10px rgba(76, 175, 80, 0.4); }
            100% { box-shadow: 0 0 0 0 rgba(76, 175, 80, 0); }
        }

        /* ã‚¯ã‚¤ã‚ºä¸­ã‚¿ã‚¤ãƒˆãƒ«è¡¨ç¤º */
        .quiz-title-header {
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            color: #2c3e50;
            padding: 10px;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 10px;
        }

    </style>
</head>
<body>
    <div class="quiz-container">
        <h1>ğŸ‘ï¸ ç·‘å†…éšœç†è§£åº¦ã‚¯ã‚¤ã‚º ğŸ‘ï¸</h1>
        <div class="subtitle">æ‚£è€…ãƒ»å®¶æ—å‘ã‘ - ç—…æ°—ã¸ã®ç†è§£ã‚’æ·±ã‚ã‚ˆã†</div>
        <div id="quizTitleHeader" class="quiz-title-header hidden">ğŸ‘ï¸ ç·‘å†…éšœç†è§£åº¦ã‚¯ã‚¤ã‚º</div>
        <div class="top-link"><a href="../index.html">â† ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã¸</a></div>

        <div id="modeSelection" class="mode-selection">
            <button class="mode-button" onclick="startQuiz('daily3')">
                ğŸ“‹ ä»Šæ—¥ã®3å•
            </button>
            <button class="mode-button" onclick="startQuiz('full')">
                ğŸ“š å…¨å•ãƒ¢ãƒ¼ãƒ‰ï¼ˆå…¨17å•ï¼‰
            </button>

            <div id="progressStatus" class="progress-status">
                <div class="progress-status-item">
                    <span>âŒ é–“é•ãˆãŸå•é¡Œ:</span>
                    <span id="incorrectCount">0å•</span>
                </div>
                <div class="progress-status-item">
                    <span>ğŸ†• æœªæŒ‘æˆ¦ã®å•é¡Œ:</span>
                    <span id="unansweredCount">17å•</span>
                </div>
                <div class="progress-status-item">
                    <span>âœ… æ­£è§£ã—ãŸå•é¡Œ:</span>
                    <span id="correctCount">0å•</span>
                </div>
                <div class="progress-status-item">
                    <span>ğŸ“Š å…¨å•é¡Œæ•°:</span>
                    <span id="totalQuestionsCount">17å•</span>
                </div>
            </div>

            <div class="mode-description">
                <strong>ä»Šæ—¥ã®3å•:</strong> é–“é•ã„ãƒ»æœªæŒ‘æˆ¦ã‚’å„ªå…ˆå‡ºé¡Œ<br>
                <strong>å…¨å•ãƒ¢ãƒ¼ãƒ‰:</strong> å…¨17å•ã‚’é †ç•ªã«å‡ºé¡Œ
            </div>
        </div>
        
        <div id="quizArea" class="hidden">
            <div class="quiz-status">
                <div class="status-row">
                    <span class="question-progress">å•é¡Œ <span id="currentQ">1</span> / <span id="total">17</span></span>
                    <span class="score-display">æ­£è§£: <span id="score">0</span></span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressBar"></div>
                </div>
            </div>
            
            <div class="question-card" id="question1">
                <div class="question-number">å•é¡Œ 1</div>
                <div class="question-text">40æ­³ä»¥ä¸Šã®æ—¥æœ¬äººã§ç·‘å†…éšœã®æ‚£è€…ã•ã‚“ã®å‰²åˆã¯ã©ã®ãã‚‰ã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="false">ç´„1%ï¼ˆ100äººã«1äººï¼‰</div>
                    <div class="option" data-answer="false">ç´„2%ï¼ˆ50äººã«1äººï¼‰</div>
                    <div class="option" data-answer="true">ç´„5%ï¼ˆ20äººã«1äººï¼‰</div>
                    <div class="option" data-answer="false">ç´„10%ï¼ˆ10äººã«1äººï¼‰</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>ç·‘å†…éšœã¯éå¸¸ã«å¤šã„ç—…æ°—ã§ã€40æ­³ä»¥ä¸Šã§ã¯5%ã€ã¤ã¾ã‚Š20äººã«1äººã‚‚ã„ã¾ã™ã€‚60æ­³ä»¥ä¸Šã§ã¯10äººã«1äººã¨è¨€ã‚ã‚Œã¦ã„ã¾ã™ã€‚
                    <div class="important-note">
                        <strong>å¤§åˆ‡ãªãƒã‚¤ãƒ³ãƒˆï¼š</strong>ã“ã‚Œã»ã©å¤šãã®æ–¹ãŒæ‚£ã£ã¦ã„ã‚‹ç—…æ°—ã§ã™ãŒã€æ—©æœŸç™ºè¦‹ãƒ»é©åˆ‡ãªæ²»ç™‚ã«ã‚ˆã‚Šã€ã»ã¨ã‚“ã©ã®æ–¹ãŒç”Ÿæ¶¯ã«ã‚ãŸã£ã¦è¦–åŠ›ã¨è¦–é‡ã‚’ä¿ã¤ã“ã¨ãŒã§ãã¾ã™ã€‚
                    </div>
                </div>
            </div>

            <div class="question-card hidden" id="question2">
                <div class="question-number">å•é¡Œ 2</div>
                <div class="question-text">ç·‘å†…éšœã§æœ€ã‚‚å¤§åˆ‡ãªæ²»ç™‚ç›®æ¨™ã¯ä½•ã§ã—ã‚‡ã†ã‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="false">è¦–åŠ›ã‚’å‘ä¸Šã•ã›ã‚‹ã“ã¨</div>
                    <div class="option" data-answer="false">è¦–é‡ã‚’åºƒã’ã‚‹ã“ã¨</div>
                    <div class="option" data-answer="true">ç—…æ°—ã®é€²è¡Œã‚’é…ã‚‰ã›ã€ç”Ÿæ¶¯è¦–æ©Ÿèƒ½ã‚’ä¿ã¤ã“ã¨</div>
                    <div class="option" data-answer="false">çœ¼åœ§ã‚’æ­£å¸¸å€¤ã¾ã§ä¸‹ã’ã‚‹ã“ã¨</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>ç·‘å†…éšœã¯æ²»ã‚‹ç—…æ°—ã§ã¯ãªãã€æ²»ç™‚ã¯é€²è¡Œã‚’é…ã‚‰ã›ã¦ã€ç”Ÿæ¶¯ã«ã‚ãŸã‚Šè¦–æ©Ÿèƒ½ã‚’ä¿ã¤ã“ã¨ãŒç›®çš„ã§ã™ã€‚æ­»ã‚“ã ç¥çµŒã‚’å…ƒã«æˆ»ã™ã“ã¨ã¯ã§ããªã„ãŸã‚ã€è¦–é‡ã‚’åºƒã’ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚
                    <div class="important-note">
                        <strong>ç†è§£ã—ã¦ãŠããŸã„ã“ã¨ï¼š</strong>æ—©æœŸç™ºè¦‹ãƒ»é©åˆ‡ãªæ²»ç™‚ã«ã‚ˆã‚Šã€é€²è¡Œã‚’å¤§å¹…ã«é…ã‚‰ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ç”Ÿæ¶¯ã€è¦–é‡ã¨è¦–åŠ›ã‚’ä¿ã¦ãŸãªã‚‰æ²»ç™‚ã¯æˆåŠŸã§ã™ã€‚
                    </div>
                </div>
            </div>

            <div class="question-card hidden" id="question3">
                <div class="question-number">å•é¡Œ 3</div>
                <div class="question-text">çœ¼åœ§ã®æ­£å¸¸å€¤ã®ç¯„å›²ã¯ã©ã‚Œã§ã—ã‚‡ã†ã‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="false">5ï½15mmHg</div>
                    <div class="option" data-answer="true">10ï½21mmHg</div>
                    <div class="option" data-answer="false">15ï½25mmHg</div>
                    <div class="option" data-answer="false">20ï½30mmHg</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>çœ¼åœ§ã®æ­£å¸¸å€¤ã¯10ï½21mmHgã§ã™ãŒã€çœ¼ã«ã‚ˆã£ã¦è€ãˆã‚‰ã‚Œã‚‹çœ¼åœ§ãŒç•°ãªã‚Šã¾ã™ã€‚ã¾ãŸã€çœ¼åœ§ã¯1æ—¥ã®ä¸­ã§ã‚‚4ï½5ç¨‹åº¦å¤‰å‹•ã—ã€å†¬ã¯é«˜ã„ã“ã¨ãŒå¤šã„ã§ã™ã€‚
                    <div class="important-note">
                        <strong>çŸ¥ã£ã¦ãŠããŸã„ã“ã¨ï¼š</strong>æ˜¼ã«ä¸€åº¦æ¸¬ã£ãŸãã‚‰ã„ã§ã¯ã€ãã®çœ¼ã®çœ¼åœ§ã®ã“ã¨ã¯åˆ†ã‹ã‚Šã¾ã›ã‚“ã€‚ç·‘å†…éšœã®æ²»ç™‚ã§çœ¼åœ§ã‚’ä¸‹ã’ã¦ã€é€²ã¿ãŒé…ããªã‚Œã°ãã®çœ¼ã«ã¨ã£ã¦è‰¯ã„çœ¼åœ§ã«ãªã£ãŸã¨ã„ãˆã¾ã™ã€‚
                    </div>
                </div>
            </div>

            <div class="question-card hidden" id="question4">
                <div class="question-number">å•é¡Œ 4</div>
                <div class="question-text">ç·‘å†…éšœã®æ—©æœŸç™ºè¦‹ãŒé›£ã—ã„ç†ç”±ã¨ã—ã¦æœ€ã‚‚é©åˆ‡ãªã®ã¯ã©ã‚Œã§ã—ã‚‡ã†ã‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="false">æ¤œæŸ»æŠ€è¡“ãŒç™ºé”ã—ã¦ã„ãªã„ã‹ã‚‰</div>
                    <div class="option" data-answer="true">è‡ªè¦šç—‡çŠ¶ãŒã»ã¨ã‚“ã©ãªã„ã‹ã‚‰</div>
                    <div class="option" data-answer="false">åŒ»å¸«ã®è¨ºæ–­ãŒå›°é›£ã ã‹ã‚‰</div>
                    <div class="option" data-answer="false">è²»ç”¨ãŒé«˜é¡ã ã‹ã‚‰</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>ç·‘å†…éšœã¯æ—©æœŸç™ºè¦‹ã«ã¯çœ¼ç§‘ã«è¡Œã‹ãªã„ã¨åˆ†ã‹ã‚‰ãªã„ã“ã¨ãŒå¤šãã€è¨ºæ–­ã•ã‚Œã¦ã‚‚æ—©æœŸã‚„ä¸­æœŸã§ã¯è‡ªè¦šç—‡çŠ¶ãŒãªã„ãŸã‚ã«ã€æ²»ç™‚ã‚’ã‚„ã‚ã¦ã—ã¾ã†æ–¹ãŒå¤šã„ã®ãŒå•é¡Œã§ã™ã€‚
                    <div class="medical-note">
                        <strong>é‡è¦ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼š</strong>è‡ªè¦šç—‡çŠ¶ãŒãªã„ã®ã¯ã¾ã ä½™è£•ãŒã‚ã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚è‡ªè¦šãŒãªã„ã†ã¡ã«è¦‹ã¤ã‹ã£ãŸäººã¯ã€æ—©ãè¦‹ã¤ã‹ã£ã¦ãƒ©ãƒƒã‚­ãƒ¼ã ã£ãŸã¨æ€ã£ã¦ãã ã•ã„ã€‚
                    </div>
                </div>
            </div>

            <div class="question-card hidden" id="question5">
                <div class="question-number">å•é¡Œ 5</div>
                <div class="question-text">é–‹æ”¾éš…è§’ç·‘å†…éšœã®åŸºæœ¬çš„ãªæ²»ç™‚æ–¹æ³•ã¯ä½•ã§ã—ã‚‡ã†ã‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="true">ç‚¹çœ¼è–¬ã«ã‚ˆã‚‹æ²»ç™‚</div>
                    <div class="option" data-answer="false">ãƒ¬ãƒ¼ã‚¶ãƒ¼æ²»ç™‚</div>
                    <div class="option" data-answer="false">æ‰‹è¡“æ²»ç™‚</div>
                    <div class="option" data-answer="false">å†…æœè–¬ã«ã‚ˆã‚‹æ²»ç™‚</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>é–‹æ”¾éš…è§’ç·‘å†…éšœã¯ã€çœ¼åœ§ã‚’ä¸‹ã’ã‚‹ã“ã¨ã—ã‹æ²»ç™‚ã®æ–¹æ³•ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ãã®ãŸã‚ã«ã€ã¾ãšã¯ç‚¹çœ¼è–¬ã«ã‚ˆã‚Šæ²»ç™‚ã‚’ã—ã¾ã™ã€‚ç‚¹çœ¼ã‚’ç¶šã‘ã¦ã‚‚é€²è¡Œã™ã‚‹ãªã‚‰ã€æ‰‹è¡“ã§çœ¼åœ§ã‚’ä¸‹ã’ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚
                    <div class="important-note">
                        <strong>æ²»ç™‚ã®ãƒã‚¤ãƒ³ãƒˆï¼š</strong>ã‚ã‚‹ç¨‹åº¦çœ¼åœ§ã‚’ä¸‹ã’ã‚‹ç›®æ¨™ã‚’ç«‹ã¦ã¾ã™ãŒã€åŠ¹æœã¯çœ¼ã«ã‚ˆã£ã¦ç•°ãªã‚‹ãŸã‚ã€è¿½åŠ ã§ä½•å‰¤ã‹ç‚¹çœ¼è–¬ã‚’ä½µç”¨ã™ã‚‹ã“ã¨ã‚‚å¤šã„ã§ã™ã€‚
                    </div>
                </div>
            </div>

            <div class="question-card hidden" id="question6">
                <div class="question-number">å•é¡Œ 6</div>
                <div class="question-text">ç‚¹çœ¼æ²»ç™‚ã§æœ€ã‚‚é‡è¦ãªã“ã¨ã¯ä½•ã§ã—ã‚‡ã†ã‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="false">1å›ã«å¤šãç‚¹çœ¼ã™ã‚‹ã“ã¨</div>
                    <div class="option" data-answer="true">ç¶™ç¶šã—ã¦ç¶šã‘ã‚‹ã“ã¨</div>
                    <div class="option" data-answer="false">è¤‡æ•°ã®è–¬ã‚’åŒæ™‚ã«ç‚¹çœ¼ã™ã‚‹ã“ã¨</div>
                    <div class="option" data-answer="false">çœ¼åœ§ãŒä¸‹ãŒã£ãŸã‚‰ä¸­æ­¢ã™ã‚‹ã“ã¨</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>ç‚¹çœ¼æ²»ç™‚ã¯ã€æ‚£è€…ã•ã‚“ãŒè‡ªã‚‰è¡Œã†æ²»ç™‚ã§ã™ã‹ã‚‰ã€æ‚£è€…é ¼ã‚Šã«ãªã‚Šã¾ã™ã€‚ç‚¹çœ¼ã‚’ç¶šã‘ãªã‘ã‚Œã°ã€æ²»ç™‚ã¯æˆåŠŸã—ã¾ã›ã‚“ã€‚æ±ºã—ã¦å¿˜ã‚Œãšé•·ãç¶šã‘ã‚‹ã“ã¨ãŒæœ€ã‚‚é‡è¦ã§ã™ã€‚
                    <div class="important-note">
                        <strong>ç‚¹çœ¼ã®ã‚³ãƒ„ï¼š</strong>1å›ã«1æ»´ã€ç•°ãªã‚‹è–¬ã¯5åˆ†ä»¥ä¸Šé–‹ã‘ã¦ç‚¹ã™ã“ã¨ã‚’å®ˆã£ã¦ãã ã•ã„ã€‚1å›ã«1æ»´ä»¥ä¸Šã¯ã ã‚ã§ã™ã€‚å…¥ã‚Œã°ååˆ†ã§ã™ã‹ã‚‰ç‚¹ã—ã™ããªã„ã‚ˆã†ã«ãŠé¡˜ã„ã—ã¾ã™ã€‚
                    </div>
                </div>
            </div>

            <div class="question-card hidden" id="question7">
                <div class="question-number">å•é¡Œ 7</div>
                <div class="question-text">è¦–é‡æ¤œæŸ»ã‚’å—ã‘ã‚‹éš›ã«å¤§åˆ‡ãªã“ã¨ã¯ä½•ã§ã—ã‚‡ã†ã‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="false">ã§ãã‚‹ã ã‘å¤šãã®ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã“ã¨</div>
                    <div class="option" data-answer="true">ç„¦ã‚‰ãšæ­£ç›´ã«æ¤œæŸ»ã‚’å—ã‘ã‚‹ã“ã¨</div>
                    <div class="option" data-answer="false">çœ¼ã‚’ç©æ¥µçš„ã«å‹•ã‹ã™ã“ã¨</div>
                    <div class="option" data-answer="false">è¦‹ãˆãªã„å…‰ã‚‚è¦‹ãˆãŸã¨ç­”ãˆã‚‹ã“ã¨</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>è¦–é‡æ¤œæŸ»ã¯ã€ãã®ã¨ãã®æ‚£è€…ã•ã‚“ã®æ°—æŒã¡ã‚„ä½“èª¿ãŒã‚ˆãåæ˜ ã•ã‚Œã‚‹æ¤œæŸ»ã§ã™ã€‚è½ã¡è¾¼ã‚“ã§ã„ãŸã‚Šã€ç·Šå¼µã—ã¦ãƒ‰ã‚­ãƒ‰ã‚­ã—ã¦æ¤œæŸ»ã‚’å—ã‘ã‚‹ã¨ã†ã¾ãã„ãã¾ã›ã‚“ã€‚
                    <div class="medical-note">
                        <strong>æ¤œæŸ»ã®ã‚³ãƒ„ï¼š</strong>è¦–é‡æ¤œæŸ»ã¯æ­£å¸¸ãªæ–¹ã§ã‚‚è¦‹ãˆãªã„å…‰ã‚’æç¤ºã—ãŸã‚Šã—ã¦æ¤œæŸ»ã™ã‚‹ã®ã§ã€ç„¦ã‚‰ãšæ­£ç›´ã«å—ã‘ã‚‹ã‚ˆã†ã«ãŠé¡˜ã„ã—ã¾ã™ã€‚çœ¼ã‚’å‹•ã‹ã™ã¨æ¤œæŸ»çµæœãŒè‰¯ãå‡ºã¦ã—ã¾ã„ã¾ã™ã€‚
                    </div>
                </div>
            </div>

            <div class="question-card hidden" id="question8">
                <div class="question-number">å•é¡Œ 8</div>
                <div class="question-text">ç·‘å†…éšœã¨è¨ºæ–­ã•ã‚ŒãŸæ™‚ã®å¿ƒæ§‹ãˆã¨ã—ã¦æœ€ã‚‚é©åˆ‡ãªã®ã¯ã©ã‚Œã§ã—ã‚‡ã†ã‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="false">ã™ãã«ä»•äº‹ã‚’è¾ã‚ã‚‹æº–å‚™ã‚’ã™ã‚‹</div>
                    <div class="option" data-answer="false">äººç”Ÿè¨­è¨ˆã‚’å¤§å¹…ã«å¤‰æ›´ã™ã‚‹</div>
                    <div class="option" data-answer="true">æ—©ãè¦‹ã¤ã‹ã£ã¦é‹ãŒè‰¯ã‹ã£ãŸã¨æ€ã£ã¦å®šæœŸé€šé™¢ã™ã‚‹</div>
                    <div class="option" data-answer="false">å¤±æ˜ã¯é¿ã‘ã‚‰ã‚Œãªã„ã¨è«¦ã‚ã‚‹</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>ç·‘å†…éšœã¨è¨ºæ–­ã•ã‚ŒãŸã‚‰ã€æ—©ãè¦‹ã¤ã‹ã£ã¦é‹ãŒè‰¯ã‹ã£ãŸã¨æ€ã£ã¦ã€å®šæœŸçš„ã«é€šé™¢ã‚’ã—ã¦ãã ã•ã„ã€‚ä»•äº‹ã‚„ç”Ÿæ´»ã‚’å¤‰ãˆã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
                    <div class="important-note">
                        <strong>å¤§åˆ‡ãªè€ƒãˆæ–¹ï¼š</strong>ã‹ãªã‚Šã®é«˜çœ¼åœ§ã‚„æœ«æœŸã®æ–¹ä»¥å¤–ã¯ã€ã˜ã£ãã‚Šæ²»ç™‚ã«å°‚å¿µã—ã€ä»•äº‹ã‚„ç”Ÿæ´»ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å¤‰ãˆãšã€ã‚ã›ã‚‰ãšéã”ã™ã“ã¨ãŒé‡è¦ã§ã™ã€‚
                    </div>
                </div>
            </div>

            <div class="question-card hidden" id="question9">
                <div class="question-number">å•é¡Œ 9</div>
                <div class="question-text">ç·‘å†…éšœã§è‡ªè¦šç—‡çŠ¶ãŒå‡ºã¦ã„ã‚‹å ´åˆã€ã©ã®ã‚ˆã†ãªçŠ¶æ…‹ã§ã—ã‚‡ã†ã‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="false">ã¾ã åˆæœŸæ®µéšã§ä½™è£•ãŒã‚ã‚‹</div>
                    <div class="option" data-answer="true">ä¸­å¿ƒã«è¦–é‡æ¬ æãŒå‡ºã¦ã„ã¦ãƒ”ãƒ³ãƒã®çŠ¶æ…‹</div>
                    <div class="option" data-answer="false">æ²»ç™‚ã®å¿…è¦ãŒãªã„è»½åº¦ã®çŠ¶æ…‹</div>
                    <div class="option" data-answer="false">æ‰‹è¡“ãŒå¿…è¦ãªæœ«æœŸã®çŠ¶æ…‹</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>éœã‚“ã ã‚Šã€æ–‡å­—ã‚’èª­ã¿é£›ã°ã—ãŸã‚Šã¨ã„ã£ãŸè‡ªè¦šç—‡çŠ¶ãŒå‡ºã¦ã„ã‚‹å ´åˆã¯ã€ä¸­å¿ƒã«è¦–é‡æ¬ æãŒå‡ºã¦ã„ã¾ã™ã€‚ã“ã®æ§˜ãªè‡ªè¦šç—‡çŠ¶ãŒå‡ºã¦ã„ã‚‹å ´åˆã¯ãƒ”ãƒ³ãƒã§ã™ã€‚
                    <div class="medical-note">
                        <strong>é‡è¦ï¼š</strong>ç·‘å†…éšœã®è¦–é‡æ¬ æã¯æš—ããªã‚Šã¾ã›ã‚“ã€‚éœã‚“ã§ãã¦ãã®ã†ã¡æ¿ƒã„æ˜ã‚‹ã„éœ§ã®ä¸­ã«ã„ã‚‹ã‚ˆã†ã«æ„Ÿã˜ã¾ã™ã€‚ç©æ¥µçš„ã«æ²»ç™‚ã«å‚åŠ ã—ã¦ã€ä½•ã¨ã‹ç”Ÿæ¶¯ã€è¦–é‡ã‚„è¦–åŠ›ã‚’ä¿ã¦ã‚‹ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€‚
                    </div>
                </div>
            </div>

            <div class="question-card hidden" id="question10">
                <div class="question-number">å•é¡Œ 10</div>
                <div class="question-text">ç‚¹çœ¼è–¬ã®å‰¯ä½œç”¨ã¨ã—ã¦æœ€ã‚‚ä¸€èˆ¬çš„ãªã‚‚ã®ã¯ä½•ã§ã—ã‚‡ã†ã‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="true">çœ¼ã®å……è¡€</div>
                    <div class="option" data-answer="false">è¦–åŠ›ä½ä¸‹</div>
                    <div class="option" data-answer="false">çœ¼åœ§ä¸Šæ˜‡</div>
                    <div class="option" data-answer="false">é ­ç—›</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>ç›®è–¬ã«ã¯å¿…ãšå‰¯ä½œç”¨ãŒã‚ã‚Šã¾ã™ã€‚ã»ã¨ã‚“ã©ã«å…±é€šã™ã‚‹å‰¯ä½œç”¨ã¯å……è¡€ã§ã™ãŒã€ãŸã„ã¦ã„ã®æ–¹ãŒå—ã‘å…¥ã‚Œã‚‰ã‚Œã¾ã™ã€‚ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼ãŒã§ãŸã‚‰ä¸­æ­¢ã§ã™ã€‚
                    <div class="important-note">
                        <strong>æ³¨æ„ç‚¹ï¼š</strong>ç›®è–¬ã§ã€å–˜æ¯ã‚„æ¯åˆ‡ã‚Œã€å‹•æ‚¸ã€ã‚ã¾ã„ã€ãªã©ã®ç—‡çŠ¶ã‚’èµ·ã“ã™ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã‹ã‚‰ã€ãã®ã‚ˆã†ã«æ„Ÿã˜ãŸã‚‰ä¸»æ²»åŒ»ã«ç›¸è«‡ã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚
                    </div>
                </div>
            </div>

            <div class="question-card hidden" id="question11">
                <div class="question-number">å•é¡Œ 11</div>
                <div class="question-text">åˆæœŸã®é–‹æ”¾éš…è§’ç·‘å†…éšœã§ã€çœ¼åœ§ãŒã€Œ18mmHgã€ã®æ‚£è€…ã•ã‚“ã«ã¤ã„ã¦æ­£ã—ã„ã®ã¯ã©ã‚Œã§ã—ã‚‡ã†ã‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="false">æ­£å¸¸å€¤ãªã®ã§æ²»ç™‚ã¯ä¸è¦</div>
                    <div class="option" data-answer="true">ãã®çœ¼ã«åˆã£ãŸé©åˆ‡ãªçœ¼åœ§ã¾ã§ä¸‹ã’ã‚‹å¿…è¦ãŒã‚ã‚‹</div>
                    <div class="option" data-answer="false">ã™ãã«æ‰‹è¡“ãŒå¿…è¦</div>
                    <div class="option" data-answer="false">çµŒéè¦³å¯Ÿã®ã¿ã§ååˆ†</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>çœ¼åœ§ãŒæ­£å¸¸ç¯„å›²å†…ï¼ˆ10-21mmHgï¼‰ã§ã‚‚ã€ãã®çœ¼ã«ã¨ã£ã¦é«˜ã™ãã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚åˆæœŸç·‘å†…éšœã§ã¯ã€ãã®æ‚£è€…ã•ã‚“ã®çœ¼ã«é©ã—ãŸã€Œç›®æ¨™çœ¼åœ§ã€ã¾ã§ä¸‹ã’ã‚‹ã“ã¨ã§ã€é€²è¡Œã‚’é˜²ãã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã‚Œã‚’ã€Œæ­£å¸¸çœ¼åœ§ç·‘å†…éšœã€ã¨å‘¼ã¶ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚
                </div>
            </div>

            <div class="question-card hidden" id="question12">
                <div class="question-number">å•é¡Œ 12</div>
                <div class="question-text">åˆæœŸã®é–‹æ”¾éš…è§’ç·‘å†…éšœã¨è¨ºæ–­ã•ã‚ŒãŸæ‚£è€…ã•ã‚“ã®ç†æƒ³çš„ãªé€šé™¢é–“éš”ã¯ã©ã‚Œã§ã—ã‚‡ã†ã‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="false">åŠå¹´ã«1å›</div>
                    <div class="option" data-answer="true">2-3ãƒ¶æœˆã«1å›</div>
                    <div class="option" data-answer="false">1å¹´ã«1å›</div>
                    <div class="option" data-answer="false">ç—‡çŠ¶ãŒå‡ºãŸã¨ãã®ã¿</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>åˆæœŸç·‘å†…éšœã§ã¯ã€æ²»ç™‚åŠ¹æœã®ç¢ºèªã¨ç—…æ°—ã®é€²è¡Œãƒã‚§ãƒƒã‚¯ã®ãŸã‚ã€2-3ãƒ¶æœˆã«1å›ã®å®šæœŸé€šé™¢ãŒæ¨å¥¨ã•ã‚Œã¾ã™ã€‚çœ¼åœ§æ¸¬å®šã€è¦–é‡æ¤œæŸ»ã€çœ¼åº•æ¤œæŸ»ã‚’å®šæœŸçš„ã«è¡Œã„ã€ç‚¹çœ¼åŠ¹æœã‚’è©•ä¾¡ã—ã¾ã™ã€‚è‡ªè¦šç—‡çŠ¶ãŒãªãã¦ã‚‚ç¶™ç¶šé€šé™¢ãŒé‡è¦ã§ã™ã€‚
                </div>
            </div>

            <div class="question-card hidden" id="question13">
                <div class="question-number">å•é¡Œ 13</div>
                <div class="question-text">ç·‘å†…éšœã®è¨ºæ–­ã§ã€OCTï¼ˆçœ¼åº•ä¸‰æ¬¡å…ƒç”»åƒè§£æï¼‰æ¤œæŸ»ã®ç›®çš„ã¨ã—ã¦æœ€ã‚‚é©åˆ‡ãªã®ã¯ã©ã‚Œã§ã—ã‚‡ã†ã‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="false">ç™½å†…éšœã®ç¨‹åº¦ã‚’èª¿ã¹ã‚‹</div>
                    <div class="option" data-answer="false">çœ¼åœ§ã‚’æ­£ç¢ºã«æ¸¬å®šã™ã‚‹</div>
                    <div class="option" data-answer="true">è¦–ç¥çµŒã®åšã¿ã‚’è©³ã—ãèª¿ã¹ã‚‹</div>
                    <div class="option" data-answer="false">è§’è†œã®çŠ¶æ…‹ã‚’ç¢ºèªã™ã‚‹</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>OCTæ¤œæŸ»ã§ã¯ã€è¦–ç¥çµŒç·šç¶­å±¤ã®åšã¿ã‚’æ•°å€¤ã§æ¸¬å®šã§ãã¾ã™ã€‚åˆæœŸç·‘å†…éšœã§ã¯è¦–é‡ã«ç•°å¸¸ãŒå‡ºã‚‹å‰ã«ã€ã™ã§ã«è¦–ç¥çµŒãŒè–„ããªã£ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ã“ã®æ¤œæŸ»ã«ã‚ˆã‚Šã€ã‚ˆã‚Šæ—©æœŸã®è¨ºæ–­ã¨çµŒéè¦³å¯ŸãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚
                </div>
            </div>

            <div class="question-card hidden" id="question14">
                <div class="question-number">å•é¡Œ 14</div>
                <div class="question-text">é©åˆ‡ãªæ²»ç™‚ã‚’å—ã‘ã¦ã„ã‚‹åˆæœŸç·‘å†…éšœã®æ‚£è€…ã•ã‚“ã®å¤šãã¯ã€å°†æ¥çš„ã«ã©ã†ãªã‚‹ã§ã—ã‚‡ã†ã‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="false">ã»ã¼ç¢ºå®Ÿã«å¤±æ˜ã™ã‚‹</div>
                    <div class="option" data-answer="false">å¿…ãšæ‰‹è¡“ãŒå¿…è¦ã«ãªã‚‹</div>
                    <div class="option" data-answer="true">ç”Ÿæ¶¯ã«ã‚ãŸã£ã¦è¦–æ©Ÿèƒ½ã‚’ä¿ã¦ã‚‹</div>
                    <div class="option" data-answer="false">æ•°å¹´ã§æ€¥æ¿€ã«æ‚ªåŒ–ã™ã‚‹</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>åˆæœŸã§ç™ºè¦‹ã•ã‚Œã€é©åˆ‡ãªæ²»ç™‚ã‚’ç¶™ç¶šã—ã¦ã„ã‚‹ç·‘å†…éšœæ‚£è€…ã•ã‚“ã®å¤šãã¯ã€ç”Ÿæ¶¯ã«ã‚ãŸã£ã¦æ—¥å¸¸ç”Ÿæ´»ã«æ”¯éšœã®ãªã„è¦–æ©Ÿèƒ½ã‚’ä¿ã¤ã“ã¨ãŒã§ãã¾ã™ã€‚å¤§åˆ‡ãªã®ã¯ã€å®šæœŸé€šé™¢ã¨ç‚¹çœ¼æ²»ç™‚ã®ç¶™ç¶šã§ã™ã€‚éåº¦ã«å¿ƒé…ã›ãšã€åŒ»å¸«ã¨å”åŠ›ã—ã¦æ²»ç™‚ã‚’ç¶šã‘ã‚‹ã“ã¨ãŒé‡è¦ã§ã™ã€‚
                </div>
            </div>

            <div class="question-card hidden" id="question15">
                <div class="question-number">å•é¡Œ 15</div>
                <div class="question-text">2ç¨®é¡ã®ç‚¹çœ¼è–¬ãŒå‡¦æ–¹ã•ã‚ŒãŸå ´åˆã€ç‚¹çœ¼ã®é–“éš”ã¯ã©ã®ãã‚‰ã„ç©ºã‘ã‚‹ã¹ãã§ã—ã‚‡ã†ã‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="false">ã™ãã«ç¶šã‘ã¦ç‚¹çœ¼ã—ã¦ã‚ˆã„</div>
                    <div class="option" data-answer="true">5åˆ†ä»¥ä¸Šé–“éš”ã‚’ç©ºã‘ã‚‹</div>
                    <div class="option" data-answer="false">1æ™‚é–“ä»¥ä¸Šé–“éš”ã‚’ç©ºã‘ã‚‹</div>
                    <div class="option" data-answer="false">åŒã˜æ™‚é–“ã«åŒæ™‚ã«ç‚¹çœ¼ã™ã‚‹</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>è¤‡æ•°ã®ç‚¹çœ¼è–¬ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯ã€5åˆ†ä»¥ä¸Šé–“éš”ã‚’ç©ºã‘ã¦ç‚¹çœ¼ã—ã¾ã™ã€‚é€£ç¶šã—ã¦ç‚¹çœ¼ã™ã‚‹ã¨ã€å…ˆã«ç‚¹çœ¼ã—ãŸè–¬ãŒå¾Œã®è–¬ã§æ´—ã„æµã•ã‚Œã¦ã—ã¾ã„ã€åŠ¹æœãŒæ¸›å°‘ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚æ™‚é–“ã«ä½™è£•ã‚’æŒã£ã¦ç‚¹çœ¼ã—ã¾ã—ã‚‡ã†ã€‚
                </div>
            </div>

            <div class="question-card hidden" id="question16">
                <div class="question-number">å•é¡Œ 16</div>
                <div class="question-text">ç·‘å†…éšœã®æ‚£è€…ã•ã‚“ãŒè¦–é‡æ¤œæŸ»ã‚’å—ã‘ã‚‹ç†æƒ³çš„ãªé »åº¦ã¯ã©ã‚Œã§ã—ã‚‡ã†ã‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="false">æ¯æœˆ1å›</div>
                    <div class="option" data-answer="true">åŠå¹´ã«1å›</div>
                    <div class="option" data-answer="false">2å¹´ã«1å›</div>
                    <div class="option" data-answer="false">ç—‡çŠ¶ãŒæ‚ªåŒ–ã—ãŸæ™‚ã®ã¿</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>åˆæœŸç·‘å†…éšœã§ã¯ã€è¦–é‡æ¤œæŸ»ã¯åŠå¹´ã«1å›ç¨‹åº¦ã®é »åº¦ã§è¡Œã†ã®ãŒä¸€èˆ¬çš„ã§ã™ã€‚ç—…æ°—ã®é€²è¡Œã‚’æ—©æœŸã«ç™ºè¦‹ã—ã€æ²»ç™‚åŠ¹æœã‚’è©•ä¾¡ã™ã‚‹ãŸã‚ã«å®šæœŸçš„ãªæ¤œæŸ»ãŒé‡è¦ã§ã™ã€‚é€²è¡ŒãŒé€Ÿã„å ´åˆã‚„æ²»ç™‚å¤‰æ›´æ™‚ã«ã¯ã‚ˆã‚Šé »ç¹ã«è¡Œã†ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚
                </div>
            </div>

            <div class="question-card hidden" id="question17">
                <div class="question-number">å•é¡Œ 17</div>
                <div class="question-text">è¦–é‡æ¤œæŸ»ã‚’åˆã‚ã¦å—ã‘ã‚‹æ‚£è€…ã•ã‚“ã¸ã®äº‹å‰èª¬æ˜ã¨ã—ã¦æœ€ã‚‚é‡è¦ãªã®ã¯ã©ã‚Œã§ã—ã‚‡ã†ã‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="false">ã€Œç—›ããªã„æ¤œæŸ»ãªã®ã§å¿ƒé…ã„ã‚Šã¾ã›ã‚“ã€</div>
                    <div class="option" data-answer="true">ã€Œé›†ä¸­åŠ›ãŒå¿…è¦ã§æ™‚é–“ãŒã‹ã‹ã‚Šã¾ã™ãŒã€æ­£ç›´ã«ç­”ãˆã¦ãã ã•ã„ã€</div>
                    <div class="option" data-answer="false">ã€Œå…¨éƒ¨ã®å…‰ãŒè¦‹ãˆã‚‹ã‚ˆã†é ‘å¼µã£ã¦ãã ã•ã„ã€</div>
                    <div class="option" data-answer="false">ã€Œç–²ã‚ŒãŸã‚‰é€”ä¸­ã§ä¼‘æ†©ã§ãã¾ã™ã€</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>è¦–é‡æ¤œæŸ»ã¯é›†ä¸­åŠ›ã‚’è¦ã—ã€è¦‹ãˆãªã„å…‰ã‚‚ã‚ã‚‹æ­£å¸¸ãªæ¤œæŸ»ã§ã‚ã‚‹ã“ã¨ã‚’äº‹å‰ã«èª¬æ˜ã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã™ã€‚ã€Œé ‘å¼µã£ã¦è¦‹ã‚ˆã†ã¨ã™ã‚‹ã€ã¨æ­£ç¢ºãªçµæœãŒå¾—ã‚‰ã‚Œã¾ã›ã‚“ã€‚ãƒªãƒ©ãƒƒã‚¯ã‚¹ã—ã¦æ­£ç›´ã«åå¿œã™ã‚‹ã“ã¨ã‚’ä¼ãˆã¾ã—ã‚‡ã†ã€‚
                </div>
            </div>

            <div class="buttons">
                <button class="next-button hidden" onclick="nextQuestion()">æ¬¡ã®å•é¡Œã¸</button>
                <button class="result-button hidden" onclick="showFinalScore()">ğŸŠ çµæœç™ºè¡¨ã¸ ğŸŠ</button>
            </div>
        </div>
    </div>

    <script src="quiz-config.js"></script>
    <script>
        const QUIZ_ID = 'ryokunaisho';
        const TOTAL_QUESTIONS = 17;

        // å…¨ã‚¯ã‚¤ã‚ºä¸€è¦§ï¼ˆã‚·ãƒ£ãƒƒãƒ•ãƒ«æ©Ÿèƒ½ç”¨ï¼‰
        const ALL_QUIZZES = [
            'ã‚³ãƒ³ã‚¿ã‚¯ãƒˆå‡¦æ–¹ã®åŸºæœ¬ã‚¯ã‚¤ã‚º.html',
            'å¤§äººã®é ãç”¨ãƒ¡ã‚¬ãƒåˆã‚ã›ã‚¯ã‚¤ã‚º.html',
            'å¼±è¦–ã‚¯ã‚¤ã‚º.html',
            'æ–œè¦–ã‚¯ã‚¤ã‚º.html',
            'ç™½å†…éšœã«ã¤ã„ã¦ã‚¯ã‚¤ã‚º.html',
            'ç·‘å†…éšœã«ã¤ã„ã¦ã‚¯ã‚¤ã‚º.html',
            'è€çœ¼é¡åˆã‚ã›_ã‚¯ã‚¤ã‚º.html',
            'è‡ªæ²»ä½“ã®ç·‘å†…éšœæ¤œè¨ºã®åˆ¶åº¦ã®ã‚¯ã‚¤ã‚º.html',
            'èŠ±ç²‰ç—‡ã«ã¤ã„ã¦ã®ã‚¯ã‚¤ã‚º.html',
            'è¿‘è¦–ã«ã¤ã„ã¦ã®ã‚¯ã‚¤ã‚º.html',
            'é™¢å†…ãƒ«ãƒ¼ãƒ«ç¢ºèªã‚¯ã‚¤ã‚º.html'
        ];
        const CURRENT_QUIZ_FILE = decodeURIComponent(location.pathname.split('/').pop());

        let currentQuestion = 1;
        let score = 0;
        let totalQuestions = 17;
        let questionList = [];
        let isDaily = false;

        const allQuestions = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17];

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«å­¦ç¿’çŠ¶æ³ã‚’æ›´æ–°
        document.addEventListener('DOMContentLoaded', function() {
            updateProgressStatus();

            // URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ãƒã‚§ãƒƒã‚¯
            const urlParams = new URLSearchParams(window.location.search);
            const mode = urlParams.get('mode');

            // ãƒ¢ãƒ¼ãƒ‰ãŒæŒ‡å®šã•ã‚Œã¦ã„ãŸã‚‰è‡ªå‹•é–‹å§‹
            if (mode === 'daily3' || mode === 'full') {
                startQuiz(mode);
            }
        });

        // å­¦ç¿’çŠ¶æ³ã®è¡¨ç¤ºã‚’æ›´æ–°
        function updateProgressStatus() {
            const incorrectList = getIncorrectQuestions(QUIZ_ID);
            const unansweredList = getUnansweredQuestions(QUIZ_ID, TOTAL_QUESTIONS);
            const correctNum = TOTAL_QUESTIONS - incorrectList.length - unansweredList.length;

            const incorrectCount = document.getElementById('incorrectCount');
            const unansweredCount = document.getElementById('unansweredCount');
            const correctCount = document.getElementById('correctCount');
            const totalQuestionsCount = document.getElementById('totalQuestionsCount');

            if (incorrectCount) {
                incorrectCount.textContent = `${incorrectList.length}å•`;
            }
            if (unansweredCount) {
                unansweredCount.textContent = `${unansweredList.length}å•`;
            }
            if (correctCount) {
                correctCount.textContent = `${correctNum}å•`;
            }
            if (totalQuestionsCount) {
                totalQuestionsCount.textContent = `${TOTAL_QUESTIONS}å•`;
            }
        }

        // é…åˆ—ã‚·ãƒ£ãƒƒãƒ•ãƒ«
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function flashCorrect(element) {
            const card = element.closest('.question-card');
            if (card) {
                card.classList.add('correct-flash');
                setTimeout(() => card.classList.remove('correct-flash'), 400);
            }
        }

        function celebrateResult(isPerfect) {
            if (navigator.vibrate) {
                if (isPerfect) {
                    navigator.vibrate([100, 50, 100, 50, 100]);
                } else {
                    navigator.vibrate([50, 30, 50]);
                }
            }

            const emojis = isPerfect
                ? ['ğŸ‰', 'ğŸ†', 'ğŸ‘‘', 'ğŸ’¯', 'â­', 'âœ¨', 'ğŸŒŸ', 'ğŸ¥‡']
                : ['ğŸ‰', 'â­', 'âœ¨', 'ğŸ‘', 'ğŸŠ'];
            const count = isPerfect ? 15 : 8;
            const centerX = window.innerWidth / 2;
            const centerY = window.innerHeight / 3;

            for (let i = 0; i < count; i++) {
                setTimeout(() => {
                    const emoji = document.createElement('div');
                    emoji.className = 'celebrate-emoji';
                    emoji.textContent = emojis[Math.floor(Math.random() * emojis.length)];
                    emoji.style.left = (centerX - 100 + Math.random() * 200) + 'px';
                    emoji.style.top = (centerY + Math.random() * 50) + 'px';
                    document.body.appendChild(emoji);
                    setTimeout(() => emoji.remove(), 1000);
                }, i * 100);
            }
        }

        function startQuiz(mode) {
            document.querySelector('h1').classList.add('hidden');
            document.querySelector('.subtitle').classList.add('hidden');
            document.getElementById('modeSelection').classList.add('hidden');
            document.getElementById('quizArea').classList.remove('hidden');
            document.getElementById('quizTitleHeader').classList.remove('hidden');

            if (mode === 'daily3') {
                isDaily = true;
                totalQuestions = 3;
                questionList = getWeightedRandomQuestions(QUIZ_ID, TOTAL_QUESTIONS, 3);
            } else {
                isDaily = false;
                totalQuestions = TOTAL_QUESTIONS;
                questionList = [...allQuestions];
            }

            for (let i = 1; i <= TOTAL_QUESTIONS; i++) {
                const questionElement = document.getElementById(`question${i}`);
                if (questionList.includes(i)) {
                    if (i === questionList[0]) {
                        questionElement.classList.remove('hidden');
                    } else {
                        questionElement.classList.add('hidden');
                    }
                } else {
                    if(document.getElementById(`question${i}`)){
                       document.getElementById(`question${i}`).style.display = 'none';
                    }
                }
            }
            
            currentQuestion = 0;
            updateQuestionNumbers();
            document.getElementById('total').textContent = totalQuestions;
            shuffleOptions(questionList[0]);
            updateProgress();
        }

        function getRandomQuestions(count) {
            const shuffled = [...allQuestions].sort(() => 0.5 - Math.random());
            return shuffled.slice(0, count);
        }

        function updateQuestionNumbers() {
            questionList.forEach((questionId, index) => {
                const questionElement = document.getElementById(`question${questionId}`);
                if (questionElement) {
                    const questionNumber = questionElement.querySelector('.question-number');
                    questionNumber.textContent = `å•é¡Œ ${index + 1}`;
                }
            });
        }

        function shuffleOptions(questionId) {
            if (!questionId) return;
            const container = document
                .getElementById(`question${questionId}`)
                .querySelector('.options');
            if (!container) return;
            
            for (let i = container.children.length; i >= 0; i--) {
                const rand = Math.floor(Math.random() * i);
                if (container.children[rand]) {
                    container.appendChild(container.children[rand]);
                }
            }
        }

        function updateProgress() {
            const progress = ((currentQuestion + 1) / totalQuestions) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQ').textContent = currentQuestion + 1;
        }

        function selectAnswer(selectedOption) {
            const currentQuestionId = questionList[currentQuestion];
            const currentQuestionElement = document.getElementById(`question${currentQuestionId}`);
            const options = currentQuestionElement.querySelectorAll('.option');
            const feedback = currentQuestionElement.querySelector('.feedback');
            const explanation = currentQuestionElement.querySelector('.explanation');
            const nextButton = document.querySelector('.next-button');
            const resultButton = document.querySelector('.result-button');
            
            const isCorrect = selectedOption.dataset.answer === 'true';
            let correctAnswerText = '';
            
            options.forEach(option => {
                if (option.dataset.answer === 'true') {
                    correctAnswerText = option.textContent;
                }
            });
            
            options.forEach(option => {
                option.classList.add('disabled');
                if (option.dataset.answer === 'true') {
                    option.classList.add('correct');
                } else if (option === selectedOption && option.dataset.answer === 'false') {
                    option.classList.add('incorrect');
                }
            });

            if (isCorrect) {
                feedback.textContent = 'ğŸ‰ æ­£è§£ã§ã™ï¼';
                feedback.className = 'feedback correct';
                score++;
                flashCorrect(selectedOption);
            } else {
                feedback.textContent = `âŒ ä¸æ­£è§£ã§ã™ã€‚æ­£è§£ã¯ã€Œ${correctAnswerText}ã€ã§ã™ã€‚`;
                feedback.className = 'feedback incorrect';
            }

            // å•é¡Œã”ã¨ã®çµæœã‚’è¨˜éŒ²ï¼ˆå¾©ç¿’ãƒ»æœªæŒ‘æˆ¦ãƒ¢ãƒ¼ãƒ‰ç”¨ï¼‰
            if (typeof recordQuestionResult === 'function') {
                recordQuestionResult(QUIZ_ID, currentQuestionId, isCorrect);
            }

            feedback.style.display = 'block';
            explanation.classList.remove('hidden');

            if (currentQuestion < totalQuestions - 1) {
                nextButton.classList.remove('hidden');
            } else {
                resultButton.classList.remove('hidden');
            }

            updateScore();

            // ã‚¹ãƒãƒ›ç”¨ï¼šå›ç­”å¾Œã«ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãŒç”»é¢ä¸Šéƒ¨ã«æ¥ã‚‹ã‚ˆã†ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
            setTimeout(() => {
                feedback.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }, 100);
        }

        function nextQuestion() {
            const currentQuestionId = questionList[currentQuestion];
            document.getElementById(`question${currentQuestionId}`).classList.add('hidden');
            
            currentQuestion++;
            const nextQuestionId = questionList[currentQuestion];
            
            shuffleOptions(nextQuestionId);
            document.getElementById(`question${nextQuestionId}`).classList.remove('hidden');
            document.querySelector('.next-button').classList.add('hidden');
            updateProgress();
        }

        function showFinalScore() {
            questionList.forEach(questionId => {
                const qElem = document.getElementById(`question${questionId}`);
                if (qElem) {
                    qElem.classList.add('hidden');
                }
            });
            document.querySelector('.next-button').classList.add('hidden');
            document.querySelector('.result-button').classList.add('hidden');
            document.querySelector('.quiz-status').classList.add('hidden');

            const percentage = Math.round((score / totalQuestions) * 100);
            let title, message;

            if (isDaily) {
                if (score === totalQuestions) {
                    title = 'ğŸ‰ ç´ æ™´ã‚‰ã—ã„ï¼ ğŸ‰';
                    message = `${totalQuestions}å•å…¨å•æ­£è§£ï¼ç·‘å†…éšœã«ã¤ã„ã¦ ã¨ã¦ã‚‚ã‚ˆãç†è§£ã•ã‚Œã¦ã„ã¾ã™ã€‚\nã“ã®çŸ¥è­˜ã‚’æ´»ã‹ã—ã¦ã€å®‰å¿ƒã—ã¦æ²»ç™‚ã«å–ã‚Šçµ„ã‚“ã§ãã ã•ã„ã€‚`;
                } else if (score >= Math.ceil(totalQuestions * 0.8)) {
                    title = 'ğŸ‘ ã‚ˆãç†è§£ã•ã‚Œã¦ã„ã¾ã™ï¼ ğŸ‘';
                    message = `åŸºæœ¬çš„ãªãƒã‚¤ãƒ³ãƒˆã¯ ã‚ˆãæŠ¼ã•ãˆã‚‰ã‚Œã¦ã„ã¾ã™ã€‚\né–“é•ãˆãŸç®‡æ‰€ã‚’ç¢ºèªã—ã¦ã€ã•ã‚‰ã«ç†è§£ã‚’æ·±ã‚ã¾ã—ã‚‡ã†ã€‚`;
                } else {
                    title = 'ğŸ“– å­¦ç¿’ã‚’ç¶šã‘ã¾ã—ã‚‡ã†ï¼ ğŸ“–';
                    message = `ç·‘å†…éšœã«ã¤ã„ã¦ ç†è§£ã‚’æ·±ã‚ã‚‹è‰¯ã„æ©Ÿä¼šã«ãªã‚Šã¾ã—ãŸã€‚\nç—…æ°—ã®ã“ã¨ã‚’ã‚ˆãçŸ¥ã‚‹ã“ã¨ã§ã€ã‚ˆã‚Šå®‰å¿ƒã—ã¦æ²»ç™‚ã«å–ã‚Šçµ„ã‚ã¾ã™ã€‚`;
                }
            } else {
                if (score === totalQuestions) {
                    title = 'ğŸ† å®Œç’§ãªç†è§£åº¦ï¼ ğŸ†';
                    message = `å…¨å•æ­£è§£ï¼ç·‘å†…éšœã«ã¤ã„ã¦ éå¸¸ã«ã‚ˆãç†è§£ã•ã‚Œã¦ã„ã¾ã™ã€‚\nã“ã®çŸ¥è­˜ãŒã‚ã‚Œã°ã€è‡ªä¿¡ã‚’æŒã£ã¦æ²»ç™‚ã«å–ã‚Šçµ„ã‚€ã“ã¨ãŒã§ãã¾ã™ã€‚\nå®šæœŸçš„ãªé€šé™¢ã¨ç‚¹çœ¼æ²»ç™‚ã‚’ç¶šã‘ã¦ã€ç”Ÿæ¶¯ã«ã‚ãŸã£ã¦è¦–æ©Ÿèƒ½ã‚’ä¿ã£ã¦ã„ãã¾ã—ã‚‡ã†ã€‚`;
                } else if (score >= totalQuestions * 0.9) {
                    title = 'ğŸŒŸ å„ªç§€ãªç†è§£åº¦ï¼ ğŸŒŸ';
                    message = `ã¨ã¦ã‚‚è‰¯ã„çµæœã§ã™ï¼ç·‘å†…éšœã®é‡è¦ãƒã‚¤ãƒ³ãƒˆã‚’ ã—ã£ã‹ã‚Šã¨ç†è§£ã•ã‚Œã¦ã„ã¾ã™ã€‚\nå°‘ã—å¾©ç¿’ã™ã‚Œã°ã€ã•ã‚‰ã«å®Œç’§ãªçŸ¥è­˜ã«ãªã‚Šã¾ã™ã€‚\nå®‰å¿ƒã—ã¦åŒ»å¸«ã¨æ²»ç™‚è¨ˆç”»ã‚’ç«‹ã¦ã¦ã„ã£ã¦ãã ã•ã„ã€‚`;
                } else if (score >= totalQuestions * 0.8) {
                    title = 'ğŸ“š è‰¯ã„ç†è§£åº¦ã§ã™ï¼ ğŸ“š';
                    message = `åŸºæœ¬çš„ãªçŸ¥è­˜ã¯ ã—ã£ã‹ã‚Šã¨èº«ã«ã¤ã„ã¦ã„ã¾ã™ã€‚\né–“é•ãˆãŸéƒ¨åˆ†ã‚’è¦‹ç›´ã™ã“ã¨ã§ã€ã‚ˆã‚Šæ·±ã„ç†è§£ãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚\nç—…æ°—ã«ã¤ã„ã¦çŸ¥ã‚‹ã“ã¨ã¯ã€æ²»ç™‚æˆåŠŸã¸ã®ç¬¬ä¸€æ­©ã§ã™ã€‚`;
                } else if (score >= totalQuestions * 0.7) {
                    title = 'ğŸŒ± ç†è§£ãŒæ·±ã¾ã‚Šã¾ã—ãŸï¼ ğŸŒ±';
                    message = `ç·‘å†…éšœã«ã¤ã„ã¦ åŸºæœ¬çš„ãªã“ã¨ã¯ç†è§£ã§ãã¦ã„ã¾ã™ã€‚\nä¸å®‰ãªç‚¹ã‚„åˆ†ã‹ã‚‰ãªã„ã“ã¨ã¯ã€é æ…®ãªãåŒ»å¸«ã«ç›¸è«‡ã—ã¾ã—ã‚‡ã†ã€‚\næ­£ã—ã„çŸ¥è­˜ã‚’æŒã¤ã“ã¨ã§ã€ã‚ˆã‚Šè‰¯ã„æ²»ç™‚ãŒå—ã‘ã‚‰ã‚Œã¾ã™ã€‚`;
                } else {
                    title = 'ğŸ’ª å­¦ç¿’ã®ã‚¹ã‚¿ãƒ¼ãƒˆã§ã™ï¼ ğŸ’ª';
                    message = `ç·‘å†…éšœã«ã¤ã„ã¦ å­¦ã¶è‰¯ã„ãã£ã‹ã‘ã«ãªã‚Šã¾ã—ãŸã€‚\nç—…æ°—ã‚’ç†è§£ã™ã‚‹ã“ã¨ã¯ ã¨ã¦ã‚‚å¤§åˆ‡ã§ã™ã€‚åˆ†ã‹ã‚‰ãªã„ã“ã¨ã¯åŒ»å¸«ã‚„çœ‹è­·å¸«ã«ç©æ¥µçš„ã«è³ªå•ã—ã¾ã—ã‚‡ã†ã€‚\næ­£ã—ã„çŸ¥è­˜ãŒã‚ã‚Œã°ã€å®‰å¿ƒã—ã¦æ²»ç™‚ã«å–ã‚Šçµ„ã‚€ã“ã¨ãŒã§ãã¾ã™ã€‚`;
                }
            }
            
            const scoreHTML = `<span class="final-score-highlight">æœ€çµ‚ã‚¹ã‚³ã‚¢ : ${score}/${totalQuestions}ï¼ˆ${percentage}%ï¼‰</span>`;
            const evaluationHTML = `<div class="result-evaluation">${title}</div>`;
            const messageHTML = `<div>${message.replace(/\n/g, '<br>')}</div>`;
            const titleHTML = `<div class="result-title">ğŸŠ çµæœç™ºè¡¨ ğŸŠ</div>`;

            document.getElementById('resultDetail').innerHTML = titleHTML + evaluationHTML + scoreHTML + messageHTML;

            document.querySelector('.quiz-container').classList.add('hidden');
            document.getElementById('finalResult').classList.remove('hidden');
            document.querySelector('.shuffle-button').classList.remove('hidden');
            document.querySelector('.retry-button').classList.remove('hidden');
            document.querySelector('.record-button').classList.remove('hidden');
            document.querySelector('.home-button-small').classList.remove('hidden');
            document.querySelector('.top-link').classList.add('hidden');

            window.scrollTo({ top: 0, behavior: 'smooth' });

            const isPerfect = score === totalQuestions;
            setTimeout(() => {
                celebrateResult(isPerfect);
            }, 300);

            // ãƒã‚¤ãƒšãƒ¼ã‚¸ç”¨ã«çµæœã‚’è¨˜éŒ²
            recordQuizResult(QUIZ_ID, score, totalQuestions);
        }

        function resetQuiz() {
            document.querySelector('.quiz-container').classList.remove('hidden');
            document.getElementById('finalResult').classList.add('hidden');
            score = 0;
            updateScore();

            for (let i = 1; i <= TOTAL_QUESTIONS; i++) {
                const questionElement = document.getElementById(`question${i}`);
                if (questionElement) {
                    questionElement.style.display = '';
                    questionElement.classList.add('hidden');

                    const options = questionElement.querySelectorAll('.option');
                    options.forEach(option => {
                        option.classList.remove('correct', 'incorrect', 'disabled');
                    });

                    questionElement.querySelector('.feedback').style.display = 'none';
                    questionElement.querySelector('.explanation').classList.add('hidden');
                }
            }

            document.querySelector('.next-button').classList.add('hidden');
            document.querySelector('.result-button').classList.add('hidden');
            document.querySelector('.shuffle-button').classList.add('hidden');
            document.querySelector('.retry-button').classList.add('hidden');
            document.querySelector('.record-button').classList.add('hidden');
            document.querySelector('.home-button-small').classList.add('hidden');
            document.querySelector('.top-link').classList.remove('hidden');

            document.querySelector('.quiz-status').classList.remove('hidden');

            if (totalQuestions === 3) {
                startQuiz('daily3');
            } else {
                startQuiz('full');
            }
        }

        function goHome() {
            document.querySelector('.quiz-container').classList.remove('hidden');
            document.getElementById('finalResult').classList.add('hidden');
            document.getElementById('quizArea').classList.add('hidden');

            document.querySelector('h1').classList.remove('hidden');
            document.querySelector('.subtitle').classList.remove('hidden');
            document.getElementById('quizTitleHeader').classList.add('hidden');

            for (let i = 1; i <= TOTAL_QUESTIONS; i++) {
                const questionElement = document.getElementById(`question${i}`);
                if (questionElement) {
                    questionElement.style.display = '';
                    questionElement.classList.add('hidden');

                    const options = questionElement.querySelectorAll('.option');
                    options.forEach(option => {
                        option.classList.remove('correct', 'incorrect', 'disabled');
                    });

                    questionElement.querySelector('.feedback').style.display = 'none';
                    questionElement.querySelector('.explanation').classList.add('hidden');
                }
            }

            document.querySelector('.next-button').classList.add('hidden');
            document.querySelector('.result-button').classList.add('hidden');
            document.querySelector('.shuffle-button').classList.add('hidden');
            document.querySelector('.retry-button').classList.add('hidden');
            document.querySelector('.record-button').classList.add('hidden');
            document.querySelector('.home-button-small').classList.add('hidden');
            document.querySelector('.top-link').classList.remove('hidden');
            document.querySelector('.quiz-status').classList.remove('hidden');

            currentQuestion = 1;
            score = 0;
            totalQuestions = TOTAL_QUESTIONS;
            questionList = [];
            isDaily = false;

            updateScore();
            updateProgressStatus();

            document.getElementById('modeSelection').classList.remove('hidden');
        }

        function updateScore() {
            document.getElementById('score').textContent = score;
        }

        // ã‚·ãƒ£ãƒƒãƒ•ãƒ«3å•ï¼šåˆ¥ã‚¸ãƒ£ãƒ³ãƒ«ã®ã‚¯ã‚¤ã‚ºã¸
        function goToRandomQuiz() {
            const otherQuizzes = ALL_QUIZZES.filter(q => q !== CURRENT_QUIZ_FILE);
            const randomQuiz = otherQuizzes[Math.floor(Math.random() * otherQuizzes.length)];
            window.location.href = encodeURI(randomQuiz) + '?mode=daily3';
        }

        // ã‚‚ã†3å•ï¼šã“ã®ã‚¯ã‚¤ã‚ºã®ä»Šæ—¥ã®3å•ã‚’å†é–‹
        function restartThisQuiz() {
            window.location.href = encodeURI(CURRENT_QUIZ_FILE) + '?mode=daily3';
        }

        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('option') && !e.target.classList.contains('disabled')) {
                selectAnswer(e.target);
            }
        });
    </script>

    <div id="finalResult" class="final-score-card hidden">
      <div id="resultDetail" class="result-detail"></div>
      <div class="result-buttons">
        <div class="result-buttons-row primary">
          <button class="shuffle-button hidden" onclick="goToRandomQuiz()">ğŸ² ã‚·ãƒ£ãƒƒãƒ•ãƒ«3å•<span class="btn-sub">åˆ¥ã‚¸ãƒ£ãƒ³ãƒ«</span></button>
          <button class="retry-button hidden" onclick="restartThisQuiz()">ğŸ”„ ã‚‚ã†3å•<span class="btn-sub">ã“ã®ã‚¯ã‚¤ã‚º</span></button>
        </div>
        <div class="result-buttons-row secondary">
          <a href="../mypage.html" class="record-button hidden">ğŸ“Š è¨˜éŒ²</a>
          <a href="../index.html" class="home-button-small hidden">ğŸ  ãƒ›ãƒ¼ãƒ </a>
        </div>
      </div>
    </div>

</body>
</html>