<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>é™¢å†…ãƒ«ãƒ¼ãƒ«ç¢ºèªã‚¯ã‚¤ã‚º - ã‚¹ã‚¿ãƒƒãƒ•å‘ã‘</title>
    <style>
        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        html {
            scroll-behavior: smooth;
        }
        body {
            font-family: 'Noto Sans JP', -apple-system, BlinkMacSystemFont, sans-serif;
            margin: 0;
            padding: 12px;
            padding-top: max(12px, env(safe-area-inset-top));
            padding-bottom: max(12px, env(safe-area-inset-bottom));
            padding-left: max(12px, env(safe-area-inset-left));
            padding-right: max(12px, env(safe-area-inset-right));
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
        }
        .quiz-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        @media (min-width: 768px) {
            body {
                padding: 20px;
            }
            .quiz-container {
                padding: 25px;
            }
        }

        @media (max-width: 768px) {
            body {
                padding: 12px;
            }
            .quiz-container {
                padding: 20px;
            }
        }
        
        h1 {
            text-align: center;
            color: #1a237e;
            font-size: 28px;
            margin-bottom: 4px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 24px;
            }
        }
        
        .subtitle {
            text-align: center;
            color: #283593;
            font-size: 16px;
            margin-bottom: 15px;
        }

        @media (max-width: 768px) {
            .subtitle {
                font-size: 16px;
            }
        }

        .top-link {
            display: block;
            text-align: center;
            margin-bottom: 20px;
        }

        .top-link a {
            color: #5c6bc0;
            text-decoration: none;
            font-size: 15px;
            padding: 8px 20px;
            border: 2px solid #e8eaf6;
            border-radius: 20px;
            transition: all 0.3s ease;
        }

        .top-link a:hover {
            background: #e8eaf6;
            border-color: #5c6bc0;
        }

        .mode-selection {
            text-align: center;
            margin: 40px 0;
        }
        
        .mode-button {
            display: block;
            width: 80%;
            max-width: 400px;
            margin: 15px auto;
            background: linear-gradient(135deg, #f89b29, #ff7e5f);
            color: white;
            border: none;
            padding: 20px 40px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(248, 155, 41, 0.3);
        }
        
        .mode-button:active {
            transform: scale(0.97);
        }

        @media (min-width: 768px) {
            .mode-button:hover {
                transform: translateY(-3px);
                box-shadow: 0 8px 25px rgba(248, 155, 41, 0.4);
            }
        }

        @media (max-width: 768px) {
            .mode-button {
                width: 90%;
                padding: 18px 30px;
                font-size: 17px;
                margin: 12px auto;
            }
        }
        
        .mode-description {
            font-size: 14px;
            color: #1a237e;
            margin-top: 20px;
            line-height: 1.5;
        }

        .question-card {
            background: #fdfefe;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 6px solid #ff8f00;
            box-shadow: 0 3px 15px rgba(0,0,0,0.08);
            border: 1px solid #e8eaf6;
            display: flex;
            flex-wrap: wrap;
            align-items: baseline;
        }
        
        .question-number {
            font-weight: bold;
            color: #ff8f00;
            font-size: 19px;
            margin-bottom: 20px;
            margin-right: 0.75em;
        }
        
        .question-text {
            font-size: 22px;
            font-weight: 600;
            color: #1a237e;
            margin-bottom: 20px;
            line-height: 1.5;
            flex-grow: 1;
        }
        
        .options, .feedback, .explanation {
            width: 100%;
        }

        @media (max-width: 768px) {
            .question-card {
                padding: 20px;
                display: block;
            }
            .question-number {
                margin-bottom: 12px;
            }
            .question-text {
                font-size: 20px;
            }
        }
        
        .options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 15px;
        }
        
        @media (max-width: 768px) {
            .options {
                grid-template-columns: 1fr;
                gap: 12px;
            }
        }
        
        .option {
            background: white;
            border: 2px solid #e8eaf6;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 18px;
            font-weight: 500;
            text-align: center;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1.4;
        }
        
        @media (max-width: 768px) {
            .option {
                padding: 15px;
                font-size: 16px;
                min-height: 60px;
            }
        }
        
        .option:active {
            transform: scale(0.98);
            background: #fff8e1;
            border-color: #ff8f00;
        }

        @media (min-width: 768px) {
            .option:hover {
                border-color: #ff8f00;
                background: #fff8e1;
                transform: translateY(-3px);
                box-shadow: 0 6px 20px rgba(255, 143, 0, 0.25);
            }
        }

        .option.correct {
            border-color: #4caf50;
            background: #e8f5e9;
            cursor: default;
            transform: none;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
        }
        .option.incorrect {
            border-color: #f44336;
            background: #ffebee;
            cursor: default;
            transform: none;
            box-shadow: 0 4px 15px rgba(244, 67, 54, 0.3);
        }
        .option.disabled {
            cursor: default;
            opacity: 0.7;
        }
        .option.disabled:hover {
            transform: none;
            box-shadow: none;
        }
        .next-button, .reset-button, .home-button, .result-button {
            background: linear-gradient(135deg, #f89b29, #ff7e5f);
            color: white;
            border: none;
            padding: 15px 35px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            margin: 10px 10px;
            transition: all 0.3s ease;
        }

        .top-button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 35px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            margin: 10px 10px;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        @media (max-width: 768px) {
            .next-button, .reset-button, .home-button, .result-button {
                padding: 12px 25px;
                font-size: 16px;
                margin: 10px 5px;
            }
            .top-button {
                padding: 12px 25px;
                font-size: 16px;
                margin: 10px 5px;
            }
        }

        .next-button:active, .reset-button:active, .home-button:active, .result-button:active, .top-button:active {
            transform: scale(0.97);
        }

        @media (min-width: 768px) {
            .next-button:hover, .reset-button:hover, .home-button:hover, .result-button:hover {
                transform: translateY(-2px);
                box-shadow: 0 8px 25px rgba(248, 155, 41, 0.4);
            }
            .top-button:hover {
                transform: translateY(-2px);
                box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
            }
        }

        .feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 18px;
            display: none;
            text-align: center;
        }
        .feedback.correct {
            background: #e3f2fd;
            color: #1565c0;
            border: 2px solid #64b5f6;
        }
        .feedback.incorrect {
            background: #ffebee;
            color: #c62828;
            border: 2px solid #f44336;
        }
        
        .quiz-status {
            display: flex;
            align-items: center;
            gap: 25px;
            margin-bottom: 20px;
        }

        .score {
            text-align: center;
            font-size: 22px;
            font-weight: bold;
            color: #1a237e;
            margin: 0;
            padding: 12px;
            background: #f1f3f9;
            border-radius: 10px;
            border: 2px solid #e8eaf6;
            flex-shrink: 0;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e8eaf6;
            border-radius: 4px;
            margin: 0;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }
        
        @media (max-width: 768px) {
            .quiz-status {
                flex-direction: column;
                gap: 12px;
            }
            .score {
                font-size: 20px;
                padding: 10px;
                width: 100%;
            }
        }

        .hidden {
            display: none;
        }
        .buttons {
            text-align: center;
            margin-top: 20px;
        }
        .explanation {
            background: #e8eaf6;
            border-left: 5px solid #3f51b5;
            padding: 15px;
            margin-top: 15px;
            border-radius: 8px;
            font-size: 18px;
            line-height: 1.5;
            color: #1a237e;
        }
        
        @media (max-width: 768px) {
            .explanation {
                padding: 15px;
                font-size: 16px;
            }
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #f89b29, #ff7e5f);
            transition: width 0.5s ease;
            border-radius: 4px;
        }
        
        .final-score-card{
            background:#fdfefe;
            border:2px solid #1a237e;
            border-radius:15px;
            padding:30px;
            margin-top:30px;
            text-align:center;
            box-shadow:0 3px 15px rgba(0,0,0,.08)
        }
        .result-title {
            font-size:32px;
            font-weight:700;
            color:#1a237e;
            margin-bottom:20px
        }
        
        .result-detail{
            font-size: 20px;
            line-height: 1.8;
            color: #1a237e;
        }

        .result-evaluation {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 25px;
        }

        .final-score-highlight {
            color: #c62828;
            font-weight: bold;
            font-size: 1.5em;
            display: block;
            margin-bottom: 25px;
        }

        @media (max-width: 768px) {
            .result-title {font-size:28px}
            .result-detail{font-size:18px;line-height:1.7}
            .result-evaluation {font-size: 22px;}
        }

        /* æ­£è§£ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ */
        .celebrate-emoji {
            position: fixed;
            font-size: 40px;
            pointer-events: none;
            z-index: 9999;
            animation: celebrate 1s ease-out forwards;
        }

        @keyframes celebrate {
            0% {
                opacity: 1;
                transform: translateY(0) scale(0.5) rotate(0deg);
            }
            50% {
                opacity: 1;
                transform: translateY(-60px) scale(1.2) rotate(15deg);
            }
            100% {
                opacity: 0;
                transform: translateY(-120px) scale(0.8) rotate(-10deg);
            }
        }

        .correct-flash {
            animation: flashGreen 0.4s ease-out;
        }

        @keyframes flashGreen {
            0% { box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.7); }
            50% { box-shadow: 0 0 20px 10px rgba(76, 175, 80, 0.4); }
            100% { box-shadow: 0 0 0 0 rgba(76, 175, 80, 0); }
        }

    </style>
</head>
<body>
    <div class="quiz-container">
        <h1>ğŸ¥ é™¢å†…ãƒ«ãƒ¼ãƒ«ç¢ºèªã‚¯ã‚¤ã‚º ğŸ¥</h1>
        <div class="subtitle">ã‚¹ã‚¿ãƒƒãƒ•å‘ã‘ - å††æ»‘ãªæ‚£è€…æ§˜å¯¾å¿œã®ãŸã‚ã«</div>
        <div class="top-link"><a href="../index.html">â† ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã¸</a></div>

        <div id="modeSelection" class="mode-selection">
            <button class="mode-button" onclick="startQuiz('daily3')">
                ğŸ“‹ ä»Šæ—¥ã®3å•
            </button>
            <button class="mode-button" onclick="startQuiz('daily5')">
                ğŸ“Š ä»Šæ—¥ã®5å•
            </button>
            <button class="mode-button" onclick="startQuiz('daily7')">
                ğŸ“ˆ ä»Šæ—¥ã®7å•
            </button>
            <button class="mode-button" onclick="startQuiz('full')">
                ğŸ“š ãƒ•ãƒ«ã‚³ãƒ¼ã‚¹ï¼ˆå…¨15å•ï¼‰
            </button>
            <div class="mode-description">
                <strong>ä»Šæ—¥ã®3å•:</strong> å…¨15å•ã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã«3å•ã‚’å‡ºé¡Œ<br>
                <strong>ä»Šæ—¥ã®5å•:</strong> å…¨15å•ã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã«5å•ã‚’å‡ºé¡Œ<br>
                <strong>ä»Šæ—¥ã®7å•:</strong> å…¨15å•ã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã«7å•ã‚’å‡ºé¡Œ<br>
                <strong>ãƒ•ãƒ«ã‚³ãƒ¼ã‚¹:</strong> å…¨15å•ã‚’é †ç•ªã«å‡ºé¡Œ
            </div>
        </div>
        
        <div id="quizArea" class="hidden">
            <div class="quiz-status">
                <div class="score">ã‚¹ã‚³ã‚¢: <span id="score">0</span> / <span id="total">15</span></div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressBar"></div>
                </div>
            </div>
            
            <div class="question-card" id="question1">
                <div class="question-number">å•é¡Œ 1</div>
                <div class="question-text">å½“é™¢ã® ä¼‘è¨ºæ—¥ã¯ ä½•æ›œæ—¥ã§ã™ã‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="false">æœˆæ›œæ—¥</div>
                    <div class="option" data-answer="false">ç«æ›œæ—¥</div>
                    <div class="option" data-answer="true">æ°´æ›œæ—¥</div>
                    <div class="option" data-answer="false">æœ¨æ›œæ—¥</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>2025å¹´4æœˆ1æ—¥ã‚ˆã‚Šã€ä¼‘è¨ºæ—¥ãŒã€Œæ°´æ›œæ—¥ã€ã«å¤‰æ›´ã•ã‚Œã¾ã—ãŸã€‚
                </div>
            </div>

            <div class="question-card hidden" id="question2">
                <div class="question-number">å•é¡Œ 2</div>
                <div class="question-text">äºˆç´„ãŒ æº€å¸­ï¼ˆâŒè¡¨ç¤ºï¼‰ã®å ´åˆã€é›»è©±ã§ã® äºˆç´„ã¯ å¯èƒ½ã§ã™ã‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="false">å¯èƒ½ã§ã™</div>
                    <div class="option" data-answer="false">ä»–ã®æ‚£è€…æ§˜ã® è¿·æƒ‘ã«ãªã‚‰ãªã„ æ™‚é–“å¸¯ã§ã‚ã‚Œã° å¯èƒ½ã§ã™</div>
                    <div class="option" data-answer="true">æ‰¿ã‚‹ã“ã¨ã¯ ã§ãã¾ã›ã‚“</div>
                    <div class="option" data-answer="false">ç·Šæ€¥ã®å ´åˆã¯ å¯èƒ½ã§ã™</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>äºˆç´„ãŒæº€å¸­ï¼ˆâŒè¡¨ç¤ºï¼‰ã®å ´åˆã€ãŠé›»è©±ç­‰ã§ã®äºˆç´„ã¯æ‰¿ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ã®ã§ã€ã”äº†æ‰¿ãã ã•ã„ã¨æ˜è¨˜ã•ã‚Œã¦ã„ã¾ã™ã€‚
                </div>
            </div>

            <div class="question-card hidden" id="question3">
                <div class="question-number">å•é¡Œ 3</div>
                <div class="question-text">äºˆç´„ã‚’ ç„¡æ–­ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã—ãŸå ´åˆã€ã©ã®ã‚ˆã†ãª å¯¾å¿œãŒ å–ã‚‰ã‚Œã‚‹ã“ã¨ãŒ ã‚ã‚Šã¾ã™ã‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="false">ç‰¹ã« å½±éŸ¿ã¯ ã‚ã‚Šã¾ã›ã‚“</div>
                    <div class="option" data-answer="false">æ¬¡å›ã‹ã‚‰ å¿…ãšé›»è©±ã§ äºˆç´„ã™ã‚‹ã‚ˆã† ãŠé¡˜ã„ã•ã‚Œã¾ã™</div>
                    <div class="option" data-answer="true">ä»Šå¾Œã® äºˆç´„ã‚’ ãŠæ–­ã‚Šã™ã‚‹ å ´åˆãŒ ã”ã–ã„ã¾ã™</div>
                    <div class="option" data-answer="false">ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ–™ãŒ ç™ºç”Ÿã—ã¾ã™</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>ç„¡æ–­ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã¯å›ºããŠæ–­ã‚Šã—ã¦ãŠã‚Šã€ä»–ã®æ‚£è€…æ§˜ã®ã”è¿·æƒ‘ã¨ãªã‚‹ãŸã‚ã€ä»Šå¾Œã®äºˆç´„ã‚’ãŠæ–­ã‚Šã™ã‚‹å ´åˆãŒã”ã–ã„ã¾ã™ã€‚
                </div>
            </div>

            <div class="question-card hidden" id="question4">
                <div class="question-number">å•é¡Œ 4</div>
                <div class="question-text">ç™ºç†±ãŒã‚ã‚‹ æ‚£è€…æ§˜ãŒ æ¥é™¢ã‚’å¸Œæœ›ã—ãŸå ´åˆã€ã©ã®ã‚ˆã†ã« æ¡ˆå†…ã™ã¹ãã§ã™ã‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="false">ä½“æ¸©è¨ˆã§ æ¤œæ¸©å¾Œã€å—è¨ºå¯èƒ½ã§ã™</div>
                    <div class="option" data-answer="true">ç—‡çŠ¶ãŒ æ”¹å–„ã—ã¦ã‹ã‚‰ äºˆç´„ã‚’ å–ã‚‹ã‚ˆã† æ¡ˆå†…ã—ã¾ã™</div>
                    <div class="option" data-answer="false">ãƒã‚¹ã‚¯ç€ç”¨ã§ å—è¨ºã‚’ä¿ƒã—ã¾ã™</div>
                    <div class="option" data-answer="false">éš”é›¢ã•ã‚ŒãŸ å ´æ‰€ã§ è¨ºå¯Ÿå¯èƒ½ã§ã™</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>ç™ºç†±ãŒã‚ã‚‹æ–¹ã¯å—è¨ºã‚’ãŠæ§ãˆã„ãŸã ãã€ä½“èª¿ä¸è‰¯ã®éš›ã¯ç—‡çŠ¶ãŒæ”¹å–„ã—ã¦ã‹ã‚‰äºˆç´„ã‚’å–ã‚‹ã‚ˆã†æ¡ˆå†…ã•ã‚Œã¦ã„ã¾ã™ã€‚ã¾ãŸã€37åº¦ä»¥ä¸Šã®ç™ºç†±ã®æ–¹ã€ã‚³ãƒ­ãƒŠãƒ»ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚¶ç–‘ã„ã®æ–¹ã¯å—è¨ºã§ãã¾ã›ã‚“ã€‚
                </div>
            </div>

            <div class="question-card hidden" id="question5">
                <div class="question-number">å•é¡Œ 5</div>
                <div class="question-text">åˆã‚ã¦ å½“é™¢ã‚’ å—è¨ºã™ã‚‹æ‚£è€…æ§˜ã«ã€å—ä»˜ã‚’ ã‚¹ãƒ ãƒ¼ã‚ºã« é€²ã‚ã‚‹ãŸã‚ã« æ¨å¥¨ã•ã‚Œã‚‹ã“ã¨ã¯ ä½•ã§ã™ã‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="false">äº‹å‰ã«é›»è©±ã§ è©³ç´°ãªç—…æ­´ã‚’ ä¼ãˆã‚‹</div>
                    <div class="option" data-answer="false">è¨ºå¯Ÿåˆ¸ã‚’ å¿˜ã‚Œãšã«æŒå‚ã™ã‚‹</div>
                    <div class="option" data-answer="true">å•è¨ºç¥¨ã‚’ ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ è¨˜å…¥ã—ã¦ãŠã</div>
                    <div class="option" data-answer="false">ç´¹ä»‹çŠ¶ã‚’ æŒå‚ã™ã‚‹</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>åˆè¨ºã®æ–¹ã¯ã€å•è¨ºç¥¨ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ã”è¨˜å…¥ã„ãŸã ãã¨ã€å—ä»˜ãŒã‚¹ãƒ ãƒ¼ã‚ºã«ãªã‚‹ã¨æ¡ˆå†…ã•ã‚Œã¦ã„ã¾ã™ã€‚
                </div>
            </div>

            <div class="question-card hidden" id="question6">
                <div class="question-number">å•é¡Œ 6</div>
                <div class="question-text">ã‚³ãƒ³ã‚¿ã‚¯ãƒˆãƒ¬ãƒ³ã‚ºã® å‡¦æ–¹ç®‹ï¼ˆæŒ‡ç¤ºæ›¸ï¼‰ã¯ã€ã©ã®ã‚ˆã†ãª ç›®çš„ã®å ´åˆã« ç™ºè¡Œã•ã‚Œã¾ã™ã‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="false">ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆé€šè²©ã‚µã‚¤ãƒˆã§ è³¼å…¥ã™ã‚‹ãŸã‚</div>
                    <div class="option" data-answer="false">ä»–åº—ã§ è³¼å…¥ã™ã‚‹ãŸã‚</div>
                    <div class="option" data-answer="true">2éšã®ã€Œã‚¨ãƒ¼ã‚¹ã‚³ãƒ³ã‚¿ã‚¯ãƒˆã€ã‚’ åˆ©ç”¨ã™ã‚‹æ–¹ã¸</div>
                    <div class="option" data-answer="false">å‹äººã‹ã‚‰ è­²ã‚Šå—ã‘ãŸ ã‚³ãƒ³ã‚¿ã‚¯ãƒˆãƒ¬ãƒ³ã‚ºã‚’ ä½¿ç”¨ã™ã‚‹ãŸã‚</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>ã‚³ãƒ³ã‚¿ã‚¯ãƒˆãƒ¬ãƒ³ã‚ºã®å‡¦æ–¹ç®‹ï¼ˆæŒ‡ç¤ºæ›¸ï¼‰ã¯ã€2éšã®ã€Œã‚¨ãƒ¼ã‚¹ã‚³ãƒ³ã‚¿ã‚¯ãƒˆã€ã‚’ã”åˆ©ç”¨ã®æ–¹ã¸ã®ã¿ç™ºè¡Œã—ã¦ãŠã‚Šã€ä»–åº—ã‚„ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆé€šè²©ã‚µã‚¤ãƒˆç­‰ã§ã®è³¼å…¥ç›®çš„ã§ã®ç™ºè¡Œã¯è¡Œã£ã¦ã„ã¾ã›ã‚“ã€‚
                </div>
            </div>

            <div class="question-card hidden" id="question7">
                <div class="question-number">å•é¡Œ 7</div>
                <div class="question-text">ã‚¨ãƒ¼ã‚¹ã‚³ãƒ³ã‚¿ã‚¯ãƒˆã§ å…ˆã«å—ä»˜ã‚’æ¸ˆã¾ã›ãŸæ‚£è€…æ§˜ãŒ å½“é™¢ã§ ã‚³ãƒ³ã‚¿ã‚¯ãƒˆå‡¦æ–¹ã‚’ å¸Œæœ›ã™ã‚‹å ´åˆã€äº‹å‰ã®äºˆç´„ã¯ å¿…è¦ã§ã™ã‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="false">å¿…ãš äºˆç´„ãŒ å¿…è¦ã§ã™</div>
                    <div class="option" data-answer="true">äºˆç´„ãªã—ã§ã‚‚ è¨ºå¯Ÿå¯èƒ½ã§ã™</div>
                    <div class="option" data-answer="false">é›»è©±ã§ äº‹å‰é€£çµ¡ãŒ å¿…è¦ã§ã™</div>
                    <div class="option" data-answer="false">åˆå¾Œã®è¨ºå¯Ÿæ™‚é–“å†…ã«é™ã£ã¦ äºˆç´„ãªã—ã§ å¯èƒ½ã§ã™</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>å…ˆã«ã‚¨ãƒ¼ã‚¹ã‚³ãƒ³ã‚¿ã‚¯ãƒˆã§å—ä»˜ã‚’æ¸ˆã¾ã›ãŸæ–¹ã¯ã€äºˆç´„ãªã—ã§ã‚‚è¨ºå¯Ÿå¯èƒ½ã¨è¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚å—ä»˜æ™‚é–“å†…ã«ã”æ¥é™¢ãã ã•ã„ã€‚
                </div>
            </div>

            <div class="question-card hidden" id="question8">
                <div class="question-number">å•é¡Œ 8</div>
                <div class="question-text">å®‰å…¨ã®ãŸã‚ã€ã‚³ãƒ³ã‚¿ã‚¯ãƒˆãƒ¬ãƒ³ã‚ºã® å‡¦æ–¹ã®å¯¾è±¡å¹´é½¢ã¯ ä½•æ­³ã‹ã‚‰ã§ã™ã‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="false">3æ­³ã‹ã‚‰</div>
                    <div class="option" data-answer="true">å°å­¦ç”Ÿ 6å¹´ç”Ÿä»¥ä¸Šã‹ã‚‰</div>
                    <div class="option" data-answer="false">ä¸­å­¦ç”Ÿä»¥ä¸Šã‹ã‚‰</div>
                    <div class="option" data-answer="false">18æ­³ä»¥ä¸Šã‹ã‚‰</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>ã‚³ãƒ³ã‚¿ã‚¯ãƒˆãƒ¬ãƒ³ã‚ºã®å‡¦æ–¹ã¯ã€å®‰å…¨ã®ãŸã‚å°å­¦ç”Ÿ6å¹´ç”Ÿä»¥ä¸Šã‚’å¯¾è±¡ã¨ã—ã¦ã„ã¾ã™ã€‚
                </div>
            </div>

            <div class="question-card hidden" id="question9">
                <div class="question-number">å•é¡Œ 9</div>
                <div class="question-text">æ–œè¦–ãƒ»å¼±è¦–ãƒ»è‰²è¦šæ¤œæŸ»ã‚’ å¸Œæœ›ã™ã‚‹æ‚£è€…æ§˜ã¯ã€ã©ã®ã‚ˆã†ã« äºˆç´„ã‚’ å–ã‚‹å¿…è¦ãŒ ã‚ã‚Šã¾ã™ã‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="false">ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã® ã€Œä¸€èˆ¬äºˆç´„ã€ã‹ã‚‰ äºˆç´„ã™ã‚‹</div>
                    <div class="option" data-answer="false">äºˆç´„ãªã—ã§ ç›´æ¥æ¥é™¢ã™ã‚‹</div>
                    <div class="option" data-answer="true">é›»è©±ã§ã® äºˆç´„ãŒ å¿…è¦ã§ã™</div>
                    <div class="option" data-answer="false">ç´¹ä»‹çŠ¶ãŒå¿…é ˆã§ã€å½“é™¢ã‹ã‚‰ã¯ äºˆç´„ã§ãã¾ã›ã‚“</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>æ–œè¦–ãƒ»å¼±è¦–ãƒ»è‰²è¦šæ¤œæŸ»ã‚’å¸Œæœ›ã™ã‚‹æ–¹ã¯ã€ãŠä¸€äººãŠã²ã¨ã‚Šã®çŠ¶æ…‹ã«åˆã‚ã›ãŸä¸å¯§ãªæ¤œæŸ»ã®ãŸã‚æ™‚é–“ã‚’è¦ã™ã‚‹ãŸã‚ã€é›»è©±ã§ã®äºˆç´„ã‚’ãŠé¡˜ã„ã—ã¦ã„ã¾ã™ã€‚
                </div>
            </div>

            <div class="question-card hidden" id="question10">
                <div class="question-number">å•é¡Œ 10</div>
                <div class="question-text">ãµã˜ã¿é‡å¸‚ãƒ»å¯Œå£«è¦‹å¸‚ãƒ»ä¸‰èŠ³ç”ºã® ç·‘å†…éšœæ¤œè¨ºã® è‡ªå·±è² æ‹…é‡‘ã¯ ã„ãã‚‰ã§ã™ã‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="false">ç„¡æ–™ã§ã™</div>
                    <div class="option" data-answer="false">500å††ï¼ˆç¾é‡‘ã®ã¿ï¼‰</div>
                    <div class="option" data-answer="true">1,000å††ï¼ˆç¾é‡‘ã®ã¿ï¼‰</div>
                    <div class="option" data-answer="false">2,000å††ï¼ˆã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰å¯ï¼‰</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>ç·‘å†…éšœæ¤œè¨ºã®è‡ªå·±è² æ‹…é‡‘ã¯1,000å††ï¼ˆç¾é‡‘ã®ã¿ï¼‰ã¨è¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚
                </div>
            </div>

            <div class="question-card hidden" id="question11">
                <div class="question-number">å•é¡Œ 11</div>
                <div class="question-text">åˆã‚ã¦ ã‚³ãƒ³ã‚¿ã‚¯ãƒˆãƒ¬ãƒ³ã‚ºã®å‡¦æ–¹ã§ æ¥é™¢ã•ã‚Œã‚‹æ‚£è€…æ§˜ã® åˆå‰ã®å—ä»˜çµ‚äº†æ™‚é–“ã¯ ä½•æ™‚ã§ã™ã‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="true">åˆå‰ 12:30ã¾ã§</div>
                    <div class="option" data-answer="false">åˆå‰ 12:00ã¾ã§</div>
                    <div class="option" data-answer="false">åˆå‰ 11:30ã¾ã§</div>
                    <div class="option" data-answer="false">åˆå¾Œ 13:00ã¾ã§</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>ã‚³ãƒ³ã‚¿ã‚¯ãƒˆãŒåˆã‚ã¦ã®æ–¹ã¯ã€åˆå‰12:30ã¾ã§ã«å—ä»˜ã‚’æ¸ˆã¾ã›ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
                </div>
            </div>

            <div class="question-card hidden" id="question12">
                <div class="question-number">å•é¡Œ 12</div>
                <div class="question-text">2å›ç›®ä»¥é™ã® ã‚³ãƒ³ã‚¿ã‚¯ãƒˆãƒ¬ãƒ³ã‚ºå—è¨ºã® åˆå¾Œã®å—ä»˜çµ‚äº†æ™‚é–“ã¯ ä½•æ™‚ã§ã™ã‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="false">åˆå¾Œ 17:30ã¾ã§</div>
                    <div class="option" data-answer="false">åˆå¾Œ 18:00ã¾ã§</div>
                    <div class="option" data-answer="true">åˆå¾Œ 18:30ã¾ã§</div>
                    <div class="option" data-answer="false">åˆå¾Œ 19:00ã¾ã§</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>2å›ç›®ä»¥é™ã®ã‚³ãƒ³ã‚¿ã‚¯ãƒˆå—è¨ºã®å—ä»˜ã¯ã€åˆå¾Œã¯18:30ã¾ã§å¯èƒ½ã§ã™ã€‚
                </div>
            </div>

            <div class="question-card hidden" id="question13">
                <div class="question-number">å•é¡Œ 13</div>
                <div class="question-text">ã‚¦ã‚§ãƒ–äºˆç´„ã«ã¤ã„ã¦ã€ ã€Œå—ä»˜ã®ãŸã‚ã®äºˆç´„ã€ã¨ ã‚ã‚Šã¾ã™ãŒã€ã“ã‚Œã¯ ä½•ã‚’æ„å‘³ã—ã¾ã™ã‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="false">äºˆç´„æ™‚é–“ã¡ã‚‡ã†ã©ã« è¨ºå¯ŸãŒé–‹å§‹ã•ã‚Œã‚‹ã“ã¨ã‚’ ä¿è¨¼ã™ã‚‹ã‚‚ã®ã§ã™</div>
                    <div class="option" data-answer="false">æ¤œæŸ»ãƒ»è¨ºå¯Ÿã¾ã§ã® å¾…ã¡æ™‚é–“ã¯ ç™ºç”Ÿã—ãªã„ã“ã¨ã‚’ æ„å‘³ã—ã¾ã™</div>
                    <div class="option" data-answer="true">å—ä»˜ã®é †ç•ªã‚’ ç¢ºä¿ã™ã‚‹ã‚‚ã®ã§ã‚ã‚Šã€æ¤œæŸ»ãƒ»è¨ºå¯Ÿã¾ã§ã® å¾…ã¡æ™‚é–“ã¯ ç”Ÿã˜ã¾ã™</div>
                    <div class="option" data-answer="false">å¿…ãšå¸Œæœ›ã™ã‚‹åŒ»å¸«ã« è¨ºã¦ã‚‚ã‚‰ãˆã‚‹ã“ã¨ã‚’ æ„å‘³ã—ã¾ã™</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>ã‚¦ã‚§ãƒ–äºˆç´„ã¯å—ä»˜ã®ãŸã‚ã®äºˆç´„ã§ã‚ã‚Šã€æ¤œæŸ»ãƒ»è¨ºå¯Ÿã¾ã§ã®å¾…ã¡æ™‚é–“ã¯ç”Ÿã˜ã‚‹æ—¨ãŒè¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚
                </div>
            </div>

            <div class="question-card hidden" id="question14">
                <div class="question-number">å•é¡Œ 14</div>
                <div class="question-text">å°å…äºˆç´„å¤–æ¥ã¯ã€ä½•æ›œæ—¥ã« äºˆç´„æ ãŒ ã‚ã‚Šã¾ã™ã‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="false">æœˆãƒ»æ°´ãƒ»é‡‘æ›œæ—¥</div>
                    <div class="option" data-answer="true">ç«ãƒ»æœ¨ãƒ»é‡‘æ›œæ—¥</div>
                    <div class="option" data-answer="false">æœˆãƒ»ç«ãƒ»æ°´æ›œæ—¥</div>
                    <div class="option" data-answer="false">åœŸãƒ»æ—¥ãƒ»ç¥æ—¥</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>å°å…äºˆç´„å¤–æ¥ã¯ã€Œç«ãƒ»æœ¨ãƒ»é‡‘æ›œã€ã®ã€Œ11æ™‚ã‹ã‚‰ã€ã¨ã€Œ15:30ã‹ã‚‰ã€ã®äºˆç´„æ ãŒã‚ã‚‹ã¨è¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚
                </div>
            </div>

            <div class="question-card hidden" id="question15">
                <div class="question-number">å•é¡Œ 15</div>
                <div class="question-text">å½“é™¢ã®ä»£è¨ºåŒ»å¸«ãŒ å¯¾å¿œã—ã¦ã„ãªã„ æ¤œæŸ»ã‚„æ¤œè¨ºã¯ ã©ã‚Œã§ã™ã‹ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="false">ä¸€èˆ¬çœ¼ç§‘è¨ºå¯Ÿ</div>
                    <div class="option" data-answer="false">ã‚³ãƒ³ã‚¿ã‚¯ãƒˆå‡¦æ–¹</div>
                    <div class="option" data-answer="true">ã€Œå¸‚ã®ç·‘å†…éšœæ¤œè¨ºã€ã‚„ ã€Œæ–œè¦–ãƒ»å¼±è¦–ã€</div>
                    <div class="option" data-answer="false">çœ¼é¡å‡¦æ–¹</div>
                </div>
                <div class="feedback"></div>
                <div class="explanation hidden">
                    <strong>è§£èª¬ï¼š</strong>ä»£è¨ºåŒ»å¸«ã¯ã€Œå¸‚ã®ç·‘å†…éšœæ¤œè¨ºã€ã‚„ã€Œæ–œè¦–ãƒ»å¼±è¦–ã€ã«ã¯å¯¾å¿œã—ã¦ã„ãªã„ã¨æ˜è¨˜ã•ã‚Œã¦ã„ã¾ã™ã€‚
                </div>
            </div>

            <div class="buttons">
                <button class="next-button hidden" onclick="nextQuestion()">æ¬¡ã®å•é¡Œã¸</button>
                <button class="result-button hidden" onclick="showFinalScore()">ğŸŠ çµæœç™ºè¡¨ã¸ ğŸŠ</button>
            </div>
        </div>
    </div>

    <script>
        let currentQuestion = 1;
        let score = 0;
        let totalQuestions = 15;
        let questionList = [];
        let isDaily = false;

        const allQuestions = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15];

        // æ­£è§£ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
        function celebrateCorrect(element) {
            // æŒ¯å‹•ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ï¼ˆã‚¹ãƒãƒ›ã®ã¿ï¼‰
            if (navigator.vibrate) {
                navigator.vibrate([50, 30, 50]);
            }

            // ã‚«ãƒ¼ãƒ‰ã‚’ãƒ•ãƒ©ãƒƒã‚·ãƒ¥
            const card = element.closest('.question-card');
            card.classList.add('correct-flash');
            setTimeout(() => card.classList.remove('correct-flash'), 400);

            // çµµæ–‡å­—ã‚’é£›ã°ã™
            const emojis = ['ğŸ‰', 'â­', 'âœ¨', 'ğŸŒŸ', 'ğŸ‘'];
            const rect = element.getBoundingClientRect();

            for (let i = 0; i < 5; i++) {
                setTimeout(() => {
                    const emoji = document.createElement('div');
                    emoji.className = 'celebrate-emoji';
                    emoji.textContent = emojis[Math.floor(Math.random() * emojis.length)];
                    emoji.style.left = (rect.left + Math.random() * rect.width) + 'px';
                    emoji.style.top = (rect.top + Math.random() * 30) + 'px';
                    document.body.appendChild(emoji);

                    setTimeout(() => emoji.remove(), 1000);
                }, i * 80);
            }
        }

        function startQuiz(mode) {
            document.querySelector('h1').classList.add('hidden');
            document.querySelector('.subtitle').classList.add('hidden');
            document.getElementById('modeSelection').classList.add('hidden');
            document.getElementById('quizArea').classList.remove('hidden');
            
            if (mode === 'daily3') {
                isDaily = true;
                totalQuestions = 3;
                questionList = getRandomQuestions(3);
            } else if (mode === 'daily5') {
                isDaily = true;
                totalQuestions = 5;
                questionList = getRandomQuestions(5);
            } else if (mode === 'daily7') {
                isDaily = true;
                totalQuestions = 7;
                questionList = getRandomQuestions(7);
            } else {
                isDaily = false;
                totalQuestions = 15;
                questionList = [...allQuestions];
            }
            
            for (let i = 1; i <= 15; i++) {
                const questionElement = document.getElementById(`question${i}`);
                if (questionList.includes(i)) {
                    if (i === questionList[0]) {
                        questionElement.classList.remove('hidden');
                    } else {
                        questionElement.classList.add('hidden');
                    }
                } else {
                    if(document.getElementById(`question${i}`)){
                        document.getElementById(`question${i}`).style.display = 'none';
                    }
                }
            }
            
            currentQuestion = 0;
            updateQuestionNumbers();
            document.getElementById('total').textContent = totalQuestions;
            shuffleOptions(questionList[0]);
            updateProgress();
        }

        function getRandomQuestions(count) {
            const shuffled = [...allQuestions].sort(() => 0.5 - Math.random());
            return shuffled.slice(0, count);
        }

        function updateQuestionNumbers() {
            questionList.forEach((questionId, index) => {
                const questionElement = document.getElementById(`question${questionId}`);
                if(questionElement) {
                    const questionNumber = questionElement.querySelector('.question-number');
                    questionNumber.textContent = `å•é¡Œ ${index + 1}`;
                }
            });
        }

        function shuffleOptions(questionId) {
            if (!questionId) return;
            const container = document
                .getElementById(`question${questionId}`)
                .querySelector('.options');
            if (!container) return;
            
            for (let i = container.children.length; i >= 0; i--) {
                const rand = Math.floor(Math.random() * i);
                if (container.children[rand]) {
                    container.appendChild(container.children[rand]);
                }
            }
        }

        function updateProgress() {
            const progress = ((currentQuestion + 1) / totalQuestions) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }

        function selectAnswer(selectedOption) {
            const currentQuestionId = questionList[currentQuestion];
            const currentQuestionElement = document.getElementById(`question${currentQuestionId}`);
            const options = currentQuestionElement.querySelectorAll('.option');
            const feedback = currentQuestionElement.querySelector('.feedback');
            const explanation = currentQuestionElement.querySelector('.explanation');
            const nextButton = document.querySelector('.next-button');
            const resultButton = document.querySelector('.result-button');
            
            const isCorrect = selectedOption.dataset.answer === 'true';
            let correctAnswerText = '';
            
            options.forEach(option => {
                if (option.dataset.answer === 'true') {
                    correctAnswerText = option.textContent;
                }
            });
            
            options.forEach(option => {
                option.classList.add('disabled');
                if (option.dataset.answer === 'true') {
                    option.classList.add('correct');
                } else if (option === selectedOption && option.dataset.answer === 'false') {
                    option.classList.add('incorrect');
                }
            });

            if (isCorrect) {
                feedback.textContent = 'ğŸ‰ æ­£è§£ã§ã™ï¼';
                feedback.className = 'feedback correct';
                score++;
            } else {
                feedback.textContent = `âŒ ä¸æ­£è§£ã§ã™ã€‚æ­£è§£ã¯ã€Œ${correctAnswerText}ã€ã§ã™ã€‚`;
                feedback.className = 'feedback incorrect';
            }
            
            feedback.style.display = 'block';
            explanation.classList.remove('hidden');

            // ã‚¹ãƒãƒ›ç”¨ï¼šå›ç­”å¾Œã«ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã¾ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
            setTimeout(() => {
                feedback.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }, 100);

            if (currentQuestion < totalQuestions - 1) {
                nextButton.classList.remove('hidden');
            } else {
                resultButton.classList.remove('hidden');
            }
            
            updateScore();
        }

        function nextQuestion() {
            const currentQuestionId = questionList[currentQuestion];
            document.getElementById(`question${currentQuestionId}`).classList.add('hidden');
            
            currentQuestion++;
            const nextQuestionId = questionList[currentQuestion];
            
            shuffleOptions(nextQuestionId);
            document.getElementById(`question${nextQuestionId}`).classList.remove('hidden');
            document.querySelector('.next-button').classList.add('hidden');
            updateProgress();
        }

        function showFinalScore() {
            questionList.forEach(questionId => {
                const qElem = document.getElementById(`question${questionId}`);
                if(qElem) qElem.classList.add('hidden');
            });
            document.querySelector('.next-button').classList.add('hidden');
            document.querySelector('.result-button').classList.add('hidden');
            document.querySelector('.quiz-status').classList.add('hidden');
            document.getElementById('quizArea').classList.add('hidden');
            document.querySelector('.quiz-container').classList.add('hidden');

            const percentage = Math.round((score / totalQuestions) * 100);
            let title, message;

            if (score === totalQuestions) {
                title = 'ğŸ† å®Œç’§ã§ã™ï¼ ğŸ†';
                message = `å…¨å•æ­£è§£ï¼é™¢å†…ãƒ«ãƒ¼ãƒ«ã‚’å®Œå…¨ã«æŠŠæ¡ã—ã¦ã„ã¾ã™ã­ã€‚\nè‡ªä¿¡ã‚’æŒã£ã¦ã€æ—¥ã€…ã®æ¥­å‹™ã¨æ‚£è€…æ§˜å¯¾å¿œã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚`;
            } else if (score >= totalQuestions * 0.8) {
                title = 'ğŸŒŸ ç´ æ™´ã‚‰ã—ã„ï¼ ğŸŒŸ';
                message = `é«˜å¾—ç‚¹ã§ã™ï¼é‡è¦ãªãƒ«ãƒ¼ãƒ«ã¯ã—ã£ã‹ã‚Šç†è§£ã§ãã¦ã„ã¾ã™ã€‚\né–“é•ãˆãŸç®‡æ‰€ã‚’å†ç¢ºèªã—ã€å…¨ã¦ã®æ‚£è€…æ§˜ã«æ­£ç¢ºãªæ¡ˆå†…ãŒã§ãã‚‹ã‚ˆã†ç›®æŒ‡ã—ã¾ã—ã‚‡ã†ã€‚`;
            } else if (score >= totalQuestions * 0.5) {
                title = 'ğŸ‘ ã‚ã¨ä¸€æ­©ï¼ ğŸ‘';
                message = `åŸºæœ¬çš„ãªãƒ«ãƒ¼ãƒ«ã¯èº«ã«ã¤ã„ã¦ã„ã¾ã™ã€‚\næ‚£è€…æ§˜ã‹ã‚‰ã®è³ªå•ãŒå¤šã„é …ç›®ã‚„ã€é–“é•ã„ã‚„ã™ã„å—ä»˜æ™‚é–“ãªã©ã‚’ä¸­å¿ƒã«å¾©ç¿’ã—ã¾ã—ã‚‡ã†ã€‚`;
            } else {
                title = 'ğŸ’ª è¦å¾©ç¿’ï¼ ğŸ’ª';
                message = `ä»Šå›ã¯è‰¯ã„å¾©ç¿’ã®æ©Ÿä¼šã«ãªã‚Šã¾ã—ãŸã­ã€‚\né™¢å†…ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã‚’ã‚‚ã†ä¸€åº¦èª­ã¿è¿”ã—ã€æ­£ç¢ºãªçŸ¥è­˜ã‚’èº«ã«ã¤ã‘ã¾ã—ã‚‡ã†ã€‚æ­£ã—ã„æ¡ˆå†…ãŒæ‚£è€…æ§˜ã®ä¿¡é ¼ã«ç¹‹ãŒã‚Šã¾ã™ã€‚`;
            }

            const resultTitleHTML = `<div class="result-title">ğŸŠ çµæœç™ºè¡¨ ğŸŠ</div>`;
            const scoreHTML = `<span class="final-score-highlight">æœ€çµ‚ã‚¹ã‚³ã‚¢ : ${score}/${totalQuestions}ï¼ˆ${percentage}%ï¼‰</span>`;
            const evaluationHTML = `<div class="result-evaluation">${title}</div>`;
            const messageHTML = `<div>${message.replace(/\n/g, '<br>')}</div>`;

            document.getElementById('resultDetail').innerHTML = resultTitleHTML + evaluationHTML + scoreHTML + messageHTML;

            document.getElementById('finalResult').classList.remove('hidden');
            document.querySelector('.home-button').classList.remove('hidden');
            document.querySelector('.top-button').classList.remove('hidden');
            document.querySelector('.top-link').classList.add('hidden');

            // ãƒˆãƒƒãƒ—ã¸ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
            window.scrollTo({ top: 0, behavior: 'smooth' });

            // çµæœç™ºè¡¨ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
            setTimeout(() => {
                celebrateCorrect(document.getElementById('finalResult'));
            }, 300);
        }

        function resetQuiz() {
            document.getElementById('finalResult').classList.add('hidden');
            document.querySelector('.quiz-container').classList.remove('hidden');
            score = 0;
            updateScore();
            
            for (let i = 1; i <= 15; i++) {
                const questionElement = document.getElementById(`question${i}`);
                if(questionElement){
                    questionElement.style.display = '';
                    questionElement.classList.add('hidden');
                
                    const options = questionElement.querySelectorAll('.option');
                    options.forEach(option => {
                        option.classList.remove('correct', 'incorrect', 'disabled');
                    });
                    
                    questionElement.querySelector('.feedback').style.display = 'none';
                    questionElement.querySelector('.explanation').classList.add('hidden');
                }
            }

            document.querySelector('.next-button').classList.add('hidden');
            document.querySelector('.result-button').classList.add('hidden');
            document.querySelector('.home-button').classList.add('hidden');
            document.querySelector('.top-button').classList.add('hidden');
            document.querySelector('.top-link').classList.remove('hidden');

            document.querySelector('.quiz-status').classList.remove('hidden');

            if (totalQuestions === 3) {
                startQuiz('daily3');
            } else if (totalQuestions === 5) {
                startQuiz('daily5');
            } else if (totalQuestions === 7) {
                startQuiz('daily7');
            } else {
                startQuiz('full');
            }
        }

        function goHome() {
            document.getElementById('finalResult').classList.add('hidden');
            document.getElementById('quizArea').classList.add('hidden');
            document.querySelector('.quiz-container').classList.remove('hidden');

            document.querySelector('h1').classList.remove('hidden');
            document.querySelector('.subtitle').classList.remove('hidden');
            
            for (let i = 1; i <= 15; i++) {
                const questionElement = document.getElementById(`question${i}`);
                if(questionElement) {
                    questionElement.style.display = '';
                    questionElement.classList.add('hidden');
                
                    const options = questionElement.querySelectorAll('.option');
                    options.forEach(option => {
                        option.classList.remove('correct', 'incorrect', 'disabled');
                    });
                    
                    questionElement.querySelector('.feedback').style.display = 'none';
                    questionElement.querySelector('.explanation').classList.add('hidden');
                }
            }

            document.querySelector('.next-button').classList.add('hidden');
            document.querySelector('.result-button').classList.add('hidden');
            document.querySelector('.home-button').classList.add('hidden');
            document.querySelector('.top-button').classList.add('hidden');
            document.querySelector('.top-link').classList.remove('hidden');
            document.querySelector('.quiz-status').classList.remove('hidden');

            currentQuestion = 1;
            score = 0;
            totalQuestions = 15;
            questionList = [];
            isDaily = false;
            
            updateScore();
            
            document.getElementById('modeSelection').classList.remove('hidden');
        }

        function updateScore() {
            document.getElementById('score').textContent = score;
        }

        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('option') && !e.target.classList.contains('disabled')) {
                selectAnswer(e.target);
            }
        });
    </script>

    <div id="finalResult" class="final-score-card hidden">
      <div id="resultDetail" class="result-detail"></div>
      <div class="buttons">
        <button class="home-button hidden" onclick="goHome()">ãƒ¢ãƒ¼ãƒ‰é¸æŠã«æˆ»ã‚‹</button>
        <a href="../index.html" class="top-button hidden">ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã¸</a>
      </div>
    </div>

</body>
</html>