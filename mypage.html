<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>å­¦ç¿’è¨˜éŒ² - ã²ã‹ã‚Šçœ¼ç§‘ å­¦ç¿’ã‚¯ã‚¤ã‚º</title>
    <style>
        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Noto Sans JP', -apple-system, BlinkMacSystemFont, sans-serif;
            margin: 0;
            padding: 12px;
            padding-top: max(12px, env(safe-area-inset-top));
            padding-bottom: max(12px, env(safe-area-inset-bottom));
            padding-left: max(12px, env(safe-area-inset-left));
            padding-right: max(12px, env(safe-area-inset-right));
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 28px 20px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.2);
        }

        .header {
            text-align: center;
            margin-bottom: 24px;
        }

        .header-icon {
            font-size: 48px;
            margin-bottom: 12px;
        }

        h1 {
            color: #1a237e;
            font-size: 24px;
            margin: 0 0 8px 0;
        }

        .header-subtitle {
            color: #5c6bc0;
            font-size: 14px;
        }

        .section {
            margin-bottom: 28px;
        }

        .section-title {
            font-size: 16px;
            font-weight: bold;
            color: #1a237e;
            margin-bottom: 14px;
            padding-bottom: 8px;
            border-bottom: 2px solid #e8eaf6;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* ãƒãƒƒã‚¸ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
        .badge-container {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            justify-content: center;
        }

        .badge {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 12px;
            border-radius: 12px;
            background: #f5f5f5;
            min-width: 80px;
            transition: transform 0.2s;
        }

        .badge.earned {
            background: linear-gradient(135deg, #fff9c4, #fff59d);
            box-shadow: 0 2px 8px rgba(255, 193, 7, 0.3);
        }

        .badge.locked {
            opacity: 0.5;
        }

        .badge-icon {
            font-size: 32px;
            margin-bottom: 6px;
        }

        .badge.locked .badge-icon {
            filter: grayscale(100%);
        }

        .badge-name {
            font-size: 11px;
            color: #666;
            text-align: center;
            line-height: 1.3;
        }

        .badge.earned .badge-name {
            color: #333;
            font-weight: bold;
        }

        /* çµ±è¨ˆ */
        .stats-row {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 16px;
        }

        .stat-item {
            text-align: center;
            padding: 12px 20px;
            background: #f8f9ff;
            border-radius: 12px;
        }

        .stat-value {
            font-size: 28px;
            font-weight: bold;
            color: #1a237e;
        }

        .stat-label {
            font-size: 12px;
            color: #666;
            margin-top: 4px;
        }

        /* ã‚¯ã‚¤ã‚ºé€²æ— */
        .progress-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .progress-item {
            display: flex;
            align-items: center;
            padding: 14px 16px;
            background: white;
            border: 2px solid #e8eaf6;
            border-radius: 12px;
            transition: all 0.2s;
        }

        .progress-item:active {
            transform: scale(0.98);
        }

        .progress-icon {
            font-size: 28px;
            margin-right: 12px;
        }

        .progress-content {
            flex-grow: 1;
            min-width: 0;
        }

        .progress-title {
            font-size: 14px;
            font-weight: bold;
            color: #333;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .progress-status {
            font-size: 18px;
        }

        .progress-detail {
            font-size: 13px;
            color: #666;
        }

        .progress-score {
            text-align: right;
            min-width: 70px;
        }

        .score-value {
            font-size: 16px;
            font-weight: bold;
            color: #1a237e;
        }

        .score-label {
            font-size: 11px;
            color: #999;
        }

        .not-attempted {
            color: #999;
            font-style: italic;
        }

        /* å®Œå…¨åˆ¶è¦‡ãƒãƒŠãƒ¼ */
        .complete-banner {
            background: linear-gradient(135deg, #ffd700, #ffb300);
            color: #5d4037;
            padding: 16px;
            border-radius: 12px;
            text-align: center;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(255, 193, 7, 0.4);
        }

        .complete-banner.hidden {
            display: none;
        }

        .complete-icon {
            font-size: 40px;
            margin-bottom: 8px;
        }

        .complete-text {
            font-size: 18px;
            font-weight: bold;
        }

        .complete-sub {
            font-size: 13px;
            margin-top: 4px;
        }

        /* ãƒ•ãƒƒã‚¿ãƒ¼ */
        .footer {
            margin-top: 24px;
            text-align: center;
        }

        .back-link {
            display: inline-block;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            text-decoration: none;
            padding: 12px 28px;
            border-radius: 25px;
            font-size: 15px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .back-link:active {
            transform: scale(0.95);
        }

        .reset-data {
            margin-top: 16px;
        }

        .reset-button {
            background: none;
            border: none;
            color: #999;
            font-size: 12px;
            cursor: pointer;
            padding: 8px 16px;
            text-decoration: underline;
        }

        /* ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆãƒ»PCå‘ã‘ */
        @media (min-width: 768px) {
            body {
                padding: 20px;
            }

            .container {
                padding: 40px;
            }

            .header-icon {
                font-size: 56px;
            }

            h1 {
                font-size: 28px;
            }

            .section-title {
                font-size: 18px;
            }

            .badge {
                min-width: 100px;
                padding: 16px;
            }

            .badge-icon {
                font-size: 40px;
            }

            .badge-name {
                font-size: 12px;
            }

            .stat-value {
                font-size: 32px;
            }

            .progress-item {
                padding: 18px 20px;
            }

            .progress-item:hover {
                border-color: #c5cae9;
                box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            }

            .progress-icon {
                font-size: 32px;
            }

            .progress-title {
                font-size: 16px;
            }

            .back-link:hover {
                transform: translateY(-2px);
                box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-icon">ğŸ“Š</div>
            <h1>å­¦ç¿’è¨˜éŒ²</h1>
            <div class="header-subtitle">å­¦ç¿’ã®é€²æ—ã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†</div>
        </div>

        <div id="completeBanner" class="complete-banner hidden">
            <div class="complete-icon">ğŸ†</div>
            <div class="complete-text">å…¨ã‚¯ã‚¤ã‚º ã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆï¼</div>
            <div class="complete-sub">ã™ã¹ã¦ã®ã‚¯ã‚¤ã‚ºã§æº€ç‚¹ã‚’é”æˆã—ã¾ã—ãŸ</div>
        </div>

        <div class="section">
            <div class="section-title">
                <span>ğŸ–ï¸</span>
                å®Ÿç¸¾ãƒãƒƒã‚¸
            </div>
            <div id="badgeContainer" class="badge-container">
                <!-- JSã§å‹•çš„ç”Ÿæˆ -->
            </div>
        </div>

        <div class="section">
            <div class="section-title">
                <span>ğŸ“ˆ</span>
                çµ±è¨ˆ
            </div>
            <div class="stats-row">
                <div class="stat-item">
                    <div id="totalAnswered" class="stat-value">0</div>
                    <div class="stat-label">ç´¯è¨ˆå›ç­”æ•°</div>
                </div>
                <div class="stat-item">
                    <div id="perfectCount" class="stat-value">0</div>
                    <div class="stat-label">æº€ç‚¹ã‚¯ã‚¤ã‚º</div>
                </div>
            </div>
        </div>

        <div class="section">
            <div class="section-title">
                <span>ğŸ“</span>
                ã‚¯ã‚¤ã‚ºé€²æ—
            </div>
            <div id="progressList" class="progress-list">
                <!-- JSã§å‹•çš„ç”Ÿæˆ -->
            </div>
        </div>

        <div class="footer">
            <a href="index.html" class="back-link">ğŸ  ãƒ›ãƒ¼ãƒ ã¸æˆ»ã‚‹</a>
            <div class="reset-data">
                <button class="reset-button" onclick="confirmReset()">å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã‚’ãƒªã‚»ãƒƒãƒˆ</button>
            </div>
        </div>
    </div>

    <script src="quizzes/quiz-config.js"></script>
    <script>
        function renderPage() {
            const data = getQuizData();
            const progress = data.progress || {};
            const badges = data.badges || [];

            // ãƒãƒƒã‚¸ã‚’è¡¨ç¤º
            const badgeContainer = document.getElementById('badgeContainer');
            badgeContainer.innerHTML = BADGE_LIST.map(badge => {
                const isEarned = badges.includes(badge.id);
                return `
                    <div class="badge ${isEarned ? 'earned' : 'locked'}" title="${badge.description}">
                        <div class="badge-icon">${isEarned ? badge.icon : 'ğŸ”’'}</div>
                        <div class="badge-name">${badge.name}</div>
                    </div>
                `;
            }).join('');

            // çµ±è¨ˆã‚’è¡¨ç¤º
            document.getElementById('totalAnswered').textContent = data.totalAnswered || 0;

            let perfectCount = 0;
            QUIZ_LIST.forEach(quiz => {
                if (progress[quiz.id] && progress[quiz.id].isPerfect) {
                    perfectCount++;
                }
            });
            document.getElementById('perfectCount').textContent = `${perfectCount}/${QUIZ_LIST.length}`;

            // ã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆãƒãƒŠãƒ¼
            if (perfectCount === QUIZ_LIST.length && QUIZ_LIST.length > 0) {
                document.getElementById('completeBanner').classList.remove('hidden');
            }

            // ã‚¯ã‚¤ã‚ºé€²æ—ã‚’è¡¨ç¤º
            const progressList = document.getElementById('progressList');
            progressList.innerHTML = QUIZ_LIST.map(quiz => {
                const quizProgress = progress[quiz.id];
                let statusIcon = 'ãƒ¼';
                let scoreText = '';
                let detailText = 'æœªæŒ‘æˆ¦';

                if (quizProgress) {
                    if (quizProgress.isPerfect) {
                        statusIcon = 'ğŸŒ¸';
                    } else {
                        statusIcon = 'â­';
                    }
                    scoreText = `${quizProgress.bestScore}/${quizProgress.totalQuestions}`;
                    detailText = `${quizProgress.attempts}å›æŒ‘æˆ¦`;
                }

                return `
                    <a href="quizzes/${quiz.file}" class="progress-item" style="text-decoration: none;">
                        <div class="progress-icon">${quiz.icon}</div>
                        <div class="progress-content">
                            <div class="progress-title">
                                <span class="progress-status">${statusIcon}</span>
                                ${quiz.name}
                            </div>
                            <div class="progress-detail ${!quizProgress ? 'not-attempted' : ''}">${detailText}</div>
                        </div>
                        <div class="progress-score">
                            ${quizProgress ? `
                                <div class="score-value">${scoreText}</div>
                                <div class="score-label">æœ€é«˜ã‚¹ã‚³ã‚¢</div>
                            ` : `
                                <div class="not-attempted">ãƒ¼</div>
                            `}
                        </div>
                    </a>
                `;
            }).join('');
        }

        function confirmReset() {
            if (confirm('å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã‚’ã™ã¹ã¦ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ\nã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“ã€‚')) {
                localStorage.removeItem(STORAGE_KEY);
                renderPage();
                alert('å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸã€‚');
            }
        }

        // åˆæœŸåŒ–
        renderPage();
    </script>
</body>
</html>
